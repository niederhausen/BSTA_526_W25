<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-01-15">

<title>Survey Feedback – BSTA 526 Winter 2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-sm " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/IMG_6759_med.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">BSTA 526 Winter 2025</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./readings.html"> 
<span class="menu-text">Readings</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./weeks.html"> 
<span class="menu-text">Weeks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./survey_feedback_previous_years.html"> 
<span class="menu-text">Survey</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./survey_feedback_previous_years.html">Survey Feedback</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readings</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./weeks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Weeks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./survey_feedback_previous_years.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Survey Feedback</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./function_week.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions of the Week</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#section" id="toc-section" class="nav-link active" data-scroll-target="#section">2025</a>
  <ul class="collapse">
  <li><a href="#week-1" id="toc-week-1" class="nav-link" data-scroll-target="#week-1">Week 1</a></li>
  </ul></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1">2024</a>
  <ul class="collapse">
  <li><a href="#week-1-1" id="toc-week-1-1" class="nav-link" data-scroll-target="#week-1-1">Week 1</a>
  <ul class="collapse">
  <li><a href="#muddiest-points" id="toc-muddiest-points" class="nav-link" data-scroll-target="#muddiest-points">Muddiest points</a></li>
  <li><a href="#clearest-points" id="toc-clearest-points" class="nav-link" data-scroll-target="#clearest-points">Clearest Points</a></li>
  </ul></li>
  <li><a href="#week-2" id="toc-week-2" class="nav-link" data-scroll-target="#week-2">Week 2</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-1" id="toc-muddiest-points-1" class="nav-link" data-scroll-target="#muddiest-points-1">Muddiest points</a></li>
  <li><a href="#clearest-points-1" id="toc-clearest-points-1" class="nav-link" data-scroll-target="#clearest-points-1">Clearest Points</a></li>
  </ul></li>
  <li><a href="#week-3" id="toc-week-3" class="nav-link" data-scroll-target="#week-3">Week 3</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-2" id="toc-muddiest-points-2" class="nav-link" data-scroll-target="#muddiest-points-2">Muddiest points</a></li>
  </ul></li>
  <li><a href="#week-4" id="toc-week-4" class="nav-link" data-scroll-target="#week-4">Week 4</a>
  <ul class="collapse">
  <li><a href="#keyboard-shortcut-for-the-pipe-or" id="toc-keyboard-shortcut-for-the-pipe-or" class="nav-link" data-scroll-target="#keyboard-shortcut-for-the-pipe-or">Keyboard shortcut for the pipe (<code>%&gt;%</code> or <code>|&gt;</code>)</a></li>
  <li><a href="#the-difference-between-na-value-and-0" id="toc-the-difference-between-na-value-and-0" class="nav-link" data-scroll-target="#the-difference-between-na-value-and-0">The difference between NA value and 0</a></li>
  <li><a href="#across-and-its-usage" id="toc-across-and-its-usage" class="nav-link" data-scroll-target="#across-and-its-usage"><code>across()</code> and it’s usage</a></li>
  <li><a href="#and-.x" id="toc-and-.x" class="nav-link" data-scroll-target="#and-.x"><code>~</code> and <code>.x</code></a></li>
  <li><a href="#exceptions-where-we-have-seen-the-used" id="toc-exceptions-where-we-have-seen-the-used" class="nav-link" data-scroll-target="#exceptions-where-we-have-seen-the-used">Exceptions where we have seen the <code>~</code> used</a></li>
  <li><a href="#case_when-vs.-if_else" id="toc-case_when-vs.-if_else" class="nav-link" data-scroll-target="#case_when-vs.-if_else"><code>case_when</code> vs.&nbsp;<code>if_else</code></a></li>
  <li><a href="#the-difference-between-a-theme-and-and-a-palette." id="toc-the-difference-between-a-theme-and-and-a-palette." class="nav-link" data-scroll-target="#the-difference-between-a-theme-and-and-a-palette.">The difference between a theme and and a palette.</a></li>
  <li><a href="#be-careful-what-you-pipe-to-and-from" id="toc-be-careful-what-you-pipe-to-and-from" class="nav-link" data-scroll-target="#be-careful-what-you-pipe-to-and-from">Be careful what you pipe to and from</a></li>
  <li><a href="#other-muddy-points" id="toc-other-muddy-points" class="nav-link" data-scroll-target="#other-muddy-points">Other muddy points</a></li>
  </ul></li>
  <li><a href="#week-5" id="toc-week-5" class="nav-link" data-scroll-target="#week-5">Week 5</a>
  <ul class="collapse">
  <li><a href="#case_when-vs-ifelse" id="toc-case_when-vs-ifelse" class="nav-link" data-scroll-target="#case_when-vs-ifelse"><code>case_when()</code> vs <code>ifelse()</code></a></li>
  <li><a href="#separate" id="toc-separate" class="nav-link" data-scroll-target="#separate"><code>separate()</code></a></li>
  <li><a href="#herehere" id="toc-herehere" class="nav-link" data-scroll-target="#herehere"><code>here::here()</code></a></li>
  <li><a href="#what-functions-will-only-work-within-another-function-generally" id="toc-what-functions-will-only-work-within-another-function-generally" class="nav-link" data-scroll-target="#what-functions-will-only-work-within-another-function-generally">what functions will only work within another function (generally)</a></li>
  </ul></li>
  <li><a href="#week-6-part-5-contd." id="toc-week-6-part-5-contd." class="nav-link" data-scroll-target="#week-6-part-5-contd.">Week 6 (Part 5 contd.)</a>
  <ul class="collapse">
  <li><a href="#across" id="toc-across" class="nav-link" data-scroll-target="#across"><code>across()</code></a></li>
  <li><a href="#case_when-vs-ifelse-1" id="toc-case_when-vs-ifelse-1" class="nav-link" data-scroll-target="#case_when-vs-ifelse-1"><code>case_when()</code> vs <code>ifelse()</code></a></li>
  <li><a href="#factor-levels" id="toc-factor-levels" class="nav-link" data-scroll-target="#factor-levels">factor levels</a></li>
  <li><a href="#pivoting-tables" id="toc-pivoting-tables" class="nav-link" data-scroll-target="#pivoting-tables">pivoting tables</a></li>
  <li><a href="#gtgt" id="toc-gtgt" class="nav-link" data-scroll-target="#gtgt"><code>gt::gt()</code></a></li>
  <li><a href="#herehere-1" id="toc-herehere-1" class="nav-link" data-scroll-target="#herehere-1"><code>here::here</code></a></li>
  <li><a href="#clearest-points-2" id="toc-clearest-points-2" class="nav-link" data-scroll-target="#clearest-points-2">Clearest points</a></li>
  </ul></li>
  <li><a href="#week-7-part-6" id="toc-week-7-part-6" class="nav-link" data-scroll-target="#week-7-part-6">Week 7 (Part 6)</a>
  <ul class="collapse">
  <li><a href="#clearest-points-3" id="toc-clearest-points-3" class="nav-link" data-scroll-target="#clearest-points-3">Clearest points</a></li>
  <li><a href="#other-comments" id="toc-other-comments" class="nav-link" data-scroll-target="#other-comments">Other comments</a></li>
  </ul></li>
  <li><a href="#week-8-part-7" id="toc-week-8-part-7" class="nav-link" data-scroll-target="#week-8-part-7">Week 8 (Part 7)</a>
  <ul class="collapse">
  <li><a href="#when-loading-a-dataset-what-does-mean" id="toc-when-loading-a-dataset-what-does-mean" class="nav-link" data-scroll-target="#when-loading-a-dataset-what-does-mean">When loading a dataset, what does <promise> mean?</promise></a></li>
  <li><a href="#challenge-2" id="toc-challenge-2" class="nav-link" data-scroll-target="#challenge-2">Challenge # 2</a></li>
  <li><a href="#purrrpluck" id="toc-purrrpluck" class="nav-link" data-scroll-target="#purrrpluck"><code>purrr::pluck</code></a></li>
  <li><a href="#lists-general-confusion" id="toc-lists-general-confusion" class="nav-link" data-scroll-target="#lists-general-confusion">Lists – general confusion</a></li>
  <li><a href="#lists-one-bracket-versus-two-brackets." id="toc-lists-one-bracket-versus-two-brackets." class="nav-link" data-scroll-target="#lists-one-bracket-versus-two-brackets.">Lists – One bracket versus two brackets.</a></li>
  <li><a href="#how-and-when-to-use-curly-curly-within-a-function" id="toc-how-and-when-to-use-curly-curly-within-a-function" class="nav-link" data-scroll-target="#how-and-when-to-use-curly-curly-within-a-function">How and when to use curly curly within a function</a></li>
  </ul></li>
  <li><a href="#week-9-part-7" id="toc-week-9-part-7" class="nav-link" data-scroll-target="#week-9-part-7">Week 9 (Part 7)</a>
  <ul class="collapse">
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices">Matrices</a></li>
  <li><a href="#for-loops" id="toc-for-loops" class="nav-link" data-scroll-target="#for-loops"><code>for()</code> loops</a></li>
  <li><a href="#na.rm-vs-na.omit" id="toc-na.rm-vs-na.omit" class="nav-link" data-scroll-target="#na.rm-vs-na.omit"><code>na.rm</code> vs <code>na.omit</code></a></li>
  <li><a href="#purrrmap" id="toc-purrrmap" class="nav-link" data-scroll-target="#purrrmap"><code>purrr::map()</code></a></li>
  <li><a href="#general-references" id="toc-general-references" class="nav-link" data-scroll-target="#general-references">General references</a></li>
  </ul></li>
  <li><a href="#week-10-part-8" id="toc-week-10-part-8" class="nav-link" data-scroll-target="#week-10-part-8">Week 10 (Part 8)</a>
  <ul class="collapse">
  <li><a href="#confusion-on-details-of-purrrmap" id="toc-confusion-on-details-of-purrrmap" class="nav-link" data-scroll-target="#confusion-on-details-of-purrrmap">Confusion on details of <code>purrr::map()</code></a></li>
  <li><a href="#purrrreduce" id="toc-purrrreduce" class="nav-link" data-scroll-target="#purrrreduce"><code>purrr::reduce()</code></a></li>
  <li><a href="#list.files-function" id="toc-list.files-function" class="nav-link" data-scroll-target="#list.files-function">List.files function</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2">2023</a>
  <ul class="collapse">
  <li><a href="#week-1-2" id="toc-week-1-2" class="nav-link" data-scroll-target="#week-1-2">Week 1</a>
  <ul class="collapse">
  <li><a href="#pacing" id="toc-pacing" class="nav-link" data-scroll-target="#pacing">Pacing</a></li>
  <li><a href="#muddiest-points-3" id="toc-muddiest-points-3" class="nav-link" data-scroll-target="#muddiest-points-3">Muddiest Points</a></li>
  <li><a href="#clearest-points-4" id="toc-clearest-points-4" class="nav-link" data-scroll-target="#clearest-points-4">Clearest Points</a></li>
  <li><a href="#other-messages-just-a-selection" id="toc-other-messages-just-a-selection" class="nav-link" data-scroll-target="#other-messages-just-a-selection">Other messages, just a selection</a></li>
  </ul></li>
  <li><a href="#week-2-1" id="toc-week-2-1" class="nav-link" data-scroll-target="#week-2-1">Week 2</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-4" id="toc-muddiest-points-4" class="nav-link" data-scroll-target="#muddiest-points-4">Muddiest Points</a></li>
  <li><a href="#clearest-points-5" id="toc-clearest-points-5" class="nav-link" data-scroll-target="#clearest-points-5">Clearest Points</a></li>
  <li><a href="#other-messages" id="toc-other-messages" class="nav-link" data-scroll-target="#other-messages">Other messages</a></li>
  </ul></li>
  <li><a href="#week-3-1" id="toc-week-3-1" class="nav-link" data-scroll-target="#week-3-1">Week 3</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-5" id="toc-muddiest-points-5" class="nav-link" data-scroll-target="#muddiest-points-5">Muddiest points</a></li>
  <li><a href="#clearest-points-6" id="toc-clearest-points-6" class="nav-link" data-scroll-target="#clearest-points-6">Clearest Points</a></li>
  <li><a href="#other-messages-1" id="toc-other-messages-1" class="nav-link" data-scroll-target="#other-messages-1">Other messages</a></li>
  </ul></li>
  <li><a href="#week-4-1" id="toc-week-4-1" class="nav-link" data-scroll-target="#week-4-1">Week 4</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-6" id="toc-muddiest-points-6" class="nav-link" data-scroll-target="#muddiest-points-6">Muddiest points</a></li>
  <li><a href="#clearest-points-7" id="toc-clearest-points-7" class="nav-link" data-scroll-target="#clearest-points-7">Clearest points</a></li>
  <li><a href="#other-points" id="toc-other-points" class="nav-link" data-scroll-target="#other-points">Other points</a></li>
  </ul></li>
  <li><a href="#week-5-1" id="toc-week-5-1" class="nav-link" data-scroll-target="#week-5-1">Week 5</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-7" id="toc-muddiest-points-7" class="nav-link" data-scroll-target="#muddiest-points-7">Muddiest points</a></li>
  <li><a href="#clearest-points-8" id="toc-clearest-points-8" class="nav-link" data-scroll-target="#clearest-points-8">Clearest points</a></li>
  <li><a href="#other" id="toc-other" class="nav-link" data-scroll-target="#other">Other</a></li>
  </ul></li>
  <li><a href="#week-6" id="toc-week-6" class="nav-link" data-scroll-target="#week-6">Week 6</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-8" id="toc-muddiest-points-8" class="nav-link" data-scroll-target="#muddiest-points-8">Muddiest Points</a></li>
  <li><a href="#other-piping-troubles" id="toc-other-piping-troubles" class="nav-link" data-scroll-target="#other-piping-troubles">Other: piping troubles</a></li>
  </ul></li>
  <li><a href="#week-7" id="toc-week-7" class="nav-link" data-scroll-target="#week-7">Week 7</a>
  <ul class="collapse">
  <li><a href="#muddiest-parts" id="toc-muddiest-parts" class="nav-link" data-scroll-target="#muddiest-parts">Muddiest Parts</a></li>
  <li><a href="#clearest-points-9" id="toc-clearest-points-9" class="nav-link" data-scroll-target="#clearest-points-9">Clearest Points</a></li>
  <li><a href="#other-1" id="toc-other-1" class="nav-link" data-scroll-target="#other-1">Other</a></li>
  </ul></li>
  <li><a href="#week-8" id="toc-week-8" class="nav-link" data-scroll-target="#week-8">Week 8</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-9" id="toc-muddiest-points-9" class="nav-link" data-scroll-target="#muddiest-points-9">Muddiest Points</a></li>
  <li><a href="#clearest-points-10" id="toc-clearest-points-10" class="nav-link" data-scroll-target="#clearest-points-10">Clearest points</a></li>
  <li><a href="#other-2" id="toc-other-2" class="nav-link" data-scroll-target="#other-2">Other</a></li>
  </ul></li>
  <li><a href="#week-9" id="toc-week-9" class="nav-link" data-scroll-target="#week-9">Week 9</a>
  <ul class="collapse">
  <li><a href="#muddiest-points-10" id="toc-muddiest-points-10" class="nav-link" data-scroll-target="#muddiest-points-10">Muddiest Points</a></li>
  <li><a href="#clearest-points-11" id="toc-clearest-points-11" class="nav-link" data-scroll-target="#clearest-points-11">Clearest points</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Survey Feedback</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 15, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="section" class="level1">
<h1>2025</h1>
<p>Please fill out the post-class survey <a href="https://ohsu.ca1.qualtrics.com/jfe/form/SV_dhbhugCU2UnjYOi">here</a>.</p>
<section id="week-1" class="level2">
<h2 class="anchored" data-anchor-id="week-1">Week 1</h2>
</section>
</section>
<section id="section-1" class="level1">
<h1>2024</h1>
<section id="week-1-1" class="level2">
<h2 class="anchored" data-anchor-id="week-1-1">Week 1</h2>
<section id="muddiest-points" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points">Muddiest points</h3>
<section id="class-logistics" class="level4">
<h4 class="anchored" data-anchor-id="class-logistics">Class logistics</h4>
<ul>
<li>Will there be presentation slides in future classes, or is everything embedded into the quarto/html files for all lectures?
<ul>
<li><em>The material will primarily be in quarto/html files and not slides.</em></li>
</ul></li>
<li>Specifics of what topics will be covered exactly. * <em>I don’t have a list of all the specific functions we will be covering, but you are welcome to peruse the <a href="https://sph-r-programming-2023.netlify.app/">BSTA 504 webpage from Winter 2023</a> to get more details on topics we will be covering. We will be closely following the same class materials.</em></li>
<li>Identifying which section of the code we were discussing during the lecture
<ul>
<li><em>Thanks for letting me know. I will try to be clearer in the future, and also jump around less. Please let me know in class if you’re not sure where we are at.</em></li>
</ul></li>
<li>The material covered towards the end of the class felt a bit difficult to keep up with. I wish we would have been told to read the materials from Week 1 (or at least skim them) ahead of Day 1, because I quickly lost track of the conversation when shortcuts were used super quickly, for example, or when we jumped from chunks of code to another topic without reflecting on them. I still had 70% of the material down and I wrote great notes during the discussion (which I later filled in with the script that was on the class website), but I think it the beginner/intermediate programming lingo that was used to explain ideas here confused me at times. Thus, I struggled to keep up with discussions around packages / best coding practices, especially when they were not mentioned directly on the script (where I could follow along!).
<ul>
<li><em>Thanks for the feedback. In future years, we will reach out to students before the term to let them know about the readings to prepare for class. Please let us know if there is lingo we are using that you are not familiar with. Learning R and coding is a whole new language!</em></li>
</ul></li>
</ul>
</section>
<section id="rstudio" class="level4">
<h4 class="anchored" data-anchor-id="rstudio">RStudio</h4>
<ul>
<li>I have trouble thinking through where things are automatically downloaded, saved, and running from. I can attend office hours for this!
<ul>
<li><em>Office hours are always a great idea. I do recommend paying close attention to where files are being saved when downloading and preferably specifying their location instead using the default location. Having organized files will make working on complex analyses much easier.</em></li>
</ul></li>
<li>How to read the course material in R. While it made sense in real time it may be difficult when going back over the material.
<ul>
<li><em>Getting used to reading code and navigating the rendered html files takes a while, and is a part of learning R. Figuring out how to take notes for yourself that works for you is also a learning curve. I recommend taking notes in the qmd files as we go through them in class. After class you can summarize and transfer key points to other file formats that you are more used to using. I personally have a folder in my Google drive filled with documents on different R programming topics. It started with one file, and then eventually expanded to multiple files on different topics in an attempt to organize my notes better. Whenever I learn something new (such as an R function or handy R package) that I want to keep for future reference, I add to them with links to relevant webpages and/or filenames and locations of where I used them.</em></li>
</ul></li>
</ul>
</section>
<section id="code" class="level4">
<h4 class="anchored" data-anchor-id="code">Code</h4>
<ul>
<li>What does the pacman package do? I have it installed but I’m not sure what it is actually used for.
<ul>
<li><em>I didn’t go into <code>pacman</code> in Day 1. The <code>p_load()</code> function from the <code>pacman</code> package (usually run as <code>pacman::p_load()</code>) lets you load many packages at once without separately using the <code>library()</code> function for each individually.</em></li>
<li><em>An added bonus is that by default it will install packages you don’t already have, unless you specify <code>install = FALSE</code>.</em></li>
<li><em>Another option is to set <code>update = TRUE</code> so that it will automatically update packages. I do not use this option though since sometimes updating packages causes conflicts with other packages or older code.</em></li>
<li><em>You can read more about the different options in the <a href="https://www.rdocumentation.org/packages/pacman/versions/0.5.1/topics/p_load">documentation</a>. This <a href="https://medium.com/r-tutorials/an-alternative-to-loading-packages-in-r-using-pacman-p-load-6037903a301a">Medium article</a> also has some tips on using <code>pacman</code>.</em></li>
</ul></li>
<li>The part on when to load in packages once they’ve already been loaded in - like for example would it be good to put that as a step in our homework 1 .qmd at the top? Or not necessary since they’re already loaded in to R Studio from the work we did in class yesterday? What would happen if we try to load them in and they were already loaded in, would the .qmd file not render and show an error?
<ul>
<li><em>I always load my packages at the very top of the .qmd files, usually in the first code chunk (with the setup label). If you still have a previous R session open, then yes you don’t need to load the packages again to run code within RStudio. However, when a file is rendered it starts with an empty workspace, which is why our qmd file must include code that loads the packages (either using <code>library()</code> or <code>pacman::p_load()</code>. We don’t have to load packages at the beginning of the file, just before we have code that depends on the packages being used.</em></li>
</ul></li>
<li>I didn’t understand the part where we talked about num, char, logical combinations (line 503).
<ul>
<li><em>The content of the objects <code>char_logical</code>, <code>num_char</code>, <code>num_logical</code>, and <code>tricky</code> were designed specifically to be confusing and thus make us aware of how R will decide to assign the data type when a vector is a mix of data types. Some key takeaways are below. Let me know if you sitll have questions about this.</em>
<ul>
<li><em>Numbers and logical/boolean (<code>TRUE</code>, <code>FALSE</code>) do not have double quotes around them, but character strings do. If you add double quotes to a number or logical, then R will treat it as a character string.</em></li>
<li><em>If a vector is a mix of numbers and character strings, then the data type of the vector is character.</em></li>
<li><em>If a vector is a mix of numbers and logical, then the data type of the vector is numeric and the logical value is converted to a numeric value (<code>TRUE</code>=1, <code>FALSE</code>=0).</em></li>
<li><em>If a vector is a mix of character strings and logical, then the data type of the vector is character and the logical value is converted to a character string and no longer operates as a logical (i.e.&nbsp;no longer equal to 1 or 0).</em></li>
</ul></li>
</ul></li>
<li>Lines 614-619, confused what the ratio means there. Could you go over the correct code (or options of the correct code) for challenge 5?
<ul>
<li><em>The code <code>1:4</code> or <code>6:9</code> creates sequences of integers starting with the first specified digit and ending at the last specified digit. For example, <code>1:4</code> is the vector with the digits 1 2 3 4. You can also create decreasing sequences by making the first number the bigger one. For example, <code>9:7</code> is the vector 9 8 7.</em></li>
<li><em>Challenge 5:</em>
<ul>
<li><code>more_heights_complete &lt;- na.omit(more_heights)</code></li>
<li><code>median(more_heights_complete)</code></li>
<li><em>You could also get the median of <code>more_heights</code> without first removing the missing values with <code>median(more_heights, na.rm = TRUE)</code>.</em></li>
</ul></li>
</ul></li>
<li>how to count the TRUE values in a logical vector
<ul>
<li><code>TRUE</code> is equal to 1 in R (and <code>FALSE</code> is equal to 0), and the function <code>sum()</code> adds up the values in a vector. Thus, <code>sum(TRUE, FALSE, TRUE)</code> is equal to 2. Similarly, <code>sum(TRUE, FALSE, 5)</code> is equal to 6.</li>
<li>The way I used it in class though is by counting how many values in the vector <code>z</code> (which was 7 9 11 13) are equal to 9. To do that I used the code <code>sum(z == 9)</code>. Breaking that down, the code inside the parentheses <code>z == 9</code> is equal to <code>FALSE TRUE FALSE FALSE</code> since the <code>==</code> means “equals to” in R.</li>
<li>You can read up more on boolean and logical operators at the <a href="https://www.r-bloggers.com/2021/09/r-booleans-comparison-and-logical-operators/">R-bloggers post</a>.</li>
</ul></li>
</ul>
</section>
</section>
<section id="clearest-points" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points">Clearest Points</h3>
<p><em>Thank you for the feedback!</em></p>
<section id="class-logistics-1" class="level4">
<h4 class="anchored" data-anchor-id="class-logistics-1">Class logistics</h4>
<ul>
<li>Syllabus/course structure</li>
<li>The syllabus review.</li>
<li>Overall expectations and course flow</li>
<li>Introduction to the class (first half of the class); conversation around syllabus; and the Quarto introduction</li>
</ul>
</section>
<section id="quarto" class="level4">
<h4 class="anchored" data-anchor-id="quarto">Quarto</h4>
<ul>
<li>How to create and edit a Quarto document in RStudio.</li>
<li>The differences between quarto and markdown</li>
<li>rmarkdown is no more, quarto it is!</li>
</ul>
</section>
<section id="coding" class="level4">
<h4 class="anchored" data-anchor-id="coding">Coding</h4>
<ul>
<li>Having code missing and fixing it in front of the class was helpful in troubleshooting.</li>
<li>Just running through all the commands was very clear and easy to follow</li>
<li>Basic R set up for quarto and introduction to R objects, vectors, etc.</li>
<li>Introduction, functions, and explanations was the clearest for me.</li>
<li>Classification of the objects in logical, character, and numeric</li>
<li>Not necessarily a point, but I really liked when we were encouraged to use the shortcut keys for various commands on R and other little things like switching code between console vs inline , I have used R before for a class briefly but I never knew all these ways by which I can save time and be efficient while writing a code.</li>
</ul>
</section>
</section>
</section>
<section id="week-2" class="level2">
<h2 class="anchored" data-anchor-id="week-2">Week 2</h2>
<section id="muddiest-points-1" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-1">Muddiest points</h3>
<ul>
<li>When discussing untidy data, the difference between long data and wide data was unclear.
<ul>
<li><em>We’ll be discussing the difference between long and wide data in more detail later in the course when we convert a dataset between the two. For now, you can take a look at an <a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part2.html#27">example I created for our BERD R workshops</a>. The wide data in that example are not “tidy” since each cell contains two pieces of information: both the SBP and the visit number. In contrast, the long data have a separate column indicating which visit number the data in a given row are from.</em></li>
</ul></li>
<li>for the “summary()” function, is there a way to summarize all but one variable in a dataset?
<ul>
<li><em>Yes! I sometimes restrict a dataset to a couple of variables for which I want to see the summary. I usually use the <code>select()</code> function for this, which we will be covering later in the course. For now, you can take a look at some <a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part1.html#29">select() examples from the BERD R workshops</a> (see slides 29-32).</em></li>
</ul></li>
<li>Differences between a tibble and a data.frame
<ul>
<li><em>I’m not surprised to see this show up as a muddiest point! Depending on your level of experience with R, at this point in the class some of the differences are difficult to explain since we haven’t done much coding yet. The <a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html">tibble vignette</a> lists some of the differences though if you are interested. For our purposes, they are almost the same thing. When some differences come up later in the course, I will point them out.</em></li>
</ul></li>
</ul>
</section>
<section id="clearest-points-1" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-1">Clearest Points</h3>
<p><em>Thanks for the feedback!</em></p>
<ul>
<li>I enjoyed going through the code and viewing the functions. I haven’t really used <code>skimr</code> before and that was nice to see.
<ul>
<li><em>I like using <code>skmir</code>, but have recently been using <code>get_summary_stats()</code> from the <code>rstatix</code> package when teaching. It is only for numeric variables though. See a <a href="https://niederhausen.github.io/BSTA_511_F23/slides/Day03_bsta511.html#/get_summary_stats-from-rstatix-package"><code>get_summary_stats()</code> example from my BSTA 511 class</a>.</em></li>
</ul></li>
<li>Loading data.</li>
<li>How to load data into R was clearest.
<ul>
<li><em>Good to know that loading data was clear. This part can be tricky sometimes!</em></li>
</ul></li>
<li>ggplot
<ul>
<li><em>Hopefully this will still be clear when we cover more advanced options in <code>ggplot</code>!</em></li>
</ul></li>
</ul>
</section>
</section>
<section id="week-3" class="level2">
<h2 class="anchored" data-anchor-id="week-3">Week 3</h2>
<section id="muddiest-points-2" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-2">Muddiest points</h3>
<section id="here-package" class="level4">
<h4 class="anchored" data-anchor-id="here-package">here package</h4>
<p>The here package takes a bit to explaining, but, compared to the old way of doing things, it is a real life saver. The issue in the past had to do with relative file paths, especially with <code>.qmd</code> files that are saved in sub-folders. The <code>.qmd</code> file recognizes where it is saved as the root file path, which is okay with a one-off <code>.qmd</code> file. But when working in projects (recommended) and striving for reproducible R code (highly recommended), the <code>here</code> package save a lot of headache.</p>
<p>For further reading: + <a href="https://malco.io/articles/2018-11-05-why-should-i-use-the-here-package-when-i-m-already-using-projects">Why should I use the here package when I’m already using projects?</a> by Malcolm Barrett. + <a href="http://jenrichmond.rbind.io/post/how-to-use-the-here-package/">how to use the <code>here</code> package</a> by Jenny Richmond. + <a href="https://here.r-lib.org/articles/here.html">here package vignette</a> + <a href="https://cran.r-project.org/web/packages/here/vignettes/rmarkdown.html">Using here with rmarkdown</a></p>
<p>Project-oriented workflows are recommended. Here package solves some old headaches. It gets easier with practice.</p>
<section id="question-about-using-here" class="level5">
<h5 class="anchored" data-anchor-id="question-about-using-here">Question about using here</h5>
<blockquote class="blockquote">
<p>… how [here] can be used in certain instances where one may not remember if they switched to a new qmd file? In that case, would you suggest to use the “here” command each time you work on a project where there’s a chance that you’ll switch between qmd files and would like to use the same data file throughout? Is there any other way to better use this function or tips on how you deal with it?</p>
</blockquote>
<p>There is a difference between working interactively in RStudio where data are loaded to the Environment. In this case, loading a data set once means that it can be used in any other code while working in the environment.</p>
<p>Issues will com up when you go to render a <code>.qmd</code> that doesn’t have the data loaded within that <code>.qmd</code>. It won’t look to the environment for the data; it looks to the filepath that you specify in the <code>.qmd</code>. Best practice is to <em>write the code</em> to load the data in each <code>.qmd</code> or <code>.R</code> script so that R knows where to look for the data that you want it to operate on / analyze.</p>
</section>
</section>
<section id="the-function.-it-seems-like-sometimes-we-use-and-sometimes-we-use--.-are-they-interchangeable-or-each-with-different-types-of-functions" class="level4">
<h4 class="anchored" data-anchor-id="the-function.-it-seems-like-sometimes-we-use-and-sometimes-we-use--.-are-they-interchangeable-or-each-with-different-types-of-functions">The ! function. It seems like sometimes we use ! and sometimes we use -. Are they interchangeable, or each with different types of functions?</h4>
<ul>
<li><code>!</code> – the exclamation point can be read as “not” it is primarily used in logical statements</li>
<li><code>-</code> – the minus sign can be used in more instances
<ul>
<li>to do actual arithmetic (i.e.&nbsp;subtraction)</li>
<li>to indicate a negative number</li>
<li>with <code>dplyr::select()</code> to remove or not select a column, or exclusion</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subtraction</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">-</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Negation</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selection/exclusion</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(starwars, <span class="sc">-</span>height) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 87
Columns: 13
$ name       &lt;chr&gt; "Luke Skywalker", "C-3PO", "R2-D2", "Darth Vader", "Leia Or…
$ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.…
$ hair_color &lt;chr&gt; "blond", NA, NA, "none", "brown", "brown, grey", "brown", N…
$ skin_color &lt;chr&gt; "fair", "gold", "white, blue", "white", "light", "light", "…
$ eye_color  &lt;chr&gt; "blue", "yellow", "red", "yellow", "brown", "blue", "blue",…
$ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, …
$ sex        &lt;chr&gt; "male", "none", "none", "male", "female", "male", "female",…
$ gender     &lt;chr&gt; "masculine", "masculine", "masculine", "masculine", "femini…
$ homeworld  &lt;chr&gt; "Tatooine", "Tatooine", "Naboo", "Tatooine", "Alderaan", "T…
$ species    &lt;chr&gt; "Human", "Droid", "Droid", "Human", "Human", "Human", "Huma…
$ films      &lt;list&gt; &lt;"A New Hope", "The Empire Strikes Back", "Return of the J…
$ vehicles   &lt;list&gt; &lt;"Snowspeeder", "Imperial Speeder Bike"&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, "Imp…
$ starships  &lt;list&gt; &lt;"X-wing", "Imperial shuttle"&gt;, &lt;&gt;, &lt;&gt;, "TIE Advanced x1",…</code></pre>
</div>
</div>
</section>
<section id="using-the-fill-command" class="level4">
<h4 class="anchored" data-anchor-id="using-the-fill-command">Using the fill command</h4>
<p>We didn’t cover it in the lecture notes, but then it appeared in the example. I suggest to read/work through the <a href="https://tidyr.tidyverse.org/reference/fill.html">fill vignette</a>; the examples there are good ones to show what the function does. Then look back a the <code>smoke_messy</code> data set in Part 3 and think about why this command would be useful to clean up the data and for <em>fill</em>ing in missing values.</p>
</section>
<section id="loading-data-into-r" class="level4">
<h4 class="anchored" data-anchor-id="loading-data-into-r">Loading data into R</h4>
<p>It gets easier and hopefully you get to see more example in the notes and practice with the homework. <a href="http://www.sthda.com/english/wiki/importing-data-into-r">This tutorial</a> is pretty good. So is the <a href="https://readxl.tidyverse.org/">readxl vignette</a> and the <a href="https://readr.tidyverse.org/">readr vignette</a>.</p>
</section>
<section id="reasonable-width-height-and-dpi-values-when-using-ggsave" class="level4">
<h4 class="anchored" data-anchor-id="reasonable-width-height-and-dpi-values-when-using-ggsave">Reasonable width, height, and dpi values when using ggsave</h4>
<p>This takes some trial and error and depends on the purpose. For draft figures, dpi = 70 might be okay, but a journal might require dpi above 300 for publication. In Quarto, rendering an html, the figure defaults are 7x5 inches (<a href="https://quarto.org/docs/computations/execution-options.html">Link</a>). We talked about in class how you can use the plot panes to size your figures by trial and error.</p>
</section>
<section id="the-tidyselect-section" class="level4">
<h4 class="anchored" data-anchor-id="the-tidyselect-section">The <code>tidyselect</code> section</h4>
<p>There were pretty good resources in the notes</p>
<ul>
<li><p>See some more examples in <a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part1.html#32">this slide</a></p></li>
<li><p>For more info and learning about tidyselect, please run this code in your console:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install remotes package</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># use remotes to install this package from github</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"laderast/tidyowl"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># load tidyowl package</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyowl)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co"># interactive tutorial</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>tidyowl<span class="sc">::</span><span class="fu">learn_tidyselect</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html">Here is also a link</a> with a list of the selectors and links to each one. For example, there is a link to <a href="https://tidyselect.r-lib.org/reference/starts_with.html"><code>starts_with</code></a> and a bunch of examples.</p>
</section>
</section>
</section>
<section id="week-4" class="level2">
<h2 class="anchored" data-anchor-id="week-4">Week 4</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>               readxl, </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>               janitor,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>               here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"smoke_complete.xlsx"</span>), </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">sheet =</span> <span class="dv">1</span>, </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">na =</span> <span class="st">"NA"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                                     </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr::glimpse(smoke_complete)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="keyboard-shortcut-for-the-pipe-or" class="level3">
<h3 class="anchored" data-anchor-id="keyboard-shortcut-for-the-pipe-or">Keyboard shortcut for the pipe (<code>%&gt;%</code> or <code>|&gt;</code>)</h3>
<p>In office hours, someone didn’t know about this fact and wanted to make sure everyone knows about it.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important keyboard shortcut
</div>
</div>
<div class="callout-body-container callout-body">
<p>In RStudio the keyboard shortcut for the pipe operator <code>%&gt;%</code> (or native pipe <code>|&gt;</code>) is <code>Ctrl + Shift + M</code> (Windows) or <code>Cmd + Shift + M</code> (Mac).</p>
<p>Note: <code>Ctrl + Shift + M</code> also works on a Mac.</p>
</div>
</div>
</section>
<section id="the-difference-between-na-value-and-0" class="level3">
<h3 class="anchored" data-anchor-id="the-difference-between-na-value-and-0">The difference between NA value and 0</h3>
<section id="na-not-available" class="level4">
<h4 class="anchored" data-anchor-id="na-not-available">NA (Not Available)</h4>
<ul>
<li><code>NA</code> is a special value in R that represents missing or undefined data.</li>
<li><code>0</code> is a numeric value representing the number zero. It is a valid and well-defined numerical value in R.</li>
<li>It’s important to handle <code>NA</code> values appropriately in data analysis and to consider their impact on calculations, as operations involving <code>NA</code> may result in <code>NA</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">5</span>  <span class="co"># The result is NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">+</span> <span class="dv">5</span>  <span class="co"># The results is 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)  <span class="co"># The result is NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the argument na.rm = TRUE, means to ignore the NAs</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># The results is 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">4</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x) <span class="co"># The result is 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
</section>
</section>
<section id="across-and-its-usage" class="level3">
<h3 class="anchored" data-anchor-id="across-and-its-usage"><code>across()</code> and it’s usage</h3>
<p>The biggest advantage that across brings is the ability to perform the same data manipulation task to multiple columns.</p>
<p>Below the values in three columns are all set to the mean value using the <code>mean()</code>. I had to write out the function and the variable names three times.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">days_to_death =</span> <span class="fu">mean</span>(days_to_death, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">days_to_birth =</span> <span class="fu">mean</span>(days_to_birth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">days_to_last_follow_up =</span> <span class="fu">mean</span>(days_to_last_follow_up, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,152
Columns: 20
$ primary_diagnosis           &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ tumor_stage                 &lt;chr&gt; "stage ia", "stage ib", "stage ib", "stage…
$ age_at_diagnosis            &lt;dbl&gt; 24477, 26615, 28171, 27154, 23370, 19025, …
$ vital_status                &lt;chr&gt; "dead", "dead", "dead", "alive", "alive", …
$ morphology                  &lt;chr&gt; "8070/3", "8070/3", "8070/3", "8083/3", "8…
$ days_to_death               &lt;dbl&gt; 852.5637, 852.5637, 852.5637, 852.5637, 85…
$ state                       &lt;chr&gt; "live", "live", "live", "live", "live", "l…
$ tissue_or_organ_of_origin   &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_birth               &lt;dbl&gt; -24175.38, -24175.38, -24175.38, -24175.38…
$ site_of_resection_or_biopsy &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_last_follow_up      &lt;dbl&gt; 944.8547, 944.8547, 944.8547, 944.8547, 94…
$ cigarettes_per_day          &lt;dbl&gt; 10.9589041, 2.1917808, 1.6438356, 1.095890…
$ years_smoked                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 26, NA…
$ gender                      &lt;chr&gt; "male", "male", "female", "male", "female"…
$ year_of_birth               &lt;dbl&gt; 1936, 1931, 1927, 1930, 1942, 1953, 1932, …
$ race                        &lt;chr&gt; "white", "asian", "white", "white", "not r…
$ ethnicity                   &lt;chr&gt; "not hispanic or latino", "not hispanic or…
$ year_of_death               &lt;dbl&gt; 2004, 2003, NA, NA, NA, 2005, 2006, NA, NA…
$ bcr_patient_barcode         &lt;chr&gt; "TCGA-18-3406", "TCGA-18-3407", "TCGA-18-3…
$ disease                     &lt;chr&gt; "LUSC", "LUSC", "LUSC", "LUSC", "LUSC", "L…</code></pre>
</div>
</div>
<p>The same thing is accomplished using <code>across()</code> but we only have to call the <code>mean()</code> function once.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(days_to_death, </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                                 days_to_birth, </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                                 days_to_last_follow_up), </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,152
Columns: 20
$ primary_diagnosis           &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ tumor_stage                 &lt;chr&gt; "stage ia", "stage ib", "stage ib", "stage…
$ age_at_diagnosis            &lt;dbl&gt; 24477, 26615, 28171, 27154, 23370, 19025, …
$ vital_status                &lt;chr&gt; "dead", "dead", "dead", "alive", "alive", …
$ morphology                  &lt;chr&gt; "8070/3", "8070/3", "8070/3", "8083/3", "8…
$ days_to_death               &lt;dbl&gt; 852.5637, 852.5637, 852.5637, 852.5637, 85…
$ state                       &lt;chr&gt; "live", "live", "live", "live", "live", "l…
$ tissue_or_organ_of_origin   &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_birth               &lt;dbl&gt; -24175.38, -24175.38, -24175.38, -24175.38…
$ site_of_resection_or_biopsy &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_last_follow_up      &lt;dbl&gt; 944.8547, 944.8547, 944.8547, 944.8547, 94…
$ cigarettes_per_day          &lt;dbl&gt; 10.9589041, 2.1917808, 1.6438356, 1.095890…
$ years_smoked                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 26, NA…
$ gender                      &lt;chr&gt; "male", "male", "female", "male", "female"…
$ year_of_birth               &lt;dbl&gt; 1936, 1931, 1927, 1930, 1942, 1953, 1932, …
$ race                        &lt;chr&gt; "white", "asian", "white", "white", "not r…
$ ethnicity                   &lt;chr&gt; "not hispanic or latino", "not hispanic or…
$ year_of_death               &lt;dbl&gt; 2004, 2003, NA, NA, NA, 2005, 2006, NA, NA…
$ bcr_patient_barcode         &lt;chr&gt; "TCGA-18-3406", "TCGA-18-3407", "TCGA-18-3…
$ disease                     &lt;chr&gt; "LUSC", "LUSC", "LUSC", "LUSC", "LUSC", "L…</code></pre>
</div>
</div>
<section id="links-to-check-out" class="level4">
<h4 class="anchored" data-anchor-id="links-to-check-out">Links to check out</h4>
<ul>
<li><a href="https://dplyr.tidyverse.org/reference/across.html"><code>across()</code> vignette</a></li>
<li><a href="https://willhipson.netlify.app/post/dplyr_across/dplyr_across/">Why I love dplyr’s across</a></li>
</ul>
</section>
</section>
<section id="and-.x" class="level3">
<h3 class="anchored" data-anchor-id="and-.x"><code>~</code> and <code>.x</code></h3>
<p>We’ve seen the <code>~</code> and <code>.x</code> used with <code>dplyr::across()</code>. We will see them again later when we get to the package <code>purrr</code>.</p>
<p>In the tidyverse, <code>~</code> and <code>.x</code> are used to create what they call <em>lambda</em> functions which are part of the <code>purrr</code> syntax. We have not talked about functions yet, but <code>purrr</code> package and the <code>dplyr::across()</code> function allow you to specify functions to apply in a few different ways:</p>
<ol type="1">
<li><strong>A named function, e.g.&nbsp;<code>mean</code>.</strong></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(days_to_death, </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                                 days_to_birth, </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                                 days_to_last_follow_up), </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.fns =</span> mean)) <span class="sc">|&gt;</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,152
Columns: 20
$ primary_diagnosis           &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ tumor_stage                 &lt;chr&gt; "stage ia", "stage ib", "stage ib", "stage…
$ age_at_diagnosis            &lt;dbl&gt; 24477, 26615, 28171, 27154, 23370, 19025, …
$ vital_status                &lt;chr&gt; "dead", "dead", "dead", "alive", "alive", …
$ morphology                  &lt;chr&gt; "8070/3", "8070/3", "8070/3", "8083/3", "8…
$ days_to_death               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ state                       &lt;chr&gt; "live", "live", "live", "live", "live", "l…
$ tissue_or_organ_of_origin   &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_birth               &lt;dbl&gt; -24175.38, -24175.38, -24175.38, -24175.38…
$ site_of_resection_or_biopsy &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_last_follow_up      &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ cigarettes_per_day          &lt;dbl&gt; 10.9589041, 2.1917808, 1.6438356, 1.095890…
$ years_smoked                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 26, NA…
$ gender                      &lt;chr&gt; "male", "male", "female", "male", "female"…
$ year_of_birth               &lt;dbl&gt; 1936, 1931, 1927, 1930, 1942, 1953, 1932, …
$ race                        &lt;chr&gt; "white", "asian", "white", "white", "not r…
$ ethnicity                   &lt;chr&gt; "not hispanic or latino", "not hispanic or…
$ year_of_death               &lt;dbl&gt; 2004, 2003, NA, NA, NA, 2005, 2006, NA, NA…
$ bcr_patient_barcode         &lt;chr&gt; "TCGA-18-3406", "TCGA-18-3407", "TCGA-18-3…
$ disease                     &lt;chr&gt; "LUSC", "LUSC", "LUSC", "LUSC", "LUSC", "L…</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Above, just using the function name, we are not able to provide the additional argument <code>na.rm = TRUE</code> to the <code>mean()</code> function, so the columns are now all <code>NA</code> values because there were missing (<code>NA</code>) values in those columns.</p>
</div>
</div>
<ol start="2" type="1">
<li><strong>An anonymous function, e.g.&nbsp;<code>\(x) x + 1</code> or <code>function(x) x + 1</code>.</strong></li>
</ol>
<p>This has not been covered yet. R lets you specify your own functions and there are two basic ways to do it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(days_to_death, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                                 days_to_birth, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                                 days_to_last_follow_up), </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.fns =</span> \(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,152
Columns: 20
$ primary_diagnosis           &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ tumor_stage                 &lt;chr&gt; "stage ia", "stage ib", "stage ib", "stage…
$ age_at_diagnosis            &lt;dbl&gt; 24477, 26615, 28171, 27154, 23370, 19025, …
$ vital_status                &lt;chr&gt; "dead", "dead", "dead", "alive", "alive", …
$ morphology                  &lt;chr&gt; "8070/3", "8070/3", "8070/3", "8083/3", "8…
$ days_to_death               &lt;dbl&gt; 852.5637, 852.5637, 852.5637, 852.5637, 85…
$ state                       &lt;chr&gt; "live", "live", "live", "live", "live", "l…
$ tissue_or_organ_of_origin   &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_birth               &lt;dbl&gt; -24175.38, -24175.38, -24175.38, -24175.38…
$ site_of_resection_or_biopsy &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_last_follow_up      &lt;dbl&gt; 944.8547, 944.8547, 944.8547, 944.8547, 94…
$ cigarettes_per_day          &lt;dbl&gt; 10.9589041, 2.1917808, 1.6438356, 1.095890…
$ years_smoked                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 26, NA…
$ gender                      &lt;chr&gt; "male", "male", "female", "male", "female"…
$ year_of_birth               &lt;dbl&gt; 1936, 1931, 1927, 1930, 1942, 1953, 1932, …
$ race                        &lt;chr&gt; "white", "asian", "white", "white", "not r…
$ ethnicity                   &lt;chr&gt; "not hispanic or latino", "not hispanic or…
$ year_of_death               &lt;dbl&gt; 2004, 2003, NA, NA, NA, 2005, 2006, NA, NA…
$ bcr_patient_barcode         &lt;chr&gt; "TCGA-18-3406", "TCGA-18-3407", "TCGA-18-3…
$ disease                     &lt;chr&gt; "LUSC", "LUSC", "LUSC", "LUSC", "LUSC", "L…</code></pre>
</div>
</div>
<p>or</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(days_to_death, </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                                 days_to_birth, </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>                                 days_to_last_follow_up), </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.fns =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,152
Columns: 20
$ primary_diagnosis           &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ tumor_stage                 &lt;chr&gt; "stage ia", "stage ib", "stage ib", "stage…
$ age_at_diagnosis            &lt;dbl&gt; 24477, 26615, 28171, 27154, 23370, 19025, …
$ vital_status                &lt;chr&gt; "dead", "dead", "dead", "alive", "alive", …
$ morphology                  &lt;chr&gt; "8070/3", "8070/3", "8070/3", "8083/3", "8…
$ days_to_death               &lt;dbl&gt; 852.5637, 852.5637, 852.5637, 852.5637, 85…
$ state                       &lt;chr&gt; "live", "live", "live", "live", "live", "l…
$ tissue_or_organ_of_origin   &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_birth               &lt;dbl&gt; -24175.38, -24175.38, -24175.38, -24175.38…
$ site_of_resection_or_biopsy &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_last_follow_up      &lt;dbl&gt; 944.8547, 944.8547, 944.8547, 944.8547, 94…
$ cigarettes_per_day          &lt;dbl&gt; 10.9589041, 2.1917808, 1.6438356, 1.095890…
$ years_smoked                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 26, NA…
$ gender                      &lt;chr&gt; "male", "male", "female", "male", "female"…
$ year_of_birth               &lt;dbl&gt; 1936, 1931, 1927, 1930, 1942, 1953, 1932, …
$ race                        &lt;chr&gt; "white", "asian", "white", "white", "not r…
$ ethnicity                   &lt;chr&gt; "not hispanic or latino", "not hispanic or…
$ year_of_death               &lt;dbl&gt; 2004, 2003, NA, NA, NA, 2005, 2006, NA, NA…
$ bcr_patient_barcode         &lt;chr&gt; "TCGA-18-3406", "TCGA-18-3407", "TCGA-18-3…
$ disease                     &lt;chr&gt; "LUSC", "LUSC", "LUSC", "LUSC", "LUSC", "L…</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Now we are able to use the additional argument <code>na.rm = TRUE</code> and the columns are now the means of the valid values in those columns.</p>
</div>
</div>
<ol start="3" type="1">
<li><strong>A purrr-style lambda function, e.g.&nbsp;<code>~ mean(.x, na.rm = TRUE)</code></strong></li>
</ol>
<p>We use <code>~</code> to indicate that we are supplying a lambda function and we use <code>.x</code> as a placeholder for the argument within our lambda function to indicate where to use the variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(days_to_death, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                                 days_to_birth, </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>                                 days_to_last_follow_up), </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,152
Columns: 20
$ primary_diagnosis           &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ tumor_stage                 &lt;chr&gt; "stage ia", "stage ib", "stage ib", "stage…
$ age_at_diagnosis            &lt;dbl&gt; 24477, 26615, 28171, 27154, 23370, 19025, …
$ vital_status                &lt;chr&gt; "dead", "dead", "dead", "alive", "alive", …
$ morphology                  &lt;chr&gt; "8070/3", "8070/3", "8070/3", "8083/3", "8…
$ days_to_death               &lt;dbl&gt; 852.5637, 852.5637, 852.5637, 852.5637, 85…
$ state                       &lt;chr&gt; "live", "live", "live", "live", "live", "l…
$ tissue_or_organ_of_origin   &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_birth               &lt;dbl&gt; -24175.38, -24175.38, -24175.38, -24175.38…
$ site_of_resection_or_biopsy &lt;chr&gt; "C34.1", "C34.1", "C34.3", "C34.1", "C34.1…
$ days_to_last_follow_up      &lt;dbl&gt; 944.8547, 944.8547, 944.8547, 944.8547, 94…
$ cigarettes_per_day          &lt;dbl&gt; 10.9589041, 2.1917808, 1.6438356, 1.095890…
$ years_smoked                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 26, NA…
$ gender                      &lt;chr&gt; "male", "male", "female", "male", "female"…
$ year_of_birth               &lt;dbl&gt; 1936, 1931, 1927, 1930, 1942, 1953, 1932, …
$ race                        &lt;chr&gt; "white", "asian", "white", "white", "not r…
$ ethnicity                   &lt;chr&gt; "not hispanic or latino", "not hispanic or…
$ year_of_death               &lt;dbl&gt; 2004, 2003, NA, NA, NA, 2005, 2006, NA, NA…
$ bcr_patient_barcode         &lt;chr&gt; "TCGA-18-3406", "TCGA-18-3407", "TCGA-18-3…
$ disease                     &lt;chr&gt; "LUSC", "LUSC", "LUSC", "LUSC", "LUSC", "L…</code></pre>
</div>
</div>
<section id="links-to-check-out-1" class="level4">
<h4 class="anchored" data-anchor-id="links-to-check-out-1">Links to check out</h4>
<p>Some of these are <code>purrr</code> focused which we have not covered yet. Others use <code>dplyr::across()</code> withing the <code>dplyr::summarize()</code> function which we will be covering soon</p>
<ul>
<li><a href="https://stackoverflow.com/questions/68249625/meaning-of-tilde-and-dot-notation-in-dplyr">Meaning of tilde and dot notation in dplyr</a></li>
<li><a href="https://stackoverflow.com/questions/70665707/what-is-the-meaning-of-and-inside-the-function-map">What is the meaning of ‘~’ and ‘.’ inside the function map?</a></li>
<li><a href="https://dplyr.tidyverse.org/reference/across.html"><code>across()</code> vignette</a></li>
<li><a href="https://willhipson.netlify.app/post/dplyr_across/dplyr_across/">Why I love dplyr’s across</a></li>
</ul>
</section>
</section>
<section id="exceptions-where-we-have-seen-the-used" class="level3">
<h3 class="anchored" data-anchor-id="exceptions-where-we-have-seen-the-used">Exceptions where we have seen the <code>~</code> used</h3>
<p>In class, we have seen three instances where the <code>~</code> is used that is not for a lambda function.</p>
<section id="case_when" class="level4">
<h4 class="anchored" data-anchor-id="case_when"><code>case_when</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cigarettes_category =</span> <span class="fu">case_when</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>      cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"0-5"</span>, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>      cigarettes_per_day <span class="sc">&gt;=</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"6+"</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">|&gt;</span> </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cigarettes_category =</span> <span class="fu">factor</span>(cigarettes_category)) <span class="sc">|&gt;</span> </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">tabyl</span>(cigarettes_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> cigarettes_category    n    percent
                 0-5 1100 0.95486111
                  6+   52 0.04513889</code></pre>
</div>
</div>
</section>
<section id="facet_wrap" class="level4">
<h4 class="anchored" data-anchor-id="facet_wrap"><code>facet_wrap</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoke_complete, </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_at_diagnosis, </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> cigarettes_per_day)) <span class="sc">+</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> disease)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Per the <a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html"><code>facet_wrap</code> vignettte</a>:</p>
<blockquote class="blockquote">
<p>For compatibility with the classic interface, can also be a formula or character vector. Use either a one sided formula, <code>~a + b</code>, or a character vector, <code>c("a", "b")</code>.</p>
</blockquote>
<p>Here it is being used to specify a formula.</p>
<p>Though per the vignette, the <code>vars()</code> function is preferred syntax:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoke_complete, </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_at_diagnosis, </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> cigarettes_per_day)) <span class="sc">+</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(ggplot2<span class="sc">::</span><span class="fu">vars</span>(disease))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="facet_grid" class="level4">
<h4 class="anchored" data-anchor-id="facet_grid"><code>facet_grid</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoke_complete, </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_at_diagnosis, </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> cigarettes_per_day)) <span class="sc">+</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(disease <span class="sc">~</span> vital_status)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Per the <a href="https://ggplot2.tidyverse.org/reference/facet_grid.html"><code>facet_grid</code> vignettte</a>:</p>
<blockquote class="blockquote">
<p>For compatibility with the classic interface, rows can also be a formula with the rows (of the tabular display) on the LHS and the columns (of the tabular display) on the RHS; the dot in the formula is used to indicate there should be no faceting on this dimension (either row or column).</p>
</blockquote>
<p>Again, it is being used to specify a formula.</p>
<p>Though per the vignette, the <code>ggplot2::vars()</code> function with the arguments <code>rows</code> and <code>cols</code> seems to be preferred:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoke_complete, </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_at_diagnosis, </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> cigarettes_per_day)) <span class="sc">+</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> ggplot2<span class="sc">::</span><span class="fu">vars</span>(disease), </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">cols =</span> ggplot2<span class="sc">::</span><span class="fu">vars</span>(vital_status))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Note: <code>dplyr::vars()</code> and <code>dplyr::ggplot2()</code> are the same function in different packages and can be used interchangeably.</p>
</section>
</section>
<section id="case_when-vs.-if_else" class="level3">
<h3 class="anchored" data-anchor-id="case_when-vs.-if_else"><code>case_when</code> vs.&nbsp;<code>if_else</code></h3>
<p>In dplyr, both <code>if_else()</code> and <code>case_when()</code> are used for conditional transformations, but they have different use cases and behaviors.</p>
<ol type="1">
<li><code>if_else</code> function</li>
</ol>
<ul>
<li><code>if_else()</code> is designed for simple vectorized conditions and is particularly useful when you have a <em>binary</em> condition (i.e., two possible outcomes).</li>
<li>It evaluates a condition for each element of a vector and returns one of two values based on whether the condition is <code>TRUE</code> or <code>FALSE</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cigarettes_category =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>(cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">6</span>, <span class="st">"0-5"</span>, <span class="st">"6+"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cigarettes_category =</span> <span class="fu">factor</span>(cigarettes_category)) <span class="sc">|&gt;</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">tabyl</span>(cigarettes_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> cigarettes_category    n    percent
                 0-5 1100 0.95486111
                  6+   52 0.04513889</code></pre>
</div>
</div>
<p>In this example, the column <code>cigarettes_category</code> is assigned the value “0-5” if <code>cigarettes_per_day</code> is less than 6 and “6+” otherwise.</p>
<ol start="2" type="1">
<li><code>case_when()</code> function</li>
</ol>
<ul>
<li><code>case_when()</code> is more versatile and is suitable for handling multiple conditions with multiple possible outcomes. It is essentially a vectorized form of a <code>switch</code> or <code>if_else</code> chain.</li>
<li>It allows you to specify multiple conditions and their corresponding values.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>smoke_complete <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cigarettes_category =</span> <span class="fu">case_when</span>(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>      cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"0 to 2"</span>, </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>      cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"2 to 4"</span>, </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>      cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"4 to 6"</span>, </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      cigarettes_per_day <span class="sc">&gt;=</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"6+"</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">|&gt;</span> </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cigarettes_category =</span> <span class="fu">factor</span>(cigarettes_category)) <span class="sc">|&gt;</span> </span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">tabyl</span>(cigarettes_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> cigarettes_category   n    percent
              0 to 2 455 0.39496528
              2 to 4 493 0.42795139
              4 to 6 152 0.13194444
                  6+  52 0.04513889</code></pre>
</div>
</div>
<p>In this example, the column <code>cigarettes_category</code> is assigned the value “0 to 2” if <code>cigarettes_per_day</code> is less than 2, “2 to 4” if less than 4 (but greater than 2), “4 to 6” if less than 6 (but greater than 4), and “6+” otherwise.</p>
<p>Use <code>if_else()</code> when you have a simple binary condition, and use <code>case_when()</code> when you need to handle multiple conditions with different outcomes. <code>case_when()</code> is more flexible and expressive when dealing with complex conditional transformations.</p>
</section>
<section id="the-difference-between-a-theme-and-and-a-palette." class="level3">
<h3 class="anchored" data-anchor-id="the-difference-between-a-theme-and-and-a-palette.">The difference between a theme and and a palette.</h3>
<p>In <code>ggplot2</code>, a theme and a palette serve different purposes and are used in different contexts. In summary, a theme controls the overall appearance of the plot, while a palette is specifically related to the colors used to represent different groups or levels within the data. Both themes and palettes contribute to visual appeal and readability of your plot.</p>
<ol type="1">
<li><strong>Theme:</strong></li>
</ol>
<ul>
<li>A theme in <code>ggplot2</code> refers to the overall visual appearance of the plot. It includes elements such as fonts, colors, grid lines, background, and other visual attributes that define the look and feel of the entire plot.</li>
<li>Themes are set using functions like <code>theme_minimal()</code>, <code>theme_classic()</code>, or custom themes created with the <code>theme()</code> function. Themes control the global appearance of the plot.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example using theme_minimal()</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoke_complete, </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_at_diagnosis, </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> cigarettes_per_day)) <span class="sc">+</span> </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><strong>Palette:</strong></li>
</ol>
<ul>
<li>A palette, on the other hand, refers to a set of colors used to represent different levels or categories in the data. It is particularly relevant when working with categorical or discrete data where you want to distinguish between different groups.</li>
<li>Palettes are set using functions like <code>scale_fill_manual()</code> or <code>scale_color_manual()</code>. You can specify a vector of colors or use pre-defined palettes from packages like RColorBrewer or viridis (we looked at the viridis package in class).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example using a color palette</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoke_complete, </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_at_diagnosis, </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> disease)) <span class="sc">+</span> </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"red"</span>, </span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"blue"</span>, </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="be-careful-what-you-pipe-to-and-from" class="level3">
<h3 class="anchored" data-anchor-id="be-careful-what-you-pipe-to-and-from">Be careful what you pipe to and from</h3>
<p>An error came up where a data frame was being piped to a function that did not accept a data frame as an argument (it accepted a vector)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># starwars data frame was loaded earlier with the ggplot2 package</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span>  </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">n_distinct</span>(species) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'species' not found</code></pre>
</div>
</div>
<ul>
<li><code>starwars</code> is a data frame.</li>
<li><code>dplyr::n_distinct()</code> only accepts a vector as an argument (check the help <code>?dplyr::n_distinct</code>)</li>
</ul>
<p>So we need to pipe a vector to the <code>dplyr::n_distinct()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">n_distinct</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 38</code></pre>
</div>
</div>
<p><code>dplyr::select()</code> accepts a data frame as its first argument and it return a vector (see the help <code>?dplyr::select</code>) which we can then pipe to <code>dplyr::n_distinct()</code>.</p>
<p>The <code>%&gt;%</code> or <code>|&gt;</code> takes the output of the expression on its left and passes it as the first argument to the function on its right. The class / type of output on the left needs to agree or be acceptable as the first argument to the function on the right.</p>
</section>
<section id="other-muddy-points" class="level3">
<h3 class="anchored" data-anchor-id="other-muddy-points">Other muddy points</h3>
<ul>
<li>Remembering applicable functions. Troubleshooting.</li>
</ul>
<blockquote class="blockquote">
<p>This gets better with experience. You are all still very new to R so be patient with yourself.</p>
</blockquote>
<ul>
<li>How to organize all of the material to understand the structure of how the R language works, rather than to keep track of all of the commands in an anecdotal way.</li>
</ul>
<blockquote class="blockquote">
<p>Again, I think that this gets better with experience. Though the R language, being open source, a lot of syntax is package dependent. So you need to be careful that some of the syntax we use with <code>dplyr</code> and the <code>tidyverse</code> will be different in base R or in other packages. This is something that comes with open source software (compared to Stata or SAS). The good news is that learning to use packages sets you up to better learn newer (to you) packages down the road.</p>
</blockquote>
</section>
</section>
<section id="week-5" class="level2">
<h2 class="anchored" data-anchor-id="week-5">Week 5</h2>
<section id="case_when-vs-ifelse" class="level3">
<h3 class="anchored" data-anchor-id="case_when-vs-ifelse"><code>case_when()</code> vs <code>ifelse()</code></h3>
<p><em>The difference between case_when and ifelse</em></p>
<ul>
<li><code>ifelse()</code> is the base R version of tidyverse’s <code>case_when()</code></li>
<li>I prefer using <code>case_when()</code> since it’s easier to follow the logic.</li>
<li><code>case_when()</code> is especially useful when there are more than two logical conditions being used.</li>
</ul>
<p>The example below creates a binary variable for bill length (long vs not long) using both <code>case_when()</code> and <code>ifelse()</code> as a comparison.</p>
<ul>
<li>Compare the crosstabs of the two variables!</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      species          island    bill_length_mm  bill_depth_mm  
 Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  
 Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
 Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  
                                 Mean   :43.92   Mean   :17.15  
                                 3rd Qu.:48.50   3rd Qu.:18.70  
                                 Max.   :59.60   Max.   :21.50  
                                 NA's   :2       NA's   :2      
 flipper_length_mm  body_mass_g       sex           year     
 Min.   :172.0     Min.   :2700   female:165   Min.   :2007  
 1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  
 Median :197.0     Median :4050   NA's  : 11   Median :2008  
 Mean   :200.9     Mean   :4202                Mean   :2008  
 3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  
 Max.   :231.0     Max.   :6300                Max.   :2009  
 NA's   :2         NA's   :2                                 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">long_bill1 =</span> <span class="fu">case_when</span>(</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>      bill_length_mm <span class="sc">&gt;=</span> <span class="dv">45</span> <span class="sc">~</span> <span class="st">"long"</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>      bill_length_mm <span class="sc">&lt;</span> <span class="dv">45</span> <span class="sc">~</span> <span class="st">"not long"</span>,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">long_bill2 =</span> <span class="fu">ifelse</span>(bill_length_mm <span class="sc">&gt;=</span> <span class="dv">45</span>, <span class="st">"long"</span>, <span class="st">"not long"</span>)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(long_bill1, long_bill2) <span class="sc">%&gt;%</span> </span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            long_bill2             
 long_bill1       long not long NA_
       long        166        0   0
   not long          0      176   0
       &lt;NA&gt;          0        0   2</code></pre>
</div>
</div>
<p>Below is an example using <code>case_when()</code> to create a categorical variable with 3 groups:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">long_bill3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>      bill_length_mm <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"long"</span>,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>      bill_length_mm <span class="sc">&lt;=</span> <span class="dv">40</span> <span class="sc">~</span> <span class="st">"short"</span>,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"medium"</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(long_bill3, long_bill1) <span class="sc">%&gt;%</span> </span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            long_bill1             
 long_bill3       long not long NA_
       long         57        0   0
     medium        109       76   2
      short          0      100   0</code></pre>
</div>
</div>
<ul>
<li>Creating a categorical variable with 3 groups can be done with <code>ifelse()</code>, but it’s harder to follow the logic:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">long_bill4 =</span> <span class="fu">ifelse</span>(</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>      bill_length_mm <span class="sc">&gt;=</span> <span class="dv">50</span>, <span class="st">"long"</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(bill_length_mm <span class="sc">&lt;=</span> <span class="dv">40</span>, <span class="st">"short"</span>, <span class="st">"medium"</span>)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(long_bill3, long_bill4) <span class="sc">%&gt;%</span> </span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            long_bill4                 
 long_bill3       long medium short NA_
       long         57      0     0   0
     medium          0    185     0   2
      short          0      0   100   0</code></pre>
</div>
</div>
</section>
<section id="separate" class="level3">
<h3 class="anchored" data-anchor-id="separate"><code>separate()</code></h3>
<p><em>Different ways of using the function separate, it was a bit unclear that when to use one or the other or examples of my research data where it’ll be most relevant to use.</em></p>
<ul>
<li>Choosing the “best” way of using <code>separate()</code> is overwhelming at first.</li>
<li>I recommend starting with the simplest use case with a string being specified in <code>sep = " "</code>:</li>
</ul>
<blockquote class="blockquote">
<p><code>separate(data, col, into, sep = " ")</code></p>
</blockquote>
<ul>
<li>Which of the various versions we showed to use depends on how the data being separated are structured.</li>
<li>Most of the time I have a simple character, such as a space (<code>sep = " "</code>) or a comma (<code>sep = ","</code>) that I want to separate by.</li>
<li>If the data are structured in a more complex way, then one of the <code>stringr</code> package options might come in handy.</li>
</ul>
</section>
<section id="herehere" class="level3">
<h3 class="anchored" data-anchor-id="herehere"><code>here::here()</code></h3>
<p><em>TSV files, very neat… But also, I got a bit confused when you did the render process around 22:00-23:00 minutes. Also, “here: and also”here” Directories/root directories. I was a bit confused about in what situations we would tangibly utilize this/if it is beneficial.</em></p>
<ul>
<li>Great question! This is definitely not intuitive, which is why I wanted to demonstrate it in class.</li>
<li>The key is that
<ul>
<li>when rendering a qmd file the current working directory is the folder the file is sitting in,</li>
<li>while when running code in a file within RStudio the working directory is the folder where the <code>.Rproj</code> file is located.<br>
</li>
</ul></li>
<li>This distinction is important when loading other files from our computer during our workflow, and why <code>here::here()</code> makes our workflow so much easier!</li>
</ul>
</section>
<section id="what-functions-will-only-work-within-another-function-generally" class="level3">
<h3 class="anchored" data-anchor-id="what-functions-will-only-work-within-another-function-generally">what functions will only work within another function (generally)</h3>
<ul>
<li>I’m not aware of functions that only work standalone within other functions. For example, the <code>mean()</code> function works on its own, but can also be used within a <code>summarise()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(penguins<span class="sc">$</span>bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 43.92193</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">m =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      m
  &lt;dbl&gt;
1  43.9</code></pre>
</div>
</div>
<ul>
<li>That being said, a function has a set of parameters to be specified that are specific to that function.</li>
</ul>
</section>
</section>
<section id="week-6-part-5-contd." class="level2">
<h2 class="anchored" data-anchor-id="week-6-part-5-contd.">Week 6 (Part 5 contd.)</h2>
<section id="across" class="level3">
<h3 class="anchored" data-anchor-id="across"><code>across()</code></h3>
<p><em>what exactly the across function does</em></p>
<p><em>.fns, i.e.&nbsp;.fns=list, etc… I wasn’t really sure what that was achieving within across.</em></p>
<ul>
<li>The <code>across()</code> function lets us apply a function to many columns at once.</li>
<li>For example, let’s say we want the mean value for every continuous variable in a dataset.
<ul>
<li>The code below calculates the mean for one variable in the penguins dataset using both base R and <code>summarize()</code>.</li>
<li>One option to calculate the mean value for every continuous variable in the dataset is to repeat this code for the 4 other continuous variables.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      species          island    bill_length_mm  bill_depth_mm  
 Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  
 Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
 Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  
                                 Mean   :43.92   Mean   :17.15  
                                 3rd Qu.:48.50   3rd Qu.:18.70  
                                 Max.   :59.60   Max.   :21.50  
                                 NA's   :2       NA's   :2      
 flipper_length_mm  body_mass_g       sex           year     
 Min.   :172.0     Min.   :2700   female:165   Min.   :2007  
 1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  
 Median :197.0     Median :4050   NA's  : 11   Median :2008  
 Mean   :200.9     Mean   :4202                Mean   :2008  
 3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  
 Max.   :231.0     Max.   :6300                Max.   :2009  
 NA's   :2         NA's   :2                                 
  long_bill1         long_bill2         long_bill3         long_bill4       
 Length:344         Length:344         Length:344         Length:344        
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># base R</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(penguins<span class="sc">$</span>bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 43.92193</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># with summarize</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `mean(bill_length_mm, na.rm = TRUE)`
                                 &lt;dbl&gt;
1                                 43.9</code></pre>
</div>
</div>
<ul>
<li>In this case <code>across()</code> lets us apply the mean function to all the columns of interest at once:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>                   )) <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="qjiqhpgrwg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qjiqhpgrwg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qjiqhpgrwg thead, #qjiqhpgrwg tbody, #qjiqhpgrwg tfoot, #qjiqhpgrwg tr, #qjiqhpgrwg td, #qjiqhpgrwg th {
  border-style: none;
}

#qjiqhpgrwg p {
  margin: 0;
  padding: 0;
}

#qjiqhpgrwg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qjiqhpgrwg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qjiqhpgrwg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qjiqhpgrwg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qjiqhpgrwg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qjiqhpgrwg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qjiqhpgrwg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qjiqhpgrwg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qjiqhpgrwg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qjiqhpgrwg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qjiqhpgrwg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qjiqhpgrwg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qjiqhpgrwg .gt_spanner_row {
  border-bottom-style: hidden;
}

#qjiqhpgrwg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qjiqhpgrwg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qjiqhpgrwg .gt_from_md > :first-child {
  margin-top: 0;
}

#qjiqhpgrwg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qjiqhpgrwg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qjiqhpgrwg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qjiqhpgrwg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qjiqhpgrwg .gt_row_group_first td {
  border-top-width: 2px;
}

#qjiqhpgrwg .gt_row_group_first th {
  border-top-width: 2px;
}

#qjiqhpgrwg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qjiqhpgrwg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qjiqhpgrwg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qjiqhpgrwg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qjiqhpgrwg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qjiqhpgrwg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qjiqhpgrwg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qjiqhpgrwg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qjiqhpgrwg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qjiqhpgrwg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qjiqhpgrwg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qjiqhpgrwg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qjiqhpgrwg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qjiqhpgrwg .gt_left {
  text-align: left;
}

#qjiqhpgrwg .gt_center {
  text-align: center;
}

#qjiqhpgrwg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qjiqhpgrwg .gt_font_normal {
  font-weight: normal;
}

#qjiqhpgrwg .gt_font_bold {
  font-weight: bold;
}

#qjiqhpgrwg .gt_font_italic {
  font-style: italic;
}

#qjiqhpgrwg .gt_super {
  font-size: 65%;
}

#qjiqhpgrwg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qjiqhpgrwg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qjiqhpgrwg .gt_indent_1 {
  text-indent: 5px;
}

#qjiqhpgrwg .gt_indent_2 {
  text-indent: 10px;
}

#qjiqhpgrwg .gt_indent_3 {
  text-indent: 15px;
}

#qjiqhpgrwg .gt_indent_4 {
  text-indent: 20px;
}

#qjiqhpgrwg .gt_indent_5 {
  text-indent: 25px;
}

#qjiqhpgrwg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qjiqhpgrwg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="bill_length_mm" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">bill_length_mm</th>
<th id="bill_depth_mm" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">bill_depth_mm</th>
<th id="flipper_length_mm" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">flipper_length_mm</th>
<th id="body_mass_g" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">body_mass_g</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="bill_length_mm">43.92193</td>
<td class="gt_row gt_right" headers="bill_depth_mm">17.15117</td>
<td class="gt_row gt_right" headers="flipper_length_mm">200.9152</td>
<td class="gt_row gt_right" headers="body_mass_g">4201.754</td>
<td class="gt_row gt_right" headers="year">2008.029</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li>The <code>.fns=list</code> part of the <code>across</code> code is where we specify the function(s) that we want to apply to the specified columns.
<ul>
<li>Above we only specified one function (<code>mean()</code>), but we can specify additional functions as well, which is when we need to create a <code>list</code> to list all the functions we want to apply.</li>
<li>Below I apply the mean and standard deviation functions:</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="fu">list</span>(</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mean =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sd =</span> <span class="sc">~</span> <span class="fu">sd</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>                     ))) <span class="sc">%&gt;%</span> </span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="rpwoncwmek" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rpwoncwmek table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rpwoncwmek thead, #rpwoncwmek tbody, #rpwoncwmek tfoot, #rpwoncwmek tr, #rpwoncwmek td, #rpwoncwmek th {
  border-style: none;
}

#rpwoncwmek p {
  margin: 0;
  padding: 0;
}

#rpwoncwmek .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rpwoncwmek .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rpwoncwmek .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rpwoncwmek .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rpwoncwmek .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rpwoncwmek .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rpwoncwmek .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rpwoncwmek .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rpwoncwmek .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rpwoncwmek .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rpwoncwmek .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rpwoncwmek .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rpwoncwmek .gt_spanner_row {
  border-bottom-style: hidden;
}

#rpwoncwmek .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rpwoncwmek .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rpwoncwmek .gt_from_md > :first-child {
  margin-top: 0;
}

#rpwoncwmek .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rpwoncwmek .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rpwoncwmek .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rpwoncwmek .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rpwoncwmek .gt_row_group_first td {
  border-top-width: 2px;
}

#rpwoncwmek .gt_row_group_first th {
  border-top-width: 2px;
}

#rpwoncwmek .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpwoncwmek .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rpwoncwmek .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rpwoncwmek .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rpwoncwmek .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpwoncwmek .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rpwoncwmek .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rpwoncwmek .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rpwoncwmek .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rpwoncwmek .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rpwoncwmek .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpwoncwmek .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rpwoncwmek .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpwoncwmek .gt_left {
  text-align: left;
}

#rpwoncwmek .gt_center {
  text-align: center;
}

#rpwoncwmek .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rpwoncwmek .gt_font_normal {
  font-weight: normal;
}

#rpwoncwmek .gt_font_bold {
  font-weight: bold;
}

#rpwoncwmek .gt_font_italic {
  font-style: italic;
}

#rpwoncwmek .gt_super {
  font-size: 65%;
}

#rpwoncwmek .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rpwoncwmek .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rpwoncwmek .gt_indent_1 {
  text-indent: 5px;
}

#rpwoncwmek .gt_indent_2 {
  text-indent: 10px;
}

#rpwoncwmek .gt_indent_3 {
  text-indent: 15px;
}

#rpwoncwmek .gt_indent_4 {
  text-indent: 20px;
}

#rpwoncwmek .gt_indent_5 {
  text-indent: 25px;
}

#rpwoncwmek .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rpwoncwmek div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="bill_length_mm_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">bill_length_mm_mean</th>
<th id="bill_length_mm_sd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">bill_length_mm_sd</th>
<th id="bill_depth_mm_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">bill_depth_mm_mean</th>
<th id="bill_depth_mm_sd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">bill_depth_mm_sd</th>
<th id="flipper_length_mm_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">flipper_length_mm_mean</th>
<th id="flipper_length_mm_sd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">flipper_length_mm_sd</th>
<th id="body_mass_g_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">body_mass_g_mean</th>
<th id="body_mass_g_sd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">body_mass_g_sd</th>
<th id="year_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year_mean</th>
<th id="year_sd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year_sd</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="bill_length_mm_mean">43.92193</td>
<td class="gt_row gt_right" headers="bill_length_mm_sd">5.459584</td>
<td class="gt_row gt_right" headers="bill_depth_mm_mean">17.15117</td>
<td class="gt_row gt_right" headers="bill_depth_mm_sd">1.974793</td>
<td class="gt_row gt_right" headers="flipper_length_mm_mean">200.9152</td>
<td class="gt_row gt_right" headers="flipper_length_mm_sd">14.06171</td>
<td class="gt_row gt_right" headers="body_mass_g_mean">4201.754</td>
<td class="gt_row gt_right" headers="body_mass_g_sd">801.9545</td>
<td class="gt_row gt_right" headers="year_mean">2008.029</td>
<td class="gt_row gt_right" headers="year_sd">0.8183559</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li><p>In general, lists are another type of R object to store information, whether data, lists of functions, output from regression models, etc. While concatenate is just a vector of values, lists are multidimensional. We will be learning more about lists in parts 7 and 8.</p></li>
<li><p>You can learn more about <code>across()</code> at its <a href="https://dplyr.tidyverse.org/reference/across.html">help file</a>.</p></li>
</ul>
</section>
<section id="case_when-vs-ifelse-1" class="level3">
<h3 class="anchored" data-anchor-id="case_when-vs-ifelse-1"><code>case_when()</code> vs <code>ifelse()</code></h3>
<p><em>still a little confused on the difference between ifelse and casewhen, understand they are very similar but still confused on when it is best to use one over another</em></p>
<ul>
<li>The two functions can be used interchangeably. * <code>ifelse()</code> is the original function from base R
<ul>
<li><code>case_when()</code> is the user-friendly version of <code>ifelse()</code> from the <code>dplyr</code> package</li>
</ul></li>
<li>I recommend using <code>case_when()</code>, and it is what I use almost exclusively in my own work. My guess is that <code>ifelse()</code> was included in the notes since you might run into the function when reading R code on the internet.</li>
<li>Just be careful that you preserve missing values when using <code>case_when()</code> as we discussed last time.</li>
</ul>
</section>
<section id="factor-levels" class="level3">
<h3 class="anchored" data-anchor-id="factor-levels">factor levels</h3>
<p><em>working with factor levels doesn’t feel totally intuitive yet. I think that’s because I tend to get confused with anything involving a concatenated list.</em></p>
<ul>
<li>Working with factor variables takes a while to get used to, and in particular with their factor levels.</li>
<li>We will be looking at more examples with factor variables in the part 6 notes. See sections 2.8 and 4.</li>
<li>You can think of a concatenated list(<code>c(...)</code>) as a vector of values or a column of a dataset. Concatenating lets us create a set of values, which we typically create to use for some other purpose, such as specifying the levels of a factor variable.</li>
<li><em>Please submit a follow-up question in the post-class survey if this is still muddy after today’s class!</em></li>
</ul>
</section>
<section id="pivoting-tables" class="level3">
<h3 class="anchored" data-anchor-id="pivoting-tables">pivoting tables</h3>
<ul>
<li>Definitely a tricky topic, and over half of the muddiest points were about pivoting tables.</li>
<li>We will be looking at more examples in part 6.</li>
</ul>
<section id="how-pivot_longer-would-work-on-very-large-datasets-with-many-rowscolumns" class="level4">
<h4 class="anchored" data-anchor-id="how-pivot_longer-would-work-on-very-large-datasets-with-many-rowscolumns">How pivot_longer() would work on very large datasets with many rows/columns</h4>
<ul>
<li>It works the same way. However the resulting long table will end up being much much longer.</li>
<li>Extra columns in the dataset just hang out and their values get repeated (such as an age variable that is not being made long by) over and over again.
<ul>
<li>We will be pivoting a dataset in part 6 that has extra variables that are not being pivoted.</li>
</ul></li>
</ul>
</section>
<section id="trying-to-visualize-the-joins-and-pivot-longerwider" class="level4">
<h4 class="anchored" data-anchor-id="trying-to-visualize-the-joins-and-pivot-longerwider">Trying to visualize the joins and pivot longer/wider</h4>
<ul>
<li>I recommend trying them out with small datasets where you can actually see what is happening.</li>
<li><strong>Joins</strong>: Our <a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part2.html#18">BERD workshop slides</a> have another example that might visualize joins.
<ul>
<li><a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part2.html#18">Slide 18</a> shows to datasets x and y, and what the resulting joins look like.</li>
<li><a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part2.html#19">Slide 19</a> shows Venn diagrams of how the different joins behave.</li>
</ul></li>
<li><strong>Pivoting</strong>: There’s an <a href="https://niederhausen.github.io/BSTA_511_F23/slides_code/Day03_bsta511_code_part3_data_wrangling.html#reshaping-data">example with a very small dataset</a> in my (supplemental) notes from BSTA 511. The graphic that goes along with this is on <a href="https://drive.google.com/file/d/1IfubP0ei-5jTIVs33dyoEqjMIY-Q8qBe/view">Slide 28</a> from the pdf.</li>
</ul>
</section>
<section id="pivot_longer-makes-plotting-more-understandable-in-an-analysis-sense-which-situations-would-call-for-pivot_wider" class="level4">
<h4 class="anchored" data-anchor-id="pivot_longer-makes-plotting-more-understandable-in-an-analysis-sense-which-situations-would-call-for-pivot_wider">pivot_longer makes plotting more understandable in an analysis sense, which situations would call for pivot_wider?</h4>
<ul>
<li>I tend to use <code>pivot_longer()</code> much more frequently. However, there are times when <code>pivot_wider()</code> comes in handy. For example, below is a long table of summary statistics created with <code>group_by()</code> and <code>summarize()</code>. I would use <code>pivot_wider()</code> to reshape this table so that I have columns comparing species or columns comparing islands.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island) <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> bill_length_mm, </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="fu">list</span>(</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mean =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sd =</span> <span class="sc">~</span> <span class="fu">sd</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>                     )))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'species'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
# Groups:   species [3]
  species   island    bill_length_mm_mean bill_length_mm_sd
  &lt;fct&gt;     &lt;fct&gt;                   &lt;dbl&gt;             &lt;dbl&gt;
1 Adelie    Biscoe                   39.0              2.48
2 Adelie    Dream                    38.5              2.47
3 Adelie    Torgersen                39.0              3.03
4 Chinstrap Dream                    48.8              3.34
5 Gentoo    Biscoe                   47.5              3.08</code></pre>
</div>
</div>
</section>
<section id="how-to-use-arguments-of-pivot-longer." class="level4">
<h4 class="anchored" data-anchor-id="how-to-use-arguments-of-pivot-longer.">How to use arguments of pivot longer.</h4>
<ul>
<li>The arguments of the pivot functions take some practice to get used to. I sometimes still pull up an <a href="https://niederhausen.github.io/BSTA_511_F23/slides_code/Day03_bsta511_code_part3_data_wrangling.html#reshaping-data">example</a> to remind me what I need to specify for the various arguments, such as the one mentioned above that I have used in workshops and classes.<br>
</li>
<li>We have not covered all the different arguments, and I recommend reviewing the <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">help file</a> and in particular the <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html#ref-examples">examples</a> at the end of the page.</li>
</ul>
</section>
</section>
<section id="gtgt" class="level3">
<h3 class="anchored" data-anchor-id="gtgt"><code>gt::gt()</code></h3>
<p><em>The gt::gt package does make the tables look fancier, how do we add labels to those to have them look nice as well?</em></p>
<ul>
<li>I highly recommend the <a href="https://gt.rstudio.com/"><code>gt</code> webpage</a> to learn more about all the different options to create pretty tables. Note the tabs at the top of the page for “Get started” and “Reference.”</li>
<li>See also section 3 of part 6 on “Side note about <code>gt::gt()</code>” for more on creating pretty tables.</li>
</ul>
</section>
<section id="herehere-1" class="level3">
<h3 class="anchored" data-anchor-id="herehere-1"><code>here::here</code></h3>
<p><em>would also love more examples of here() I am starting to understand it better but still am a little confused</em></p>
<p><em>I am still having trouble getting here() to work consistently. I was going to ask during class, but I think I am just not understanding how to manually nest my files correctly so that “here” works. I am struggling to get that set up correct, and thus, struggling to use it.</em></p>
<ul>
<li>We’ll have some more examples in class, but I recommend reaching out to one of us (instructors or TA) to help you troubleshoot <code>here::here</code>.</li>
<li>Here are also some resources that might help
<ul>
<li><a href="https://here.r-lib.org/articles/here.html" class="uri">https://here.r-lib.org/articles/here.html</a></li>
<li><a href="http://jenrichmond.rbind.io/post/how-to-use-the-here-package/" class="uri">http://jenrichmond.rbind.io/post/how-to-use-the-here-package/</a></li>
<li><a href="https://github.com/jennybc/here_here" class="uri">https://github.com/jennybc/here_here</a></li>
</ul></li>
</ul>
</section>
<section id="clearest-points-2" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-2">Clearest points</h3>
<ul>
<li><code>group_by()</code> function (n=3)</li>
<li><code>summarize()</code> (n=2)</li>
<li><code>across()</code> (n=1)</li>
<li><code>case_when()</code> (n=1)</li>
<li><code>drop_na( )</code> (n=2)</li>
<li>Joining tables (n=6)</li>
</ul>
</section>
</section>
<section id="week-7-part-6" class="level2">
<h2 class="anchored" data-anchor-id="week-7-part-6">Week 7 (Part 6)</h2>
<section id="why-we-used-full_join" class="level4">
<h4 class="anchored" data-anchor-id="why-we-used-full_join">Why we used <code>full_join()</code></h4>
<blockquote class="blockquote">
<p>Why we used <code>full_join()</code> in the class example instead of the other join options</p>
</blockquote>
<ul>
<li>In this case both datasets being joined had the same ID’s, and thus it did not matter whether we used <code>left_join()</code>, <code>right_join()</code>, <code>full_join()</code> or <code>inner_join()</code>. All of these would’ve given the same results.</li>
</ul>
</section>
<section id="visualizing-pivots-and-joins" class="level4">
<h4 class="anchored" data-anchor-id="visualizing-pivots-and-joins">Visualizing pivots and joins</h4>
<blockquote class="blockquote">
<p>pivot-longer is still hard for me to mentally visualize how it alters the dataset.</p>
</blockquote>
<blockquote class="blockquote">
<p>I always struggle to visualize pivots and joins.</p>
</blockquote>
<ul>
<li>Reshaping data take lots of practice to get the hang of, and something where I still pause while coding to think through how it will work and how to code it. Especially for pivoting, I often refer back to existing code I am familiar with. <em>It’s normal at this point to still be muddy on these topics. Keep practicing though and read through some more examples.</em></li>
<li>In the <a href="https://niederhausen.github.io/BSTA_526_W24/weeks/week_06.html#trying-to-visualize-the-joins-and-pivot-longerwider">week 6 muddiest points</a> I listed some additional resources for visualizing these.</li>
<li>See also <a href="https://github.com/gadenbuie/tidyexplain">Tidy Animated Verbs</a> for visualizing <a href="https://github.com/gadenbuie/tidyexplain?tab=readme-ov-file#mutating-joins">joins</a> and <a href="https://github.com/gadenbuie/tidyexplain#tidy-data">pivoting</a>. The page also includes visualizing <code>union()</code>, <code>intersect()</code>, and <code>set_diff()</code>.</li>
<li>Another great resource is the <a href="https://www.r4epi.com/">R for Epidemiology</a> website.
<ul>
<li>It has sections on <a href="https://www.r4epi.com/working-with-multiple-data-frames#combining-data-frames-horizontally-by-key-values">joins</a> and <a href="https://www.r4epi.com/restructuring-data-frames#restructuring-data-frames">pivoting</a>.</li>
</ul></li>
<li>Jessica also addressed <a href="https://sph-r-programming-2023.netlify.app/class/07-class/#muddiest-parts">pivoting in last year’s muddiest points</a>.</li>
</ul>
<p><em>Please come to office hours or set up a time to meet if this is still muddy after looking at these resources!</em></p>
</section>
<section id="mutatefactor" class="level4">
<h4 class="anchored" data-anchor-id="mutatefactor"><code>mutate(factor ( ))</code></h4>
<blockquote class="blockquote">
<p><code>mutate(factor ( ))</code> problem we ran into in class where Emile posted on Slack.</p>
</blockquote>
<p>Below is the code Emile posted on Slack (commented out):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data &lt;- data |&gt;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(timepoint = factor(timepoint,</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co">#                             levels = c(1, 2, 3),</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">#                             labels = c(“1 month”,</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                                          “6 months”,</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                                          “12 months”)))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>At this point we were working through the code of Section 2.8 in the Part 6 notes.</li>
</ul>
<p>Load the <code>mouse_data</code> dataset we were working with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"mouse_data_longitudinal_clean.csv"</span>))</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mouse_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 96
Columns: 18
$ sid                                &lt;dbl&gt; 137, 137, 137, 138, 138, 138, 139, …
$ strain                             &lt;chr&gt; "C3H", "C3H", "C3H", "C3H", "C3H", …
$ trt                                &lt;chr&gt; "-", "-", "-", "-", "-", "-", "-", …
$ sex                                &lt;chr&gt; "M", "M", "M", "M", "M", "M", "M", …
$ time                               &lt;chr&gt; "tp1", "tp2", "tp3", "tp1", "tp2", …
$ normalized_bdnf_amygdala_pg_mg     &lt;dbl&gt; 492.4831, 275.1623, NA, 453.6635, 4…
$ normalized_bdnf_cortex_pg_mg       &lt;dbl&gt; 720.0173, NA, 871.8286, 884.5668, N…
$ normalized_bdnf_hypothalamus_pg_mg &lt;dbl&gt; NA, 1169.2845, NA, 1215.8147, 1078.…
$ normalized_cd68_amygdala_pg_mg     &lt;dbl&gt; 988.9628, 574.0655, NA, 775.5970, 4…
$ normalized_cd68_cortex_pg_mg       &lt;dbl&gt; 8.393707, NA, NA, 7.901366, NA, 8.8…
$ normalized_cd68_hypothalamus_pg_mg &lt;dbl&gt; NA, 6800.870, NA, 4373.811, 4461.62…
$ normalized_map2_cortex_pg_mg       &lt;dbl&gt; 352.9653, NA, 2693.9386, 1007.4147,…
$ mirna1                             &lt;dbl&gt; 5.2630200, -0.0491371, -0.7367310, …
$ mirna2                             &lt;dbl&gt; 1.6536200, -0.0773419, 0.1479940, -…
$ learning_outcome                   &lt;dbl&gt; 3.52, 19.81, 2.44, 1.56, 14.48, 1.1…
$ preference_obj1                    &lt;dbl&gt; 41.72205, 37.51387, 55.96768, 74.11…
$ preference_obj2                    &lt;dbl&gt; 58.27795, 62.48613, 44.03232, 25.88…
$ time_month                         &lt;chr&gt; "1 month", "6 months", "12 months",…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time  n   percent
  tp1 32 0.3333333
  tp2 32 0.3333333
  tp3 32 0.3333333</code></pre>
</div>
</div>
<ul>
<li>The goal was to create a factor variable of the character time point column called <code>time</code> with the levels 1 month, 6 months, and 12 months, instead of <code>time</code>’s values tp1, tp2, and tp3.</li>
<li>The code presented in class to accomplish this is below:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create time_month factor</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="ot">&lt;-</span> mouse_data <span class="sc">%&gt;%</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_month =</span> <span class="fu">case_when</span>(</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    time<span class="sc">==</span><span class="st">"tp1"</span> <span class="sc">~</span> <span class="st">"1 month"</span>,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    time<span class="sc">==</span><span class="st">"tp2"</span> <span class="sc">~</span> <span class="st">"6 months"</span>,</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    time<span class="sc">==</span><span class="st">"tp3"</span> <span class="sc">~</span> <span class="st">"12 months"</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">time_month =</span> <span class="fu">factor</span>(time_month,</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"1 month"</span>, <span class="st">"6 months"</span>, <span class="st">"12 months"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Compare the old and new time variables:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time, time_month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time 1 month 6 months 12 months
  tp1      32        0         0
  tp2       0       32         0
  tp3       0        0        32</code></pre>
</div>
</div>
<ul>
<li>The question arose as to whether we could include <code>factor()</code> in the same step as <code>case_when()</code> when creating <code>time_month</code> above, instead of having to write it out as a second separate line in the <code>mutate()</code>.</li>
<li>When using <code>case_when()</code>, we can do this as follows by piping the factor after the <code>case_when()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="ot">&lt;-</span> mouse_data <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_month2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    time<span class="sc">==</span><span class="st">"tp1"</span> <span class="sc">~</span> <span class="st">"1 month"</span>,</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    time<span class="sc">==</span><span class="st">"tp2"</span> <span class="sc">~</span> <span class="st">"6 months"</span>,</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    time<span class="sc">==</span><span class="st">"tp3"</span> <span class="sc">~</span> <span class="st">"12 months"</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(., <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"1 month"</span>, <span class="st">"6 months"</span>, <span class="st">"12 months"</span>))</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time_month, time_month2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time_month 1 month 6 months 12 months
    1 month      32        0         0
   6 months       0       32         0
  12 months       0        0        32</code></pre>
</div>
</div>
<ul>
<li>Another option that is similar, is to enclose the <code>case_when()</code> within the <code>factor()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="ot">&lt;-</span> mouse_data <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_month3 =</span> <span class="fu">factor</span>(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">case_when</span>(</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>      time<span class="sc">==</span><span class="st">"tp1"</span> <span class="sc">~</span> <span class="st">"1 month"</span>,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>      time<span class="sc">==</span><span class="st">"tp2"</span> <span class="sc">~</span> <span class="st">"6 months"</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>      time<span class="sc">==</span><span class="st">"tp3"</span> <span class="sc">~</span> <span class="st">"12 months"</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>      ), </span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"1 month"</span>, <span class="st">"6 months"</span>, <span class="st">"12 months"</span>)</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time_month, time_month3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time_month 1 month 6 months 12 months
    1 month      32        0         0
   6 months       0       32         0
  12 months       0        0        32</code></pre>
</div>
</div>
<section id="levels-vs.-labels" class="level5">
<h5 class="anchored" data-anchor-id="levels-vs.-labels"><code>levels</code> vs.&nbsp;<code>labels</code></h5>
<ul>
<li>Emile suggested using <code>factor()</code> on the <code>time</code> variable directly, and creating the new values using the <code>labels</code> option within <code>factor()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="ot">&lt;-</span> mouse_data <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_month4 =</span> <span class="fu">factor</span>(time,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"tp1"</span>, <span class="st">"tp2"</span>, <span class="st">"tp3"</span>),</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1 month"</span>, <span class="st">"6 months"</span>, <span class="st">"12 months"</span>)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>                             ))</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time_month, time_month4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time_month 1 month 6 months 12 months
    1 month      32        0         0
   6 months       0       32         0
  12 months       0        0        32</code></pre>
</div>
</div>
<ul>
<li>What is new her is that we have not previously discussed <code>labels</code>.</li>
<li>You can think of the <strong><code>levels</code> as the input</strong> for the <code>factor()</code> function.
<ul>
<li>It’s how we specify what the different levels are for the variable we are converting to factor, as well as the <strong>order we want the levels</strong> to be in.</li>
<li>If we do not specify the <code>levels</code>, then R will automatically use the different values of the variable being converted and arrange them in alphanumeric order. Example:</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="ot">&lt;-</span> mouse_data <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_month5 =</span> <span class="fu">factor</span>(time))</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time_month, time_month5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time_month tp1 tp2 tp3
    1 month  32   0   0
   6 months   0  32   0
  12 months   0   0  32</code></pre>
</div>
</div>
<ul>
<li>While <code>levels</code> is an input for the <code>factor()</code> function, <strong><code>labels</code> is an output</strong> for the <code>factor()</code> function.</li>
<li>The values specified in <code>labels</code> are the new values for the levels:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># time_month4 added labels</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co"># time_month5 did not add labels</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time_month4, time_month5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time_month4 tp1 tp2 tp3
     1 month  32   0   0
    6 months   0  32   0
   12 months   0   0  32</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mouse_data<span class="sc">$</span>time_month4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1 month"   "6 months"  "12 months"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mouse_data<span class="sc">$</span>time_month5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tp1" "tp2" "tp3"</code></pre>
</div>
</div>
<ul>
<li>Note that both <code>time_month4</code> and <code>time_month5</code> started with the same <code>levels</code>.</li>
<li>Instead of using the <code>labels</code> option within <code>factor()</code> (the base R way), we can also accomplish this by using <code>fct_recode()</code> from the <code>forcats</code> package (loaded as a part of <code>tidyverse</code>):</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># original tp levels:</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mouse_data<span class="sc">$</span>time_month5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tp1" "tp2" "tp3"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="ot">&lt;-</span> mouse_data <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_month6 =</span> <span class="fu">fct_recode</span>(time_month5, </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># new_name = "old_name"</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"1 month"</span> <span class="ot">=</span> <span class="st">"tp1"</span>, </span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"6 months"</span> <span class="ot">=</span> <span class="st">"tp2"</span>, </span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"12 months"</span> <span class="ot">=</span> <span class="st">"tp3"</span>))</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mouse_data<span class="sc">$</span>time_month6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1 month"   "6 months"  "12 months"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>mouse_data <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(time_month6, time_month5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> time_month6 tp1 tp2 tp3
     1 month  32   0   0
    6 months   0  32   0
   12 months   0   0  32</code></pre>
</div>
</div>
<ul>
<li>Learn more about <code>fct_recode()</code> <a href="https://forcats.tidyverse.org/reference/fct_recode.html">here</a>.</li>
</ul>
</section>
</section>
<section id="in" class="level4">
<h4 class="anchored" data-anchor-id="in"><code>%in%</code></h4>
<blockquote class="blockquote">
<p><code>%in%</code> command, I feel like I understand but have some confusion and think it might just be one of those things I have to work with/apply to fully understand</p>
</blockquote>
<ul>
<li><p>We’ve used the <code>%in%</code> function in some examples, but I don’t think we’ve discussed it in detail.</p></li>
<li><p>The %in% function is used to <strong>test whether elements of one vector are contained in another vector</strong>. It returns a logical vector indicating whether each element of the first vector is found in the second vector.</p></li>
<li><p>Below are some examples that ChatGPT generated (and I slightly edited).</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 1: Using %in% with two numeric vectors</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%in%</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 2: Using %in% with two character vectors</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="st">"grape"</span>)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>selected_fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"banana"</span>, <span class="st">"grape"</span>, <span class="st">"kiwi"</span>)</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>selected_fruits <span class="sc">%in%</span> fruits</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 3: Using %in% with dataframe columns</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dataframe</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">ID =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">fruit =</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="st">"grape"</span>, <span class="st">"kiwi"</span>)</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
     ID fruit 
  &lt;dbl&gt; &lt;chr&gt; 
1     1 apple 
2     2 banana
3     3 orange
4     4 grape 
5     5 kiwi  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter rows where 'fruit' column contains values from selected_fruits</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>selected_fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"banana"</span>, <span class="st">"grape"</span>, <span class="st">"kiwi"</span>)</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fruit <span class="sc">%in%</span> selected_fruits)</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>df_filtered</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
     ID fruit 
  &lt;dbl&gt; &lt;chr&gt; 
1     2 banana
2     4 grape 
3     5 kiwi  </code></pre>
</div>
</div>
</section>
<section id="clearest-points-3" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-3">Clearest points</h3>
<blockquote class="blockquote">
<p>This class was all really clear. It was helpful to be reviewing some of the things we learned last week.</p>
</blockquote>
<blockquote class="blockquote">
<p>I appreciate the new codes on how to clean/reshape/combine messy data. I think that was the hardest parts to do in the other Biostatistics courses during projects.</p>
</blockquote>
<blockquote class="blockquote">
<p>Data cleaning</p>
</blockquote>
<blockquote class="blockquote">
<p>Most of the data cleaning exercises.</p>
</blockquote>
<blockquote class="blockquote">
<p>different strategies to clean data sets</p>
</blockquote>
<blockquote class="blockquote">
<p>The data cleaning made a lot of sense but I think I will struggle with solving problems in a really inefficient way.</p>
</blockquote>
<blockquote class="blockquote">
<p>Everything before Challenge 3</p>
</blockquote>
<blockquote class="blockquote">
<p>methods to merge datasets to create a table</p>
</blockquote>
<blockquote class="blockquote">
<p>inner join and full join are the same if all vectors are the same.</p>
</blockquote>
<blockquote class="blockquote">
<p>Pivot</p>
</blockquote>
<blockquote class="blockquote">
<p>ggplot and how to code data in to display what we want to display</p>
</blockquote>
</section>
<section id="other-comments" class="level3">
<h3 class="anchored" data-anchor-id="other-comments">Other comments</h3>
<blockquote class="blockquote">
<p>Is there a difference between summarize (with z) and summarise (with s)?</p>
</blockquote>
<p>Great question!</p>
<ul>
<li>In English, summarize is American English and summarise is British English. * In R they work the same way. The <a href="https://dplyr.tidyverse.org/reference/summarise.html">reference page for <code>summarise()</code></a> lists them as synonyms.</li>
<li>In R code I see summarise more, and now keep mixing up which is American and which is British.</li>
<li>In general, R accepts both American and British English, such as both color and colour.</li>
</ul>
<blockquote class="blockquote">
<p>Thank you for the survey reminders! The pace of the class feels much better compared to the pace at the beginning of the term</p>
</blockquote>
<p>Thanks for the feedback!</p>
<blockquote class="blockquote">
<p>I really enjoyed the walk through from start to finish of how to clean the data sheet and it really helped clear up many of the commands I was previously confused about</p>
</blockquote>
<p>Thanks for the feedback! Glad the data wrangling walk through was helpful.</p>
</section>
</section>
<section id="week-8-part-7" class="level2">
<h2 class="anchored" data-anchor-id="week-8-part-7">Week 8 (Part 7)</h2>
<section id="when-loading-a-dataset-what-does-mean" class="level3">
<h3 class="anchored" data-anchor-id="when-loading-a-dataset-what-does-mean">When loading a dataset, what does <promise> mean?</promise></h3>
<p>This occurs when you use the <code>data()</code> function to load a data set from a package. Per the help on this function (<code>?data</code>):</p>
<blockquote class="blockquote">
<p><code>data()</code> was originally intended to allow users to load datasets from packages for use in their examples, and as such it loaded the datasets into the workspace <code>.GlobalEnv</code>. This avoided having large datasets in memory when not in use: that need has been almost entirely superseded by lazy-loading of datasets.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"iris"</span>)  <span class="co"># this doesn't actually load the data set, but makes it available for use</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)    <span class="co"># Once it's used it will appear in the Environment as an object.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</section>
<section id="challenge-2" class="level3">
<h3 class="anchored" data-anchor-id="challenge-2">Challenge # 2</h3>
<p>This was where we created a function to load 3 data sets, clean them, and convert them to long format. These are tasks we’ve seen in previous classes. In this challenge, the main takeaway was to see the DRY (Don’t repeat yourself) concept at play. Instead of writing the code 3 times for each data set, we can create a function where we only write the cleaning code once, then use that function 3 times.</p>
<p>Reviewing the challenge solutions and taking more time to work through it on your own is a good idea. We went through it pretty quick in class. You won’t usually be limited on time to get a function like that to work. In practice, if it’s taking more time and too complicated, then it’s fine to duplicate code so that you know it’s working correctly. But, with very repetitive tasks, functions can make your code less prone to errors from copying and pasting.</p>
<p>If you have trouble getting your code to work for the challenges, office hours are great for helping to debug code. Else, sharing full code in an email or on Slack.</p>
</section>
<section id="purrrpluck" class="level3">
<h3 class="anchored" data-anchor-id="purrrpluck"><code>purrr::pluck</code></h3>
<p>There was a specific question:</p>
<blockquote class="blockquote">
<p><code>purrr::pluck</code> seems really useful, I wonder if you can tell it to pluck a specific record_ID?</p>
</blockquote>
<p>The short answer is no. Not a specific ID. But if you know the <em>position</em> of the specific ID then you could.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create sample data</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="fu">c</span>(<span class="st">"0001"</span>, <span class="st">"0002"</span>, <span class="st">"0003"</span>, <span class="st">"0004"</span>, <span class="st">"0005"</span>, <span class="st">"0006"</span>, <span class="st">"0007"</span>, <span class="st">"0008"</span>, <span class="st">"0009"</span>, <span class="st">"0010"</span>), </span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex =</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"F"</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>), </span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">18</span><span class="sc">:</span><span class="dv">65</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   id    sex     age
   &lt;chr&gt; &lt;chr&gt; &lt;int&gt;
 1 0001  F        65
 2 0002  M        33
 3 0003  F        65
 4 0004  M        51
 5 0005  F        32
 6 0006  M        31
 7 0007  M        64
 8 0008  M        33
 9 0009  F        18
10 0010  M        40</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Say we want to extract ID 0003.</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co"># With purrr::pluck we need to know that it's in the 3rd row of the ID column</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pluck</span>(df, </span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">"id"</span>, </span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>             <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "0003"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gives an error</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pluck</span>(df, </span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">"id"</span>, </span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"0003"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># More than likely in this scenario, you would use a filter:</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(id <span class="sc">==</span> <span class="st">"0003"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  id    sex     age
  &lt;chr&gt; &lt;chr&gt; &lt;int&gt;
1 0003  F        65</code></pre>
</div>
</div>
<p><code>purrr::pluck</code> was created to work with deeply nested data structures. Not necessarily data frames; there’s probably a more appropriate function out there for the task.</p>
</section>
<section id="lists-general-confusion" class="level3">
<h3 class="anchored" data-anchor-id="lists-general-confusion">Lists – general confusion</h3>
<ul>
<li>What do we do with lists?</li>
<li>Using lists</li>
</ul>
<p>We will get to work more with lists in Week 9 and get more opportunities to see how they are used.</p>
<p>Lists are more flexible and have the ability to handle various data structures which make them a powerful tool for organizing, manipulating, and representing complex data in R.</p>
</section>
<section id="lists-one-bracket-versus-two-brackets." class="level3">
<h3 class="anchored" data-anchor-id="lists-one-bracket-versus-two-brackets.">Lists – One bracket versus two brackets.</h3>
<p>One bracket <code>[ ]</code> and two brackets <code>[[ ]]</code> serves different purposes, primarily when accessing elements in a data structure like vectors, lists, or data frames.</p>
<section id="one-bracket" class="level4">
<h4 class="anchored" data-anchor-id="one-bracket"><strong>One Bracket <code>[ ]</code>:</strong></h4>
<section id="vectors" class="level5">
<h5 class="anchored" data-anchor-id="vectors"><strong>Vectors:</strong></h5>
<p>When used with a single bracket, you can use it to subset or extract elements from a vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example with a vector</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>my_vector[<span class="dv">3</span>]  <span class="co"># Extracts the element at index 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section>
<section id="data-frames" class="level5">
<h5 class="anchored" data-anchor-id="data-frames"><strong>Data Frames:</strong></h5>
<p>When used with a data frame, it can be used to extract columns or rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example with a data frame</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>), </span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">22</span>)</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the age column</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
    age
  &lt;dbl&gt;
1    25
2    30
3    22</code></pre>
</div>
</div>
</section>
</section>
<section id="two-brackets" class="level4">
<h4 class="anchored" data-anchor-id="two-brackets"><strong>Two Brackets <code>[[ ]]</code>:</strong></h4>
<section id="lists" class="level5">
<h5 class="anchored" data-anchor-id="lists"><strong>Lists:</strong></h5>
<p>When working with lists, double brackets are used to extract elements from the list. The result is the actual element, not a list containing the element.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example with a list</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, </span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), </span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"four"</span>)</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">2</span>]]  <span class="co"># Extracts the second element (a vector) from the list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3</code></pre>
</div>
</div>
<p>Compare to using <code>[]</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>my_list[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 2 3</code></pre>
</div>
</div>
<p><code>[[]]</code> returned the vector contained in that slot. <code>[]</code> returned a list containing the vector.</p>
</section>
<section id="nested-data-structures" class="level5">
<h5 class="anchored" data-anchor-id="nested-data-structures"><strong>Nested Data Structures:</strong></h5>
<p>For accessing elements in nested data structures like lists within lists.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example with a nested list</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>nested_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">first =</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>), </span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">second =</span> <span class="fu">list</span>(<span class="at">c =</span> <span class="dv">3</span>, <span class="at">d =</span> <span class="dv">4</span>))</span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>nested_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$first
$first$a
[1] 1

$first$b
[1] 2


$second
$second$c
[1] 3

$second$d
[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>nested_list[[<span class="dv">1</span>]] <span class="co"># Extract the list contained in the first slot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 1

$b
[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>nested_list[[<span class="dv">1</span>]][[<span class="st">"b"</span>]]  <span class="co"># Extracts the value associated with "b" in the first list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>In summary, one bracket <code>[ ]</code> is used for general subsetting, whether it’s extracting elements from vectors, columns from data frames, or specific elements from lists. On the other hand, two brackets <code>[[ ]]</code> are specifically used for extracting elements from lists and accessing elements in nested structures.</p>
</section>
</section>
</section>
<section id="how-and-when-to-use-curly-curly-within-a-function" class="level3">
<h3 class="anchored" data-anchor-id="how-and-when-to-use-curly-curly-within-a-function">How and when to use curly curly within a function</h3>
<p><code>{ }</code> will be covered in upcoming class lectures. We talked about it in Week 8 as a quick aside because a specific question came up. Not much detail was given intentionally as it is a separate topic for another day.</p>
</section>
</section>
<section id="week-9-part-7" class="level2">
<h2 class="anchored" data-anchor-id="week-9-part-7">Week 9 (Part 7)</h2>
<section id="matrices" class="level3">
<h3 class="anchored" data-anchor-id="matrices">Matrices</h3>
<blockquote class="blockquote">
<p>Not entirely sure how to read or make sense of matrices yet (maybe I should have payed more attention in algebra), like when we saw the structure of a matrix here in the class script: <code>str(output_model$coefficients)</code></p>
</blockquote>
<p>In R, matrices are two-dimensional data structures that can store elements of the same data type. They are similar to vectors but have two dimensions (rows and columns). They are widely used in various statistical and mathematical operations, making them a fundamental data structure in the R.</p>
<section id="basic-way-to-create-matrices" class="level4">
<h4 class="anchored" data-anchor-id="basic-way-to-create-matrices">Basic way to create matrices</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a matrix with values filled column-wise</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>(mat1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a matrix with values filled row-wise</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>(mat2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6</code></pre>
</div>
</div>
</section>
<section id="accessing-elements-of-a-matrix" class="level4">
<h4 class="anchored" data-anchor-id="accessing-elements-of-a-matrix">Accessing elements of a matrix</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing individual elements</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>element <span class="ot">&lt;-</span> mat1[<span class="dv">1</span>, <span class="dv">2</span>]  <span class="co"># Row 1, Column 2</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>element</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing entire row or column</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>row_vector <span class="ot">&lt;-</span> mat1[<span class="dv">1</span>, ]  <span class="co"># Entire first row</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>row_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>col_vector <span class="ot">&lt;-</span> mat1[, <span class="dv">2</span>]  <span class="co"># Entire second column</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>col_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</section>
<section id="convert-to-data.frame" class="level4">
<h4 class="anchored" data-anchor-id="convert-to-data.frame">Convert to data.frame</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(mat1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  V1 V2 V3
1  1  3  5
2  2  4  6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(mat1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `x` argument of `as_tibble.matrix()` must have unique column names if
`.name_repair` is omitted as of tibble 2.0.0.
ℹ Using compatibility `.name_repair`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
     V1    V2    V3
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1     1     3     5
2     2     4     6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also name the columns (and the rows)</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mat1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>mat1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     a b c
[1,] 1 3 5
[2,] 2 4 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(mat1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
      a     b     c
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1     1     3     5
2     2     4     6</code></pre>
</div>
</div>
</section>
</section>
<section id="for-loops" class="level3">
<h3 class="anchored" data-anchor-id="for-loops"><code>for()</code> loops</h3>
<blockquote class="blockquote">
<p>Still a little confused about the for() loops…</p>
</blockquote>
<p>For loops are a staple in programming languages, not just R. They are used when we want to repeat the same operation (or a set of operations) several times.</p>
<p>The basis syntax in R looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (variable <span class="cf">in</span> sequence) {</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Statements to be executed for each iteration</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s a breakdown of the components:</p>
<ul>
<li><p><code>variable</code>: This is a loop variable that takes on each value in the specified sequence during each iteration of the loop.</p></li>
<li><p><code>sequence</code>: This is the sequence of values over which the loop iterates. It can be a vector, list, or any other iterable object.</p></li>
<li><p>Loop Body: The statements enclosed within the curly braces <code>{}</code> constitute the body of the loop. These statements are executed for each iteration of the loop.</p></li>
</ul>
<section id="basic-example" class="level4">
<h4 class="anchored" data-anchor-id="basic-example">Basic example</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<p>First iteration manually:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>Second iteration manually:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>Etc.</p>
</section>
<section id="adapted-from-1st-edition-of-r-for-data-science" class="level4">
<h4 class="anchored" data-anchor-id="adapted-from-1st-edition-of-r-for-data-science">Adapted from <a href="https://r4ds.had.co.nz/iteration.html#for-loops-vs.-functionals">1st edition of R for Data Science</a></h4>
<p>Here’s a tibble for an example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse)</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
         a      b       c       d
     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1  0.243   0.135 -0.0225 -0.506 
 2 -1.53    1.78   1.61    0.0146
 3 -0.596  -1.42   1.10   -1.09  
 4 -0.0251  0.957 -1.67    0.315 
 5  2.03   -0.295 -0.467  -0.798 
 6  0.0255 -0.752 -0.0718  1.15  
 7  0.328  -0.605 -0.844   1.05  
 8 -0.666   1.15   0.854   0.389 
 9 -0.250  -0.662  0.382   0.157 
10 -0.0180  0.568 -0.744   0.399 </code></pre>
</div>
</div>
<p>Using a copy and paste method to calculate the mean of each column would look something like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.02155139</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.07991065</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.04719299</code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2357017</code></pre>
</div>
</div>
<p>But this breaks the rule of DRY (“Don’t repeat yourself”)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">c</span>()  <span class="co"># vector to store the results of the for loop</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  output[i] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.02155139 -0.07991065 -0.04719299  0.23570170</code></pre>
</div>
</div>
<p>For loops in R are commonly used when you know the number of iterations in advance or when you need to iterate over a specific sequence of values. While for loops are useful, R also provides other ways to perform iteration, such as using vectorized operations (example below) and functions from the apply family (not covered). It’s often recommended to explore these alternatives when working with R for better code efficiency and readability.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating two vectors</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>vector1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>vector2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Vectorized addition</span></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>result_addition <span class="ot">&lt;-</span> vector1 <span class="sc">+</span> vector2</span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>result_addition</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7  9 11 13 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With a for loop</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>result_addition_for_loop <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vector1)) {</span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>  result_addition_for_loop[i] <span class="ot">&lt;-</span> vector1[i] <span class="sc">+</span> vector2[i]</span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a>result_addition_for_loop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7  9 11 13 15</code></pre>
</div>
</div>
</section>
</section>
<section id="na.rm-vs-na.omit" class="level3">
<h3 class="anchored" data-anchor-id="na.rm-vs-na.omit"><code>na.rm</code> vs <code>na.omit</code></h3>
<blockquote class="blockquote">
<p>Is there a difference between na.rm and na.omit?</p>
</blockquote>
<p>Yes, there is a difference. In R, they are used in different context.</p>
<ol type="1">
<li><code>na.rm</code> (Remove)</li>
</ol>
<p><code>na.rm</code> is an <em>argument</em> found in various functions (e.g.&nbsp;<code>mean()</code>, <code>sum()</code>, etc.) that allows you to specify whether missing values (<code>NA</code> or <code>NaN</code>) should be removed before performing the calculation.</p>
<p>From the help for <code>mean()</code> (<code>?mean</code>): <em>a logical evaluating to TRUE or FALSE indicating whether NA values should be stripped before the computation proceeds.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A vector with NA values</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>values_with_na <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">5</span>)</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(values_with_na, <span class="at">na.rm =</span> <span class="cn">FALSE</span>)  <span class="co"># Result will be NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Excluding NA values</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(values_with_na, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># Result will be (1+2+3+5)/4 = 2.75</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.75</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><code>na.omit</code> (Omit missing)</li>
</ol>
<p><code>na.omit</code> is a <em>function</em> that can be used to remove rows with missing values (<code>NA</code>) from a data frame or matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a data frame with NA values</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">A =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>), <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="cn">NA</span>, <span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="co"># NAs in the columns of the data frame</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   A  B
1  1  5
2  2 NA
3 NA  7
4  4  8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using na.omit to remove rows with NA values</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A B
1 1 5
4 4 8</code></pre>
</div>
</div>
</section>
<section id="purrrmap" class="level3">
<h3 class="anchored" data-anchor-id="purrrmap"><code>purrr::map()</code></h3>
<blockquote class="blockquote">
<p>I am still a little foggy on the formatting of purrrmap and how to utilize it effectively.</p>
</blockquote>
<p>The <code>purrr::map</code> function is used to apply a specified function to each element of a list or vector, returning the results in a new list.</p>
<section id="basic-syntax" class="level4">
<h4 class="anchored" data-anchor-id="basic-syntax">Basic Syntax:</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(.x, .f, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong><code>.x</code>:</strong> The input list or vector.</p></li>
<li><p><strong><code>.f</code>:</strong> The function to apply to each element of <code>.x</code>.</p></li>
<li><p><strong><code>...</code>:</strong> Additional arguments passed to the function specified in <code>.f</code>.</p></li>
</ul>
</section>
<section id="key-features" class="level4">
<h4 class="anchored" data-anchor-id="key-features">Key Features:</h4>
<ol type="1">
<li><p><strong>Consistent Output:</strong></p>
<ul>
<li><code>map</code> returns a list, ensuring a consistent output format regardless of the input structure.</li>
</ul></li>
<li><p><strong>Function Application:</strong></p>
<ul>
<li>The primary purpose is to apply a specified function to each element of the input <code>.x</code>.</li>
</ul></li>
<li><p><strong>Formula Interface:</strong></p>
<ul>
<li>Supports a formula interface (<code>~</code>) for concise function specifications.</li>
</ul>
<p><code>purrr::map(.x, ~ function(.))</code></p></li>
</ol>
</section>
<section id="example" class="level4">
<h4 class="anchored" data-anchor-id="example">Example:</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample list</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">b =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), </span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">3</span>))</span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 1 2 3

$b
[1] 4 5 6

$c
[1]  0.09890692  0.99882353 -0.11133133</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using map to square each element in the list</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>squared_list <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> my_list, </span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">.f =</span> <span class="sc">~</span> .x <span class="sc">^</span> <span class="dv">2</span>)</span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a>squared_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 1 4 9

$b
[1] 16 25 36

$c
[1] 0.009782579 0.997648452 0.012394664</code></pre>
</div>
</div>
<p>In this example, the <code>map</code> function applies the squaring function (<code>~ .x ^ 2</code>) to each element of the input list <code>my_list</code>. The resulting <code>squared_list</code> is a list where each element is the squared version of the corresponding element in <code>my_list</code>.</p>
<p>The <code>purrr::map</code> function is particularly useful when working with lists and helps to create cleaner and more readable code, especially in cases where you want to apply the same operation to each element of a collection.</p>
</section>
</section>
<section id="general-references" class="level3">
<h3 class="anchored" data-anchor-id="general-references">General references</h3>
<blockquote class="blockquote">
<p>Is there a good dictionary type document with “R language” or very basic function descriptions? … find it difficult to know what functions I need because it is hard to recall their name or confuse it with a different function.</p>
</blockquote>
<ul>
<li>R Documentation (Built-in Help): R itself provides built-in documentation that you can access using the <code>help()</code> function or the <code>?</code> operator. For example, to get help on the <code>mean()</code> function, you can type <code>help(mean)</code> or <code>?mean</code> in the R console.</li>
<li>R Manuals and Guides: The official R documentation, including manuals and guides, is available on the R Project website: <a href="https://cran.r-project.org/manuals.html">R Manuals</a>.</li>
<li>R Packages Documentation: Many R packages come with detailed documentation. You can find documentation for a specific package by visiting the CRAN website (Comprehensive R Archive Network) and searching for the package of interest.</li>
<li>Online Resources: Websites like <a href="https://www.rdocumentation.org/">RDocumentation</a> provide a searchable database of R functions along with their documentation. You can search for a specific function and find details on its usage and parameters.</li>
<li><a href="https://posit.co/resources/cheatsheets/">RStudio cheatsheets</a></li>
<li><a href="https://iqss.github.io/dss-workshops/R/Rintro/base-r-cheat-sheet.pdf">Base R cheatsheet</a></li>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/fullrefman.pdf">R: A Language and Environment for Statistical Computing: Reference Index</a></li>
<li><a href="https://cran.r-project.org/web/views/">CRAN Task Views</a></li>
<li>Part 3 section on getting help with errors.</li>
<li>Books like <a href="https://r4ds.hadley.nz/">“R for Data Science”</a> by Hadley Wickham</li>
<li>When you use a function or learn to use it, make notes to yourself using Google Doc or OneNote or something similar.</li>
</ul>
</section>
</section>
<section id="week-10-part-8" class="level2">
<h2 class="anchored" data-anchor-id="week-10-part-8">Week 10 (Part 8)</h2>
<section id="confusion-on-details-of-purrrmap" class="level3">
<h3 class="anchored" data-anchor-id="confusion-on-details-of-purrrmap">Confusion on details of <code>purrr::map()</code></h3>
<p><code>purrr::map()</code> applies a function to each element of a vector or list and returns a new list where each element is the result of applying that function to the corresponding element of the original vector or list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(.x, .f, ..., <span class="at">.progress =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>.x</code> the vector or list that you operate on</li>
<li><code>.f</code> the function you want to apply to each element of the input vector or list. This function can be a built-in R function, a user-defined function, or an anonymous function defined on the fly.</li>
</ul>
<section id="simple-example" class="level4">
<h4 class="anchored" data-anchor-id="simple-example">Simple example</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example list</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

[[4]]
[1] 4

[[5]]
[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using map to square each element of the list</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>squared_numbers <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> numbers, </span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">.f =</span> <span class="sc">~</span> .x <span class="sc">^</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this example: - <code>numbers</code> is a list containing numbers from 1 to 5. - <code>~ .x ^ 2</code> is an anonymous function that squares its input. - <code>map()</code> applies this anonymous function to each element of the <code>numbers</code> list, resulting in a new list where each element is the square of the corresponding element in the original list.</p>
<p>After executing this code, the <code>squared_numbers</code> variable will contain the squared values of the original list:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>squared_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

[[5]]
[1] 25</code></pre>
</div>
</div>
</section>
<section id="example-with-a-list-of-data-frames" class="level4">
<h4 class="anchored" data-anchor-id="example-with-a-list-of-data-frames">Example with a list of data frames</h4>
<p>Suppose we have a list of data frames where each data frame represents the sales data for different products. We want to calculate the total sales for each product across all the data frames in the list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample list of data frames</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>sales_data <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">product1 =</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">sales =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">150</span>, <span class="dv">200</span>)),</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">product2 =</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">sales =</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">180</span>, <span class="dv">220</span>)),</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">product3 =</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">sales =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">130</span>, <span class="dv">170</span>))</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>sales_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$product1
  month sales
1     1   100
2     2   150
3     3   200

$product2
  month sales
1     1   120
2     2   180
3     3   220

$product3
  month sales
1     1    90
2     2   130
3     3   170</code></pre>
</div>
</div>
<p>Create a function `<code>and apply it to each slot in</code>sales_data` list:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to calculate total sales for each data frame</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>calculate_total_sales <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>  total_sales <span class="ot">&lt;-</span> <span class="fu">sum</span>(df<span class="sc">$</span>sales)</span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(total_sales)</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Applying the function to each data frame in the list</span></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>total_sales_per_product <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> sales_data, </span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">.f =</span> calculate_total_sales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this example: - <code>sales_data</code> is a list containing three data frames, each representing the sales data for a different product. - <code>calculate_total_sales()</code> is a function that takes a data frame as input and calculates the total sales for that product. - <code>map()</code> applies the <code>calculate_total_sales()</code> function to each data frame in the <code>sales_data</code> list, resulting in a new list <code>total_sales_per_product</code>, where each element is the total sales for a specific product across all months.</p>
<p>After executing this code, the <code>total_sales_per_product</code> variable will contain the total sales for each product:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>total_sales_per_product</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$product1
[1] 450

$product2
[1] 520

$product3
[1] 390</code></pre>
</div>
</div>
<p>So, <code>total_sales_per_product</code> is a named list where each element represents the total sales for a specific product across all the data frames in the original list.</p>
</section>
</section>
<section id="purrrreduce" class="level3">
<h3 class="anchored" data-anchor-id="purrrreduce"><code>purrr::reduce()</code></h3>
<section id="how-does-it-compare-to-purrrmap" class="level4">
<h4 class="anchored" data-anchor-id="how-does-it-compare-to-purrrmap">How does it compare to <code>purrr::map()</code>?</h4>
<p>The big difference between map() and reduce() has to do with what it returns:</p>
<blockquote class="blockquote">
<p><code>map()</code> usually returns a list or data structure with the same number as its input; The goal of <code>reduce()</code> is to take a list of items and return a single object.</p>
</blockquote>
<p>See the <a href="https://github.com/rstudio/cheatsheets/blob/main/purrr.pdf">purrr cheatsheet</a>.</p>
</section>
<section id="simple-example-1" class="level4">
<h4 class="anchored" data-anchor-id="simple-example-1">Simple example</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example vector</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using reduce to calculate cumulative sum</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>cumulative_sum <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(<span class="at">.x =</span> numbers, </span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.f =</span> <span class="st">`</span><span class="at">+</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this example: - <code>numbers</code> is the vector we want to operate on. - The function <code>+</code> is used as the operation to perform at each step of reduction, which in this case is addition. - <code>reduce()</code> will start by adding the first two elements (1 and 2), then add the result to the third element (3), and so on, until all elements have been processed.</p>
<p>After executing this code, the <code>cumulative_sum</code> variable will contain the cumulative sum of the numbers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>cumulative_sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
</div>
<p>The steps are as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>(cum_numbers <span class="ot">&lt;-</span> numbers[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>(cum_numbers <span class="ot">&lt;-</span> cum_numbers <span class="sc">+</span> numbers[<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>(cum_numbers <span class="ot">&lt;-</span> cum_numbers <span class="sc">+</span> numbers[<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>(cum_numbers <span class="ot">&lt;-</span> cum_numbers <span class="sc">+</span> numbers[<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>(cum_numbers <span class="ot">&lt;-</span> cum_numbers <span class="sc">+</span> numbers[<span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
</div>
</section>
<section id="with-data-frames" class="level4">
<h4 class="anchored" data-anchor-id="with-data-frames">With data frames</h4>
<p>Using our sales data list from above</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>sales_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$product1
  month sales
1     1   100
2     2   150
3     3   200

$product2
  month sales
1     1   120
2     2   180
3     3   220

$product3
  month sales
1     1    90
2     2   130
3     3   170</code></pre>
</div>
</div>
<p>We can combined the data sets in the list with <code>reduce()</code> and <code>bind_rows()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using an anonymous function, note bind_rows takes 2 arguments.</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>combined_sales_data <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(<span class="at">.x =</span> sales_data, </span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">.f =</span> <span class="cf">function</span>(x, y) <span class="fu">bind_rows</span>(x, y))</span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Using a named function</span></span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a>combined_sales_data <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(<span class="at">.x =</span> sales_data, </span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">.f =</span> dplyr<span class="sc">::</span>bind_rows)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this example: - We use an anonymous function within <code>reduce()</code> that takes two arguments <code>x</code> and <code>y</code>, representing the accumulated result and the next element in the list, respectively. - Inside the anonymous function, we use <code>bind_rows()</code> to combine the accumulated result <code>x</code> with the next element <code>y</code>, effectively stacking them on top of each other. - <code>reduce()</code> applies this anonymous function iteratively to the list of data frames, resulting in a single data frame <code>combined_sales_data</code> that contains the combined sales data for all products.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>combined_sales_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  month sales
1     1   100
2     2   150
3     3   200
4     1   120
5     2   180
6     3   220
7     1    90
8     2   130
9     3   170</code></pre>
</div>
</div>
<p>Doing this in steps:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>(cum_sales_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(sales_data[[<span class="dv">1</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  month sales
1     1   100
2     2   150
3     3   200</code></pre>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>(cum_sales_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(cum_sales_data, </span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>                                    sales_data[[<span class="dv">2</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  month sales
1     1   100
2     2   150
3     3   200
4     1   120
5     2   180
6     3   220</code></pre>
</div>
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>(cum_sales_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(cum_sales_data, </span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>                                    sales_data[[<span class="dv">3</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  month sales
1     1   100
2     2   150
3     3   200
4     1   120
5     2   180
6     3   220
7     1    90
8     2   130
9     3   170</code></pre>
</div>
</div>
</section>
<section id="examples-of-reduce" class="level4">
<h4 class="anchored" data-anchor-id="examples-of-reduce">Examples of reduce</h4>
<ul>
<li><a href="https://masalmon.eu/2023/07/26/reduce/">Pretty involved example from Maelle Salmon, but good practice</a></li>
<li><a href="https://purrr.tidyverse.org/reference/reduce.html">Tidyverse reference with examples</a></li>
<li><a href="https://r4ds.had.co.nz/iteration.html?q=reduce#reduce-and-accumulate">R for Data Science, First Edition</a></li>
<li><a href="https://yjunechoe.github.io/posts/2020-12-13-collapse-repetitive-piping-with-reduce/">Another exmple blog post</a></li>
</ul>
</section>
</section>
<section id="list.files-function" class="level3">
<h3 class="anchored" data-anchor-id="list.files-function">List.files function</h3>
<p>the <code>list.files()</code> function is used to obtain a character vector of file names in a specified directory. Here’s a breakdown of how it works and its common parameters:</p>
<ol type="1">
<li><p><strong>Directory Path</strong>: The primary argument of <code>list.files()</code> is the path to the directory you want to list files from. If not specified, it defaults to the current working directory.</p></li>
<li><p><strong>Pattern Matching</strong>: <code>pattern</code> is an optional argument that allows you to specify a pattern for file names. Only file names matching this pattern will be returned. This can be useful for filtering specific types of files.</p></li>
<li><p><strong>Recursive Listing</strong>: If <code>recursive = TRUE</code>, the function will list files recursively, i.e., it will include files from subdirectories as well. By default, <code>recursive</code> is set to <code>FALSE</code>.</p></li>
<li><p><strong>File Type</strong>: The <code>full.names</code> argument controls whether the returned file names should include the full path (if <code>TRUE</code>) or just the file names (if <code>FALSE</code>, the default).</p></li>
<li><p><strong>Character Encoding</strong>: You can specify the <code>encoding</code> argument to handle file names with non-ASCII characters. This argument is especially useful on Windows systems where file names may use a different character encoding.</p></li>
</ol>
<p>Here’s a simple example demonstrating the basic usage of <code>list.files()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List files in the current directory</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>()</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the file names</span></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(files)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "_extensions"                             
 [2] "_quarto.yml"                             
 [3] "about.qmd"                               
 [4] "BSTA_526_W25.Rproj"                      
 [5] "data"                                    
 [6] "docs"                                    
 [7] "function_week"                           
 [8] "function_week.qmd"                       
 [9] "function_week0.qmd"                      
[10] "images"                                  
[11] "index.qmd"                               
[12] "minty_adapt.scss"                        
[13] "readings"                                
[14] "readings.qmd"                            
[15] "resources"                               
[16] "schedule.qmd"                            
[17] "styles.css"                              
[18] "survey_feedback_previous_years_files"    
[19] "survey_feedback_previous_years.qmd"      
[20] "survey_feedback_previous_years.rmarkdown"
[21] "syllabus.qmd"                            
[22] "weeks"                                   
[23] "weeks.qmd"                               </code></pre>
</div>
</div>
<p>This will print the names of all files in the current working directory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="co"># List CSV files in a specific directory</span></span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>csv_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">"path/to/directory"</span>, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.csv$"</span>)</span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the CSV file names</span></span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(csv_files)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
<p>This will print the names of all CSV files in the specified directory.</p>
<p>Overall, <code>list.files()</code> is a handy function for obtaining file names within a directory, providing flexibility through various parameters for customization according to specific needs, such as filtering by pattern or handling file names with non-standard characters.</p>
<p><strong>NOTE</strong> You need to pay attention to your working directory and your relative file paths. See Week 2 or 3 (?) about <code>here</code> package and the discussion about files paths. Best to always use Rprojects and the <code>here</code> package.</p>
</section>
</section>
</section>
<section id="section-2" class="level1">
<h1>2023</h1>
<section id="week-1-2" class="level2">
<h2 class="anchored" data-anchor-id="week-1-2">Week 1</h2>
<section id="pacing" class="level3">
<h3 class="anchored" data-anchor-id="pacing">Pacing</h3>
<p>Mean 3.18, IQR [3,3] so, that’s a good sign, though there was one comment it went a little fast. I admittedly was trying to cram in a lot of basics all at once, so I’ll try to go a touch slower with the hard things.</p>
</section>
<section id="muddiest-points-3" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-3">Muddiest Points</h3>
<p>Remember, all of this is anonymous. I don’t post everything everyone says on here, but I do read them all and think about how to improve the class based on what everyone says.</p>
<blockquote class="blockquote">
<p>Boolean data, until you explained it</p>
</blockquote>
<p>We will talk more about boolean data in class 2, I kind of rushed the intro to that but we’ll definitely see more examples!</p>
<blockquote class="blockquote">
<p>default arguments</p>
</blockquote>
<p>I added this one, I want to make sure to show you the help in R and how we know what the “default” arguments are, that we don’t need to specify.</p>
<blockquote class="blockquote">
<p>removing missing values</p>
</blockquote>
<p>Yes this is a confusing thing in R, one point to remember is the difference between a function like <code>na.omit()</code> and an argument like <code>na.rm = TRUE</code> which sets the missing data behavior within a specific function like <code>mean()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>)</span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="co"># removes missing values, does not save your work!</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="fu">na.omit</span>(myvec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3
attr(,"na.action")
[1] 2
attr(,"class")
[1] "omit"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes missing values, overwrites the object/variable myvec after removing them</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(myvec)</span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>)</span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a><span class="co"># default behavior is to include NA in the computation</span></span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(myvec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specifies that we want to get rid of NA first</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(myvec, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># different functions have different arguments to handle missing data</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="co"># see ?cor for help and the explanation of the use argument</span></span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a>vec1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a>vec2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(vec1, vec2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(vec1, vec2, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cor(vec1, vec2, use = "all.obs") # this throws an error, why?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>Data types and vectors. It was clear, however, when I watched the class recording.</p>
</blockquote>
<p>We will go over this again in class 2 when we talk about data!</p>
<blockquote class="blockquote">
<p>While I was reading the materials about vectors and variables, I’m still not very clear on the differences between vectors and variables. For instance, when we concatenate a list of regions (example from book) and create a vector named “region.” It sounds similar to how we assign values or characters to create a variable</p>
</blockquote>
<p>This is a great point, and I tend to be a little lax with the definitions of some of these terms so apologies if it is confusing.</p>
<p>I would say a variable is the same as an object in R. It is the name of something that we save and that we can see in our environment tab. That means it could be a vector, a data set, a list, a unique object type – all data types we will talk about in the coming classes.</p>
<p>I also use the word “variable” when talking about columns of a data set or data frame, though. Therefore, it’s not a precise word and I’m sorry I use it so much!</p>
<p>A vector is a specific type of object in R. It has a length and a class/type. It does not have a “width” like a data frame does (we will talk about these in class 2). We will also talk about types or classes of vectors (character, numeric, boolean) a bit more in these classes.</p>
<p>For a more thorough introduction, read R for Data Science <a href="https://r4ds.had.co.nz/vectors.html">Vector</a>. If you want a rather advanced treatment of data types, see <a href="https://adv-r.hadley.nz/vectors-chap.html">Advanced R</a>.</p>
<p>As far as naming vectors or data, we often call them something that we can easily remember or make sense of. I think that also can cause confusion though, in the regions example.</p>
<p>This all make more sense once we talk about data frames, which contain vectors as columns!</p>
<blockquote class="blockquote">
<p>packages - why did my R crash?</p>
</blockquote>
<p>Ugh I’m so sorry and I don’t have a clear idea. My best guess is that there were older packages installed and for some reason <code>pacman::p_load</code> tried to install packages without installing their dependencies first <a href="https://stackoverflow.com/questions/31717850/error-package-or-namespace-load-failed-for-ggplot2-and-for-data-table">packages that the installed package relies on to work, and often need at least a certain version</a>. Perhaps if you don’t update your packages all that often, <code>install.packages()</code> is the safer option?</p>
<blockquote class="blockquote">
<p>The options for code blocks in r markdown</p>
</blockquote>
<p>I didn’t talk about this much yet, but I will keep showing examples of this. In the meantime, here are some good references, that I often have to go back to because I forget most of them most of the time:</p>
<p><a href="https://yihui.org/knitr/options/">Chunk options long list</a></p>
<p><a href="https://bookdown.org/yihui/rmarkdown-cookbook/chunk-options.html">R markdown book, chunk options chapter</a></p>
<p>I will also try to mention global options in class 2 as well.</p>
<blockquote class="blockquote">
<p>how to also have an output below my code chuck as well</p>
</blockquote>
<p>I’ll talk about this again/more as well. This is a YAML option, and can be set using the “gear” icon next to the “Knit” button at the top of an Rmd (Chunk Output Inline vs Chunk Output Console). I think we can’t have it both ways. Also note that table output will look different from interactive R markdown and knitted R markdown sometimes. That can be a point of confusion. You can also change how that looks in “Output Options” from that gear dropdown menu (General -&gt; print data frames as:)</p>
<blockquote class="blockquote">
<p>R markdown in general, also R studio projects</p>
</blockquote>
<p>Understandable, I threw a lot of new stuff at most of you, and I’ll focus more on these things in class 2! I haven’t shown you the full benefits of using Rstudio projects yet because we haven’t started working with data. But hopefully class 2 and 3 it will become a bit more clear.</p>
</section>
<section id="clearest-points-4" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-4">Clearest Points</h3>
<p>Lots of things here I’m not including, but, thank you for all of it!</p>
<blockquote class="blockquote">
<p>Concatenate! I have never known what c() stood for!</p>
</blockquote>
<p>It’s a weird one, for sure!</p>
<blockquote class="blockquote">
<p>First time real exposure to R, so I REALLY was amazed by knitting the Rmd and how the class content was all “interactively” set in the Rmd.</p>
</blockquote>
<p>It’s one of the main reasons why I just start using Rmd right away, because it’s pretty neat. It might cause more headaches later because it takes time getting used to, but it’s worth it to me.</p>
</section>
<section id="other-messages-just-a-selection" class="level3">
<h3 class="anchored" data-anchor-id="other-messages-just-a-selection">Other messages, just a selection</h3>
<p>Lots of you liked having challenges. Sometimes I get carried away adding too much instruction because there is so much I want to show you, so I hope I provide enough time for challenges this year.</p>
<blockquote class="blockquote">
<p>i’ve had R experience but it’s difficult for me to quickly learn and adapt to it. I understand how to use it but have difficulty creating things like tables or organizing data. I’m hoping by the end of this course, i’ll be able to gain more knowledge to allow me to do those types of task.</p>
</blockquote>
<p>You are my perfect audience, these are my goals, too!</p>
<blockquote class="blockquote">
<p>After 2 years of just sort of flinging myself at R willy-nilly, the first class showed me a lot of tips for using R that have already made my life easier.</p>
</blockquote>
<p>So happy to hear it!</p>
</section>
</section>
<section id="week-2-1" class="level2">
<h2 class="anchored" data-anchor-id="week-2-1">Week 2</h2>
<section id="muddiest-points-4" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-4">Muddiest Points</h3>
<blockquote class="blockquote">
<p>the benefits of tibble vs data frame and when to use which?</p>
</blockquote>
<p>In this class we will always use tibble. Just remember that an object can be multiple types. A tibble is a data frame, but not vice versa. A tibble is really a data frame with “perks”. See this explanation from the <a href="https://posit.co/blog/tibble-1-0-0/#:~:text=Tibbles%20vs%20data%20frames,to%20work%20with%20large%20data.">tibble 1.0 package release</a></p>
<blockquote class="blockquote">
<p>There are two main differences in the usage of a data frame vs a tibble: printing, and subsetting.</p>
</blockquote>
<blockquote class="blockquote">
<p>Tibbles have a refined print method that shows only the first 10 rows, and all the columns that fit on screen. This makes it much easier to work with large data. In addition to its name, each column reports its type, a nice feature borrowed from <code>str()</code>:</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>mtcars_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars)</span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mtcars_tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>mtcars_tib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 11
     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
 2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
 3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
 4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
 5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
 6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
 7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
 8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
 9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>Another interesting difference is that tibbles don’t have row names, but a lot of built in data.frames in R do. But rownames are hard to get out. So, when you make a tibble of a data.frame you can tell the function to use the rownames as a column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>mtcars_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars, <span class="at">rownames =</span> <span class="st">"car_name"</span>)</span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a>mtcars_tib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 12
   car_name      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Mazda RX4    21       6  160    110  3.9   2.62  16.5     0     1     4     4
 2 Mazda RX4 …  21       6  160    110  3.9   2.88  17.0     0     1     4     4
 3 Datsun 710   22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
 4 Hornet 4 D…  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
 5 Hornet Spo…  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
 6 Valiant      18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
 7 Duster 360   14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
 8 Merc 240D    24.4     4  147.    62  3.69  3.19  20       1     0     4     2
 9 Merc 230     22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
10 Merc 280     19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
# ℹ 22 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Tibbles also clearly delineate [ and [[: [ always returns another tibble, [[ always returns a vector. No more drop = FALSE!</p>
</blockquote>
<p>If we ask for the first column using the <code>[]</code> notation, we receive a numeric vector from a data frame, and a tibble/data.frame from the tibble.</p>
<p>We have not learned the <code>[[]]</code> yet because we have not talked about lists in R, but we will soon. The code below returns the first column as a vector for both a data frame and a tibble.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>mtcars[,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
[16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
[31] 15.0 21.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>mtcars_tib[,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 1
   car_name         
   &lt;chr&gt;            
 1 Mazda RX4        
 2 Mazda RX4 Wag    
 3 Datsun 710       
 4 Hornet 4 Drive   
 5 Hornet Sportabout
 6 Valiant          
 7 Duster 360       
 8 Merc 240D        
 9 Merc 230         
10 Merc 280         
# ℹ 22 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>mtcars[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
[16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
[31] 15.0 21.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>mtcars_tib[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Mazda RX4"           "Mazda RX4 Wag"       "Datsun 710"         
 [4] "Hornet 4 Drive"      "Hornet Sportabout"   "Valiant"            
 [7] "Duster 360"          "Merc 240D"           "Merc 230"           
[10] "Merc 280"            "Merc 280C"           "Merc 450SE"         
[13] "Merc 450SL"          "Merc 450SLC"         "Cadillac Fleetwood" 
[16] "Lincoln Continental" "Chrysler Imperial"   "Fiat 128"           
[19] "Honda Civic"         "Toyota Corolla"      "Toyota Corona"      
[22] "Dodge Challenger"    "AMC Javelin"         "Camaro Z28"         
[25] "Pontiac Firebird"    "Fiat X1-9"           "Porsche 914-2"      
[28] "Lotus Europa"        "Ford Pantera L"      "Ferrari Dino"       
[31] "Maserati Bora"       "Volvo 142E"         </code></pre>
</div>
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mtcars[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mtcars_tib[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mtcars_tib[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>As I was mentioning in class, there are some (older) functions that don’t like tibbles, but all you need to do is just make its primary class a data.frame as such:</p>
<blockquote class="blockquote">
<p>A handful of functions are don’t work with tibbles because they expect df[, 1] to return a vector, not a data frame. If you encounter one of these functions, use as.data.frame() to turn a tibble back to a data frame:</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>mtcars_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(mtcars_tib)</span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mtcars_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>Back to muddy quotes:</p>
<blockquote class="blockquote">
<p>path files and knowing if you’re in a project or just an RMD</p>
</blockquote>
<blockquote class="blockquote">
<p>R markdown vs R projects</p>
</blockquote>
<p>I hope to spend more time talking about this in class 4.</p>
<blockquote class="blockquote">
<p>ggplot stuff was the most muddy, but I also haven’t done a lot of ggplot stuff before</p>
</blockquote>
<p>Yes this was definitely expected for a brief intro, ggplot takes a while to get the hang of! We will use ggplot every class now, so we will go through it in bite sized pieces.</p>
<blockquote class="blockquote">
<p>Using na=“NA” to pull in data and how to know that it’s needed.</p>
</blockquote>
<p>I will show more examples of this. Rule number one of importing data in any software is to <em>look</em> at your data, and figure out if what you see in the software is what you expect. Always look at your data! The <code>read_excel(filename, na="NA")</code> is a strange case that isn’t actually very common to code data as “NA” directly, but I wanted to show you how it looks different when it does happen. Usually, missing data is just a blank space, which is automatically read in as the special <code>NA</code> data type in R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you did not include `na=NA` it would have been read in like this</span></span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="st">"NA"</span>,<span class="st">"C"</span>,<span class="st">"D"</span>), <span class="at">b=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,  <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="st">"NA"</span>))</span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If you did include `na = NA` it would have been read in like this</span></span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="cn">NA</span>,<span class="st">"C"</span>,<span class="st">"D"</span>), <span class="at">b=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="cn">NA</span>))</span>
<span id="cb268-5"><a href="#cb268-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-6"><a href="#cb268-6" aria-hidden="true" tabindex="-1"></a><span class="co"># note the character types of the two DFs, and the way NA is printed</span></span>
<span id="cb268-7"><a href="#cb268-7" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  a         b c    
  &lt;chr&gt; &lt;int&gt; &lt;chr&gt;
1 NA        1 1    
2 C         2 3    
3 D         3 NA   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  a         b     c
  &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;
1 &lt;NA&gt;      1     1
2 C         2     3
3 D         3    NA</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>I saw a lot of code with the two colons (“::”) in the middle. It is unclear to me if this is an alternative way to write some commands or if there is a certain context in which it is used.</p>
</blockquote>
<p>Good question, what this does is pulls a function from a package, so it works whether you have <em>loaded</em> the package (using <code>library()</code> or <code>p_load()</code>) or not. I mainly use it as a clue to you to where the function is coming from. Otherwise, you may not know you need to load that package to use it! For instance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does not work, haven't loaded the package janitor</span></span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(am, cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does work</span></span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">tabyl</span>(am, cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> am 4 6  8
  0 3 4 12
  1 8 3  2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># also works</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(am, cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> am 4 6  8
  0 3 4 12
  1 8 3  2</code></pre>
</div>
</div>
</section>
<section id="clearest-points-5" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-5">Clearest Points</h3>
<blockquote class="blockquote">
<p>skim</p>
</blockquote>
<blockquote class="blockquote">
<p>loading our excel to R studio</p>
</blockquote>
<blockquote class="blockquote">
<p>Loading in the data and selecting the sheets that are most relevant to what we are looking to do was very clear and a nice foundation for future projects. I found that showing different ways of importing the data was helpful.</p>
</blockquote>
<p>I’m glad, the import tool in Rstudio is very nice, just remember to save the code in your Rmd.</p>
<blockquote class="blockquote">
<p>functionality of ggplot</p>
</blockquote>
<blockquote class="blockquote">
<p>tidying the data</p>
</blockquote>
<blockquote class="blockquote">
<p>Found out what eval=TRUE and eval=FALSE mean!</p>
</blockquote>
<p>Great and I’ll show that again for anyone who was confused! (“still a little bit confused about the <code>{r, EVAL}</code> code”)</p>
</section>
<section id="other-messages" class="level3">
<h3 class="anchored" data-anchor-id="other-messages">Other messages</h3>
<p>Some people had trouble getting the <code>fig.path=</code> to work in the knitr options. I’m not sure what could be causing that but feel free to ask me during break.</p>
<p><a href="https://yihui.org/knitr/options/">Here’s a good reference</a> for all the code chunk options, if you want to read about it.</p>
<blockquote class="blockquote">
<p>link to the course website that is in the overview tab in SAKAI links to last years materials.</p>
</blockquote>
<p>Oops thank you great catch, fixed!</p>
<blockquote class="blockquote">
<p>Speed is going great. I’m just worried as we progress through the course, it’ll be more difficult. Overall, really enjoying this class.</p>
</blockquote>
<p>I understand the concern, some things will get more difficult (I’m thinking <code>across()</code> in class 4, writing functions, and <code>purrr</code>), but we will also circle back to some things that might be familiar or maybe less complicated to start (stats models, making tables). Definitely keep asking questions and I will slow down as needed!</p>
</section>
</section>
<section id="week-3-1" class="level2">
<h2 class="anchored" data-anchor-id="week-3-1">Week 3</h2>
<section id="muddiest-points-5" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-5">Muddiest points</h3>
<blockquote class="blockquote">
<p>themes in ggplot</p>
</blockquote>
<p><a href="https://ggplot2-book.org/polishing.html">Check out this reference about ggplot themes first.</a></p>
<p>Here’s a couple examples using this one plot, so you can see how the theme changes the look of the figure, when you use built in themes from the <code>ggplot2</code> package (yes it only works in ggplot figures, for the person who asked about that)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> mpg, <span class="at">y =</span> carb, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb277-4"><a href="#cb277-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb277-5"><a href="#cb277-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"My scatterplot"</span>)</span>
<span id="cb277-6"><a href="#cb277-6" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Here are some built in themes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>However you can make more customized themes or plot changes where you use the <code>theme()</code> function to add in a lot of other elements. You can use this add on function to choose specific parts of the plot that you want to change, like this example from the above reference. Anything specified here will override the built in theme selected first. There are many options, and looking at specific examples will help. I am always, always googling how to change parts of the theme/plot like this, because there are just so many options it’s too hard to remember them all.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb281-3"><a href="#cb281-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb281-4"><a href="#cb281-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">colour =</span> <span class="st">"white"</span>),</span>
<span id="cb281-5"><a href="#cb281-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb281-6"><a href="#cb281-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb281-7"><a href="#cb281-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey70"</span>, <span class="at">size =</span> <span class="fl">0.2</span>),</span>
<span id="cb281-8"><a href="#cb281-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey70"</span>, <span class="at">size =</span> <span class="fl">0.2</span>),</span>
<span id="cb281-9"><a href="#cb281-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb281-10"><a href="#cb281-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.
ℹ Please use the `linewidth` argument instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `size` argument of `element_rect()` is deprecated as of ggplot2 3.4.0.
ℹ Please use the `linewidth` argument instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: A numeric `legend.position` argument in `theme()` was deprecated in ggplot2
3.5.0.
ℹ Please use the `legend.position.inside` argument of `theme()` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-94-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Here’s a simpler example just changing the title (from the above reference):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">colour =</span> <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-95-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-95-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>here()</p>
</blockquote>
<p>Agreed, it’s very confusing, more in class 4!</p>
<blockquote class="blockquote">
<p>Could you please clarify about the use of select(one_of) and the count command that was mentioned in dplyr cheatsheet?</p>
</blockquote>
<p>These are very different, if you are talking about <code>select()</code> vs <code>count()</code>. One thing to note is that since I recorded that class, <code>one_of()</code> has been superseded/replaced by <code>any_of()</code> and <code>all_of()</code>.</p>
<p>First, <code>select()</code> is a function to subset columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we specify the columns we want in the order we want:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(bill_length_mm, island, species, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   bill_length_mm island    species  year
            &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;   &lt;int&gt;
 1           39.1 Torgersen Adelie   2007
 2           39.5 Torgersen Adelie   2007
 3           40.3 Torgersen Adelie   2007
 4           NA   Torgersen Adelie   2007
 5           36.7 Torgersen Adelie   2007
 6           39.3 Torgersen Adelie   2007
 7           38.9 Torgersen Adelie   2007
 8           39.2 Torgersen Adelie   2007
 9           34.1 Torgersen Adelie   2007
10           42   Torgersen Adelie   2007
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>Here, we pass a vector of character names, both of which work:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"bill_length_mm"</span>,<span class="st">"island"</span>,<span class="st">"species"</span>,<span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   bill_length_mm island    species  year
            &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;   &lt;int&gt;
 1           39.1 Torgersen Adelie   2007
 2           39.5 Torgersen Adelie   2007
 3           40.3 Torgersen Adelie   2007
 4           NA   Torgersen Adelie   2007
 5           36.7 Torgersen Adelie   2007
 6           39.3 Torgersen Adelie   2007
 7           38.9 Torgersen Adelie   2007
 8           39.2 Torgersen Adelie   2007
 9           34.1 Torgersen Adelie   2007
10           42   Torgersen Adelie   2007
# ℹ 334 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">"bill_length_mm"</span>,<span class="st">"island"</span>,<span class="st">"species"</span>,<span class="st">"year"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   bill_length_mm island    species  year
            &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;   &lt;int&gt;
 1           39.1 Torgersen Adelie   2007
 2           39.5 Torgersen Adelie   2007
 3           40.3 Torgersen Adelie   2007
 4           NA   Torgersen Adelie   2007
 5           36.7 Torgersen Adelie   2007
 6           39.3 Torgersen Adelie   2007
 7           38.9 Torgersen Adelie   2007
 8           39.2 Torgersen Adelie   2007
 9           34.1 Torgersen Adelie   2007
10           42   Torgersen Adelie   2007
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>This might be useful if we have that character vector already saved from some other data work we are doing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>colnames_needed <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"bill_length_mm"</span>,<span class="st">"island"</span>,<span class="st">"species"</span>,<span class="st">"year"</span>)</span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(colnames_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(colnames_needed)

  # Now:
  data %&gt;% select(all_of(colnames_needed))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   bill_length_mm island    species  year
            &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;   &lt;int&gt;
 1           39.1 Torgersen Adelie   2007
 2           39.5 Torgersen Adelie   2007
 3           40.3 Torgersen Adelie   2007
 4           NA   Torgersen Adelie   2007
 5           36.7 Torgersen Adelie   2007
 6           39.3 Torgersen Adelie   2007
 7           38.9 Torgersen Adelie   2007
 8           39.2 Torgersen Adelie   2007
 9           34.1 Torgersen Adelie   2007
10           42   Torgersen Adelie   2007
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>But the key about <code>any_of</code> and <code>all_of</code> is what it allows. <code>any_of()</code> allows column names that don’t exist! Using no tidyselect helper or <code>all_of()</code> does not allow this. Which you use depends on what you want to allow to happen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a>colnames_needed <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"bill_length_mm"</span>,<span class="st">"island"</span>,<span class="st">"species"</span>,<span class="st">"year"</span>,<span class="st">"MISSING"</span>)</span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="co"># penguins %&gt;% select((colnames_needed)) # does not work</span></span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">any_of</span>(colnames_needed)) <span class="co"># works!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   bill_length_mm island    species  year
            &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;   &lt;int&gt;
 1           39.1 Torgersen Adelie   2007
 2           39.5 Torgersen Adelie   2007
 3           40.3 Torgersen Adelie   2007
 4           NA   Torgersen Adelie   2007
 5           36.7 Torgersen Adelie   2007
 6           39.3 Torgersen Adelie   2007
 7           38.9 Torgersen Adelie   2007
 8           39.2 Torgersen Adelie   2007
 9           34.1 Torgersen Adelie   2007
10           42   Torgersen Adelie   2007
# ℹ 334 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># penguins %&gt;% select(all_of(colnames_needed)) # does not work</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>any_of()</code> is an example of a tidyselect helper, which we will see a lot more of when we start using <code>across()</code> with <code>mutate()</code> and <code>summarize()</code> in class 4. <a href="https://tidyselect.r-lib.org/reference/language.html">See this long list of useful tidyselect functions for more.</a></p>
<p>On the other hand, <code>count()</code> is mainly to count the number of unique values in a column/vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">count</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  species       n
  &lt;fct&gt;     &lt;int&gt;
1 Adelie      152
2 Chinstrap    68
3 Gentoo      124</code></pre>
</div>
</div>
<p>This created a new tibble, that <em>summarizes</em> the species column by counting the number of each type of species. This works for any type of vector but is most useful with character and factor columns. You can also use multiple columns here to see all possible combinations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">count</span>(species, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
  species    year     n
  &lt;fct&gt;     &lt;int&gt; &lt;int&gt;
1 Adelie     2007    50
2 Adelie     2008    50
3 Adelie     2009    52
4 Chinstrap  2007    26
5 Chinstrap  2008    18
6 Chinstrap  2009    24
7 Gentoo     2007    34
8 Gentoo     2008    46
9 Gentoo     2009    44</code></pre>
</div>
</div>
</section>
<section id="clearest-points-6" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-6">Clearest Points</h3>
<blockquote class="blockquote">
<p>filter, select, arrange, pipes</p>
</blockquote>
<p>Super! I want to take the time to mention (and hopefully not confuse everyone) that the pipe has recently (2021) been integrated into “base R”, that is, it’s loaded without loading the tidyverse package. HOWEVER it is this symbol <code>|&gt;</code> and does not behave <em>exactly</em> like the tidyverse pipe <code>%&gt;%</code> (actually from the <code>magrittr</code> package within the <code>tidyverse</code> package). For all the usual uses it works the same, so it could be used interchangeably in this class. Just know that if you see that type of pipe being used, assume it’s doing basically the same thing. <a href="https://r4ds.hadley.nz/workflow-pipes.html">Even R for Data Science is likely moving to use the native/base pipe, see this explanation</a>. Probably next year’s class I will switch everything over to use this, though I still just use <code>%&gt;%</code> in my own work as it’s slightly more flexible for more “advanced” usage.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> <span class="fu">count</span>(species, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
  species    year     n
  &lt;fct&gt;     &lt;int&gt; &lt;int&gt;
1 Adelie     2007    50
2 Adelie     2008    50
3 Adelie     2009    52
4 Chinstrap  2007    26
5 Chinstrap  2008    18
6 Chinstrap  2009    24
7 Gentoo     2007    34
8 Gentoo     2008    46
9 Gentoo     2009    44</code></pre>
</div>
</div>
</section>
<section id="other-messages-1" class="level3">
<h3 class="anchored" data-anchor-id="other-messages-1">Other messages</h3>
<blockquote class="blockquote">
<p>Density ridges are cool!</p>
</blockquote>
<p>I agree!</p>
</section>
</section>
<section id="week-4-1" class="level2">
<h2 class="anchored" data-anchor-id="week-4-1">Week 4</h2>
<section id="muddiest-points-6" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-6">Muddiest points</h3>
<p>I’ve noticed some confusion about what I call “saving your work”, so we’ll go over <a href="https://sph-r-programming-2023.netlify.app/slides/05-saving-objects-vs-summaries">these slides</a>.</p>
<blockquote class="blockquote">
<p>using factors, what you’re doing and the benefit of turning things into factors in mutate</p>
</blockquote>
<p>I usually turn something into a factor for plotting (especially if I have a categorial numeric variable), and we’ll see more examples of that. We also later will see how it matters in statistical modeling/regression. It also is often easier to manage levels/categories this way, as we will see when we talk about the <code>forcats</code> package again in class 6.</p>
<blockquote class="blockquote">
<p>case_when is not easy</p>
</blockquote>
<p>Correct! Also some other comments on wanting more practice with <code>case_when()</code>. We will continue to see examples with this as we finish part5 and in other classes. It’s a very handy function so I use it a lot! See also the <a href="https://www.youtube.com/watch?v=bBfZFasd61c">video above about factors with another explanation</a>.</p>
<blockquote class="blockquote">
<p>The function for converting a vector back from factor to character - I thought I had it, but I didn’t.</p>
</blockquote>
<p>Oh, I didn’t show this!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make a character vector</span></span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"medium"</span>, <span class="st">"low"</span>, <span class="st">"high"</span>, <span class="st">"low"</span>)</span>
<span id="cb307-3"><a href="#cb307-3" aria-hidden="true" tabindex="-1"></a>myvec_fac <span class="ot">&lt;-</span> <span class="fu">factor</span>(myvec)</span>
<span id="cb307-4"><a href="#cb307-4" aria-hidden="true" tabindex="-1"></a>myvec_fac</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] medium low    high   low   
Levels: high low medium</code></pre>
</div>
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(myvec_fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the levels out</span></span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(myvec_fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "high"   "low"    "medium"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb313"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note we can "test" the classes of something like so:</span></span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(myvec_fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(myvec_fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we can change it back</span></span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a>myvec2 <span class="ot">&lt;-</span> <span class="fu">as.character</span>(myvec_fac)</span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a>myvec2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "medium" "low"    "high"   "low"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(myvec2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(myvec2) <span class="co"># no levels, because it's not a factor</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we could also change to numeric, how do you think it picks which number is which?</span></span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a>myvec3 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(myvec_fac)</span>
<span id="cb323-3"><a href="#cb323-3" aria-hidden="true" tabindex="-1"></a>myvec3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 2 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="co"># levels in order is assigned 1, 2, 3</span></span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(myvec_fac, myvec3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         myvec3
myvec_fac 1 2 3
   high   1 0 0
   low    0 2 0
   medium 0 0 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change the level order</span></span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true" tabindex="-1"></a>myvec_fac2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(myvec, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"low"</span>, <span class="st">"medium"</span>, <span class="st">"high"</span>))</span>
<span id="cb327-3"><a href="#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(myvec_fac2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "low"    "medium" "high"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>myvec4 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(myvec_fac2)</span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a>myvec4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 1 3 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(myvec_fac2, myvec4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          myvec4
myvec_fac2 1 2 3
    low    2 0 0
    medium 0 1 0
    high   0 0 1</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>factor vs as.factor</p>
</blockquote>
<p>Essentially the same. From the help documentation <code>?factor</code>: “as.factor coerces its argument to a factor. It is an abbreviated (sometimes faster) form of factor.”</p>
<blockquote class="blockquote">
<p>I would like to know when you recommend that we save a new data set once we create new covariates. Also, it is unclear to me how you add the variable to the existing data.</p>
</blockquote>
<p>If I want to use that column/covariate again, I save it (so almost always, as I don’t often make a column without using it later). I usually save it back into the original data set I’m working with, that is, overwrite that object to be updated with the new column. As long as I keep track of my changes this is definitely ok. It can get confusing having too many versions of a data set floating around. If something is broken, the worst that happens is that you’ll just need to start from the beginning and reload your data (the data file will remain untouched) and re-run the code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-4"><a href="#cb333-4" aria-hidden="true" tabindex="-1"></a><span class="co"># does not save the new column, just prints result</span></span>
<span id="cb333-5"><a href="#cb333-5" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb333-6"><a href="#cb333-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvec =</span> bill_length_mm<span class="sc">/</span>bill_depth_mm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 13
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 7 more variables: sex &lt;fct&gt;, year &lt;int&gt;, long_bill1 &lt;chr&gt;,
#   long_bill2 &lt;chr&gt;, long_bill3 &lt;chr&gt;, long_bill4 &lt;chr&gt;, newvec &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saves new column in a data frame that is called penguins2</span></span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true" tabindex="-1"></a>penguins2 <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb335-3"><a href="#cb335-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvec =</span> bill_length_mm<span class="sc">/</span>bill_depth_mm)</span>
<span id="cb335-4"><a href="#cb335-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(penguins2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 13
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ long_bill1        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill2        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill3        &lt;chr&gt; "short", "short", "medium", "medium", "short", "shor…
$ long_bill4        &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "s…
$ newvec            &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.907767…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(penguins) <span class="co"># has not been changed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 12
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ long_bill1        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill2        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill3        &lt;chr&gt; "short", "short", "medium", "medium", "short", "shor…
$ long_bill4        &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "s…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saves new column in a data frame in the original data frame penguins</span></span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a><span class="co"># *overwrites penguins*</span></span>
<span id="cb339-3"><a href="#cb339-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb339-4"><a href="#cb339-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvec =</span> bill_length_mm<span class="sc">/</span>bill_depth_mm)</span>
<span id="cb339-5"><a href="#cb339-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 13
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ long_bill1        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill2        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill3        &lt;chr&gt; "short", "short", "medium", "medium", "short", "shor…
$ long_bill4        &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "s…
$ newvec            &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.907767…</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>arrange vs filter</p>
</blockquote>
<p><code>arrange</code> orders or sorts your data and does not remove or add anything, while <code>filter</code> removes rows.</p>
</section>
<section id="clearest-points-7" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-7">Clearest points</h3>
<blockquote class="blockquote">
<p>working directory, here reordering factors mutate tibble vs data frame factors filtering</p>
</blockquote>
<p>Glad to hear we’re making progress!</p>
</section>
<section id="other-points" class="level3">
<h3 class="anchored" data-anchor-id="other-points">Other points</h3>
<blockquote class="blockquote">
<p>Is there a list somewhere of all potential colors?</p>
</blockquote>
<p>A couple answers:</p>
<ul>
<li>See <a href="https://www.datanovia.com/en/blog/awesome-list-of-657-r-color-names/">this page for a list of “named” colors in R.</a>, or the <a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/">ggplot2 cookbook for a smaller list</a></li>
<li>We will talk more about palettes when we finish part4 but there are many, many. I suggest finding a package or two that has the palettes you like and working with those. See a bunch listed <a href="https://github.com/EmilHvitfeldt/r-color-palettes">here (scroll down in the readme).</a>. My favorites are <a href="https://github.com/jrnold/ggthemes"><code>ggthemes</code></a> and <a href="https://cran.r-project.org/web/packages/colorBlindness/vignettes/colorBlindness.html"><code>colorBlindness</code></a>.</li>
</ul>
<blockquote class="blockquote">
<p>I’m curious what the best practice is for stringing things together versus breaking them into pieces. For example, if I was trying to make a binary variable where all values were classified as larger or greater than the mean, I could use mean() inside several other functions like mutate(). Alternately I could calculate mean() [meanxx &lt;- mean(xxx)] and save it as an object, and then use the other functions on that value. I’m curious because it seems like if you did too many functions at once and were getting errors, it would be hard to tell what was wrong. But if you did it in a more stepwise fashion, you could see (for example) that mean() wasn’t working because there were NAs in your dataset. More importantly, I think if you were getting an erroneous answer (not an error, but a wrong answer, like if you calculated the mean of a variable but your NA’s were marked with “-88” and so R considered these actual observations) you might not know if you joined too many functions together and didn’t “see” what was happening under the hood. I’m curious how to deal with that.</p>
</blockquote>
<p>I copied over this whole question because I think it is an excellent one, and well said (hope you don’t mind)! I think this is something that evolves as you become more experienced in coding and debugging, and as you find your own style of coding. I will talk some about debugging later, but what you are saying about breaking things up into pieces absolutely helps with that.</p>
<p>The one thing to make sure of is that if you are saving intermediate steps, such as <code>meanxx &lt;- mean(mydata$xx)</code> and using it later, but then you update the data set (filter, replace NAs, fix an incorrect data entry, whatever), you need to make sure to update/re-calculate that mean object as it no longer matches your newer data set! So there is more to keep track of, in that case.</p>
<p>I will say that if you are keeping track of all the steps well, then functionally it does not matter too much, so if it makes things easier to break it up, do that! If you like to chain everything together (often I do) you can run each piece by highlighting the code and running just that part to see what is going on, and this is something I do often.</p>
<p>Your example is something I would probably do, though, as using the mean inside mutate does make me a bit nervous. For example, let’s use median because it’s easier to check my work at the end:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># for tabyl()</span></span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb341-3"><a href="#cb341-3" aria-hidden="true" tabindex="-1"></a><span class="co"># there are NAs in here:</span></span>
<span id="cb341-4"><a href="#cb341-4" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(penguins<span class="sc">$</span>body_mass_g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's save the median as a vector of length 1, remove NAs</span></span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a>tmpmedian <span class="ot">&lt;-</span> <span class="fu">median</span>(penguins<span class="sc">$</span>body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb343-3"><a href="#cb343-3" aria-hidden="true" tabindex="-1"></a>tmpmedian</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4050</code></pre>
</div>
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span></span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb345-3"><a href="#cb345-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">large_mass =</span> <span class="fu">case_when</span>(</span>
<span id="cb345-4"><a href="#cb345-4" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&gt;=</span> tmpmedian <span class="sc">~</span> <span class="st">"yes"</span>,</span>
<span id="cb345-5"><a href="#cb345-5" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&lt;</span> tmpmedian <span class="sc">~</span> <span class="st">"no"</span> <span class="co"># this allows NAs to remain NA</span></span>
<span id="cb345-6"><a href="#cb345-6" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb345-7"><a href="#cb345-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-8"><a href="#cb345-8" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(large_mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> large_mass   n     percent valid_percent
         no 170 0.494186047      0.497076
        yes 172 0.500000000      0.502924
       &lt;NA&gt;   2 0.005813953            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if I had just used median without checking for NAs, they all are NA:</span></span>
<span id="cb347-2"><a href="#cb347-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb347-3"><a href="#cb347-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">large_mass =</span> <span class="dv">1</span><span class="sc">*</span>(body_mass_g <span class="sc">&gt;=</span> <span class="fu">median</span>(body_mass_g))) <span class="sc">%&gt;%</span></span>
<span id="cb347-4"><a href="#cb347-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(large_mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> large_mass   n percent valid_percent
         NA 344       1            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note if I just want females, this no longer makes sense:</span></span>
<span id="cb349-2"><a href="#cb349-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb349-3"><a href="#cb349-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">"female"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb349-4"><a href="#cb349-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb349-5"><a href="#cb349-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">large_mass =</span> <span class="fu">case_when</span>(</span>
<span id="cb349-6"><a href="#cb349-6" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&gt;=</span> tmpmedian <span class="sc">~</span> <span class="st">"yes"</span>,</span>
<span id="cb349-7"><a href="#cb349-7" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&lt;</span> tmpmedian <span class="sc">~</span> <span class="st">"no"</span> <span class="co"># this allows NAs to remain NA</span></span>
<span id="cb349-8"><a href="#cb349-8" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb349-9"><a href="#cb349-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(large_mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> large_mass   n   percent
         no 107 0.6484848
        yes  58 0.3515152</code></pre>
</div>
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="co"># but this would:</span></span>
<span id="cb351-2"><a href="#cb351-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb351-3"><a href="#cb351-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">"female"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb351-4"><a href="#cb351-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb351-5"><a href="#cb351-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">large_mass =</span> <span class="fu">case_when</span>(</span>
<span id="cb351-6"><a href="#cb351-6" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&gt;=</span> <span class="fu">median</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"yes"</span>,</span>
<span id="cb351-7"><a href="#cb351-7" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&lt;</span> <span class="fu">median</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"no"</span> </span>
<span id="cb351-8"><a href="#cb351-8" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb351-9"><a href="#cb351-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(large_mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> large_mass  n   percent
         no 80 0.4848485
        yes 85 0.5151515</code></pre>
</div>
</div>
</section>
</section>
<section id="week-5-1" class="level2">
<h2 class="anchored" data-anchor-id="week-5-1">Week 5</h2>
<section id="muddiest-points-7" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-7">Muddiest points</h3>
<blockquote class="blockquote">
<p>I wasn’t super unclear about it, but just want to be more comfortable using summarize() and across and group_by functions. It looks like these will be really useful for future data projects, so that’s exciting! across function was a bit hazy because screen kept freezing</p>
</blockquote>
<p>Sorry the zoom malfunctioned during this rather important and confusing section!</p>
<p>We will have more practice with <code>across</code> in other sections but the main points I want to get across (ha) are:</p>
<ul>
<li><code>group_by()</code> is used to “group the data” (a.k.a “split”) by a categorical variable, and then all kinds of computations can be done within groups including <code>summarize()</code> but also <code>slice()</code> (such as <code>slice_sample()</code>) and later we will see this with <code>nest()</code> etc.</li>
<li><code>summarize()</code> can be used with or without <code>group_by()</code> to collapse a big data set into a summarized table/data frame/tibble. This is still data, it’s just summarized data. Be careful when you are saving it, don’t overwrite your original data.</li>
<li><code>across()</code> can be used inside <code>mutate()</code> and <code>summarize()</code> to “select” the columns we want to transform/mutate or summarize</li>
<li><code>across()</code> uses what we call “tidyselect” syntax. For explanation and examples you can type <code>?dplyr_tidy_select</code> or go to this <a href="https://tidyselect.r-lib.org/reference/language.html">website.</a></li>
</ul>
<blockquote class="blockquote">
<p>the syntax of .x ~</p>
</blockquote>
<p>We use this when we are creating our own function inside of mutate. Think of algebra, where if we want to add something we might say:</p>
<pre><code>y = x + 3
y = x/10
y = log(x)
y = exp(x)^3 - x/10</code></pre>
<p>This is the same idea, except it’s just written with the special syntax/variable name that R knows how to interpret, where we use <code>.x</code> instead of <code>x</code>:</p>
<pre><code>y = .x + 3
y = .x/10
y = log(.x)
y = exp(.x)^3 - .x/10</code></pre>
<p>But we also need to use <code>~</code> to tell R, here’s a function! and we use the argument name and equal sign <code>.fns =</code> to say, here we are inputting the custom function as the argument input. If you look at the help <code>?across</code> we see this is called “A purrr-style lambda” because we use it in the <code>purrr</code> package functions as well (we will see this later):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="co"># think of this as input to the argument of across()</span></span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true" tabindex="-1"></a><span class="co"># typical argument syntax arg = _____</span></span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true" tabindex="-1"></a>.fns <span class="ot">=</span> <span class="er">~</span> .x<span class="sc">+</span><span class="dv">3</span></span>
<span id="cb355-4"><a href="#cb355-4" aria-hidden="true" tabindex="-1"></a>.fns <span class="ot">=</span> <span class="er">~</span> .x<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb355-5"><a href="#cb355-5" aria-hidden="true" tabindex="-1"></a>.fns <span class="ot">=</span> <span class="er">~</span> <span class="fu">log</span>(.x)</span>
<span id="cb355-6"><a href="#cb355-6" aria-hidden="true" tabindex="-1"></a>.fns <span class="ot">=</span> <span class="er">~</span> <span class="fu">exp</span>(.x)<span class="sc">^</span><span class="dv">3</span> <span class="sc">-</span> .x<span class="sc">/</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And this needs to go inside the nested functions <code>mutate(across())</code> as an argument: <code>mutate(across(.cols = ----, .fns = ----))</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb356"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb356-2"><a href="#cb356-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb356-3"><a href="#cb356-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb356-4"><a href="#cb356-4" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb356-5"><a href="#cb356-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(bill_length_mm, body_mass_g),</span>
<span id="cb356-6"><a href="#cb356-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">exp</span>(.x)<span class="sc">^</span><span class="dv">3</span> <span class="sc">-</span> .x<span class="sc">/</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 14
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;dbl&gt;
 1 Adelie  Torgersen        8.76e50          18.7               181         Inf
 2 Adelie  Torgersen        2.91e51          17.4               186         Inf
 3 Adelie  Torgersen        3.21e52          18                 195         Inf
 4 Adelie  Torgersen       NA                NA                  NA          NA
 5 Adelie  Torgersen        6.54e47          19.3               193         Inf
 6 Adelie  Torgersen        1.60e51          20.6               190         Inf
 7 Adelie  Torgersen        4.81e50          17.8               181         Inf
 8 Adelie  Torgersen        1.18e51          19.6               195         Inf
 9 Adelie  Torgersen        2.68e44          18.1               193         Inf
10 Adelie  Torgersen        5.26e54          20.2               190         Inf
# ℹ 334 more rows
# ℹ 8 more variables: sex &lt;fct&gt;, year &lt;int&gt;, long_bill1 &lt;chr&gt;,
#   long_bill2 &lt;chr&gt;, long_bill3 &lt;chr&gt;, long_bill4 &lt;chr&gt;, newvec &lt;dbl&gt;,
#   large_mass &lt;chr&gt;</code></pre>
</div>
</div>
<p>We can also apply multiple functions by putting them inside a <code>list()</code> and we can give them names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb358"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># here we have 3 functions</span></span>
<span id="cb358-2"><a href="#cb358-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb358-3"><a href="#cb358-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(bill_length_mm, body_mass_g),</span>
<span id="cb358-4"><a href="#cb358-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">.fns =</span> <span class="fu">list</span>(</span>
<span id="cb358-5"><a href="#cb358-5" aria-hidden="true" tabindex="-1"></a>           <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">3</span>,</span>
<span id="cb358-6"><a href="#cb358-6" aria-hidden="true" tabindex="-1"></a>           log, <span class="co"># just using the named function, don't need .x</span></span>
<span id="cb358-7"><a href="#cb358-7" aria-hidden="true" tabindex="-1"></a>           <span class="sc">~</span> <span class="fu">exp</span>(.x)<span class="sc">^</span><span class="dv">3</span> <span class="sc">-</span> .x<span class="sc">/</span><span class="dv">10</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb358-8"><a href="#cb358-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 20
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ long_bill1        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill2        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill3        &lt;chr&gt; "short", "short", "medium", "medium", "short", "shor…
$ long_bill4        &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "s…
$ newvec            &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.907767…
$ large_mass        &lt;chr&gt; "no", "no", "no", NA, "no", "no", "no", "yes", "no",…
$ bill_length_mm_1  &lt;dbl&gt; 13.03333, 13.16667, 13.43333, NA, 12.23333, 13.10000…
$ bill_length_mm_2  &lt;dbl&gt; 3.666122, 3.676301, 3.696351, NA, 3.602777, 3.671225…
$ bill_length_mm_3  &lt;dbl&gt; 8.764814e+50, 2.910021e+51, 3.207767e+52, NA, 6.5436…
$ body_mass_g_1     &lt;dbl&gt; 1250.000, 1266.667, 1083.333, NA, 1150.000, 1216.667…
$ body_mass_g_2     &lt;dbl&gt; 8.229511, 8.242756, 8.086410, NA, 8.146130, 8.202482…
$ body_mass_g_3     &lt;dbl&gt; Inf, Inf, Inf, NA, Inf, Inf, Inf, Inf, Inf, Inf, Inf…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb360"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># here we have the same 3 functions but with names</span></span>
<span id="cb360-2"><a href="#cb360-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb360-3"><a href="#cb360-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(bill_length_mm, body_mass_g),</span>
<span id="cb360-4"><a href="#cb360-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">.fns =</span> <span class="fu">list</span>(</span>
<span id="cb360-5"><a href="#cb360-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fn1 =</span> <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">3</span>,</span>
<span id="cb360-6"><a href="#cb360-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">log =</span> log,</span>
<span id="cb360-7"><a href="#cb360-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">fn2 =</span> <span class="sc">~</span> <span class="fu">exp</span>(.x)<span class="sc">^</span><span class="dv">3</span> <span class="sc">-</span> .x<span class="sc">/</span><span class="dv">10</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb360-8"><a href="#cb360-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 20
$ species            &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Ade…
$ island             &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgers…
$ bill_length_mm     &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1,…
$ bill_depth_mm      &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1,…
$ flipper_length_mm  &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 18…
$ body_mass_g        &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475,…
$ sex                &lt;fct&gt; male, female, female, NA, female, male, female, mal…
$ year               &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 200…
$ long_bill1         &lt;chr&gt; "not long", "not long", "not long", NA, "not long",…
$ long_bill2         &lt;chr&gt; "not long", "not long", "not long", NA, "not long",…
$ long_bill3         &lt;chr&gt; "short", "short", "medium", "medium", "short", "sho…
$ long_bill4         &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "…
$ newvec             &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.90776…
$ large_mass         &lt;chr&gt; "no", "no", "no", NA, "no", "no", "no", "yes", "no"…
$ bill_length_mm_fn1 &lt;dbl&gt; 13.03333, 13.16667, 13.43333, NA, 12.23333, 13.1000…
$ bill_length_mm_log &lt;dbl&gt; 3.666122, 3.676301, 3.696351, NA, 3.602777, 3.67122…
$ bill_length_mm_fn2 &lt;dbl&gt; 8.764814e+50, 2.910021e+51, 3.207767e+52, NA, 6.543…
$ body_mass_g_fn1    &lt;dbl&gt; 1250.000, 1266.667, 1083.333, NA, 1150.000, 1216.66…
$ body_mass_g_log    &lt;dbl&gt; 8.229511, 8.242756, 8.086410, NA, 8.146130, 8.20248…
$ body_mass_g_fn2    &lt;dbl&gt; Inf, Inf, Inf, NA, Inf, Inf, Inf, Inf, Inf, Inf, In…</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>how do we change the names when using across() inside mutate()</p>
</blockquote>
<p>I skipped this for the sake of time and to avoid confusion last class and showed you how to do this using <code>rename()</code> instead, but let’s go over it now a little bit.</p>
<p>The <code>.names</code> argument inside <code>across()</code> uses a function called <code>glue()</code> inside the package <code>glue</code>. We haven’t covered <code>glue</code> package syntax yet (it’s in part9) but think of it as a string concatenating (“gluing”) method where we write out what we want to be in the text string inside quotes, but use variable names and code functions inside of the quotes in a special way. The important part to know right now is that the stuff inside <code>{}</code> is code, and everything else is just text. Here when we use <code>.col</code> inside the glue code that is the stand-in for the column name, so <code>"{.col}"</code> is literally just the column name, and <code>"{.col}_fun"</code> is the column name with “_fun” appended to it.</p>
<p>Here are some simple glue examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb362"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb362-2"><a href="#cb362-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glue</span>(<span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello</code></pre>
</div>
<div class="sourceCode cell-code" id="cb364"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a>myname <span class="ot">&lt;-</span> <span class="st">"jessica"</span></span>
<span id="cb364-2"><a href="#cb364-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-3"><a href="#cb364-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glue</span>(<span class="st">"hello {myname}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello jessica</code></pre>
</div>
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glue</span>(<span class="st">"hello {myname}, how are you?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello jessica, how are you?</code></pre>
</div>
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a>firstname <span class="ot">&lt;-</span> <span class="st">"jane"</span></span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a>lastname <span class="ot">&lt;-</span> <span class="st">"doe"</span></span>
<span id="cb368-3"><a href="#cb368-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glue</span>(<span class="st">"{firstname}_{lastname}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>jane_doe</code></pre>
</div>
</div>
<p>Look at <code>?across</code> and the <code>.names</code> argument for some info and the defaults.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Does not change names of transformed columns</span></span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="co"># no longer accruate since not mm</span></span>
<span id="cb370-3"><a href="#cb370-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb370-4"><a href="#cb370-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb370-5"><a href="#cb370-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">ends_with</span>(<span class="st">"mm"</span>), <span class="at">.fns =</span> <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb370-6"><a href="#cb370-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 14
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 3.91, 3.95, 4.03, NA, 3.67, 3.93, 3.89, 3.92, 3.41, …
$ bill_depth_mm     &lt;dbl&gt; 1.87, 1.74, 1.80, NA, 1.93, 2.06, 1.78, 1.96, 1.81, …
$ flipper_length_mm &lt;dbl&gt; 18.1, 18.6, 19.5, NA, 19.3, 19.0, 18.1, 19.5, 19.3, …
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ long_bill1        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill2        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill3        &lt;chr&gt; "short", "short", "medium", "medium", "short", "shor…
$ long_bill4        &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "s…
$ newvec            &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.907767…
$ large_mass        &lt;chr&gt; "no", "no", "no", NA, "no", "no", "no", "yes", "no",…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adds cm to end of column names, but still has mm, confusing</span></span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb372-3"><a href="#cb372-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb372-4"><a href="#cb372-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">ends_with</span>(<span class="st">"mm"</span>),</span>
<span id="cb372-5"><a href="#cb372-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">.fns =</span> <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb372-6"><a href="#cb372-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">.names =</span> <span class="st">"{.col}_cm"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb372-7"><a href="#cb372-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 17
$ species              &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, A…
$ island               &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torge…
$ bill_length_mm       &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.…
$ bill_depth_mm        &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.…
$ flipper_length_mm    &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, …
$ body_mass_g          &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 347…
$ sex                  &lt;fct&gt; male, female, female, NA, female, male, female, m…
$ year                 &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2…
$ long_bill1           &lt;chr&gt; "not long", "not long", "not long", NA, "not long…
$ long_bill2           &lt;chr&gt; "not long", "not long", "not long", NA, "not long…
$ long_bill3           &lt;chr&gt; "short", "short", "medium", "medium", "short", "s…
$ long_bill4           &lt;chr&gt; "short", "short", "medium", NA, "short", "short",…
$ newvec               &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.907…
$ large_mass           &lt;chr&gt; "no", "no", "no", NA, "no", "no", "no", "yes", "n…
$ bill_length_mm_cm    &lt;dbl&gt; 3.91, 3.95, 4.03, NA, 3.67, 3.93, 3.89, 3.92, 3.4…
$ bill_depth_mm_cm     &lt;dbl&gt; 1.87, 1.74, 1.80, NA, 1.93, 2.06, 1.78, 1.96, 1.8…
$ flipper_length_mm_cm &lt;dbl&gt; 18.1, 18.6, 19.5, NA, 19.3, 19.0, 18.1, 19.5, 19.…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="co"># code inside the {} is evaluated, </span></span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true" tabindex="-1"></a><span class="co"># so we can use stringr::str_remove() to remove what we don't want there</span></span>
<span id="cb374-3"><a href="#cb374-3" aria-hidden="true" tabindex="-1"></a><span class="co"># str_remove_all() also works</span></span>
<span id="cb374-4"><a href="#cb374-4" aria-hidden="true" tabindex="-1"></a><span class="co"># note now we have kept the original columns as well</span></span>
<span id="cb374-5"><a href="#cb374-5" aria-hidden="true" tabindex="-1"></a><span class="co"># note we need single quotes for the glue code because we are wrapping it in</span></span>
<span id="cb374-6"><a href="#cb374-6" aria-hidden="true" tabindex="-1"></a><span class="co"># double quotes already</span></span>
<span id="cb374-7"><a href="#cb374-7" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb374-8"><a href="#cb374-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb374-9"><a href="#cb374-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">ends_with</span>(<span class="st">"mm"</span>),</span>
<span id="cb374-10"><a href="#cb374-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">.fns =</span> <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb374-11"><a href="#cb374-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">.names =</span> <span class="st">"{str_remove(.col,'_mm')}_cm"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb374-12"><a href="#cb374-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 17
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ long_bill1        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill2        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill3        &lt;chr&gt; "short", "short", "medium", "medium", "short", "shor…
$ long_bill4        &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "s…
$ newvec            &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.907767…
$ large_mass        &lt;chr&gt; "no", "no", "no", NA, "no", "no", "no", "yes", "no",…
$ bill_length_cm    &lt;dbl&gt; 3.91, 3.95, 4.03, NA, 3.67, 3.93, 3.89, 3.92, 3.41, …
$ bill_depth_cm     &lt;dbl&gt; 1.87, 1.74, 1.80, NA, 1.93, 2.06, 1.78, 1.96, 1.81, …
$ flipper_length_cm &lt;dbl&gt; 18.1, 18.6, 19.5, NA, 19.3, 19.0, 18.1, 19.5, 19.3, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative that works here is using str_replace()</span></span>
<span id="cb376-2"><a href="#cb376-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb376-3"><a href="#cb376-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb376-4"><a href="#cb376-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">ends_with</span>(<span class="st">"mm"</span>),</span>
<span id="cb376-5"><a href="#cb376-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">.fns =</span> <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb376-6"><a href="#cb376-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">.names =</span> <span class="st">"{str_replace(.col,'_mm', '_cm')}"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb376-7"><a href="#cb376-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 17
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ long_bill1        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill2        &lt;chr&gt; "not long", "not long", "not long", NA, "not long", …
$ long_bill3        &lt;chr&gt; "short", "short", "medium", "medium", "short", "shor…
$ long_bill4        &lt;chr&gt; "short", "short", "medium", NA, "short", "short", "s…
$ newvec            &lt;dbl&gt; 2.090909, 2.270115, 2.238889, NA, 1.901554, 1.907767…
$ large_mass        &lt;chr&gt; "no", "no", "no", NA, "no", "no", "no", "yes", "no",…
$ bill_length_cm    &lt;dbl&gt; 3.91, 3.95, 4.03, NA, 3.67, 3.93, 3.89, 3.92, 3.41, …
$ bill_depth_cm     &lt;dbl&gt; 1.87, 1.74, 1.80, NA, 1.93, 2.06, 1.78, 1.96, 1.81, …
$ flipper_length_cm &lt;dbl&gt; 18.1, 18.6, 19.5, NA, 19.3, 19.0, 18.1, 19.5, 19.3, …</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>It’s unclear to me if there is distinction between using ‘str_remove_all’ and ‘separate()’ when we talked about removing “years old” from the column “age”. Are there particular circumstances where one is preferred over the other?</p>
</blockquote>
<p>In R and in programming in general, there are always multiple ways to do the same thing. Often many, many ways! There is no preferred way just which makes the most sense to you/which you are most comfortable with.</p>
<p>For me, I like to use the <code>stringr</code> functions to remove stuff from columns that I don’t want, because it is the most “clear” to me and also probably to anyone reading my code.</p>
<p>The <code>separate()</code> way is more of a clever trick, an “out of the box” way to use an existing function that works for our needs in this case. There are a lot of things like that, and it’s perfectly ok to use them if you understand what they are doing and why.</p>
<blockquote class="blockquote">
<p>arrange with two variables</p>
</blockquote>
<p>Here’s a simple example so we can see how <code>arrange()</code> works with two categories (this is analogous to sorting by two variables in excel)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb378-2"><a href="#cb378-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb378-3"><a href="#cb378-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">animal =</span> <span class="fu">c</span>(<span class="st">"cat"</span>,<span class="st">"mouse"</span>,<span class="st">"dog"</span>,<span class="st">"cat"</span>),</span>
<span id="cb378-4"><a href="#cb378-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">8</span>),</span>
<span id="cb378-5"><a href="#cb378-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">20</span>))</span>
<span id="cb378-6"><a href="#cb378-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb378-7"><a href="#cb378-7" aria-hidden="true" tabindex="-1"></a>mydata</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
     id animal weight   age
  &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1     1 cat        10    15
2     2 mouse       1     3
3     3 dog        20     3
4     4 cat         8    20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
     id animal weight   age
  &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1     2 mouse       1     3
2     4 cat         8    20
3     1 cat        10    15
4     3 dog        20     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(animal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
     id animal weight   age
  &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1     1 cat        10    15
2     4 cat         8    20
3     3 dog        20     3
4     2 mouse       1     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># arrange by animal first, then weight within animal categories</span></span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(animal, weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
     id animal weight   age
  &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1     4 cat         8    20
2     1 cat        10    15
3     3 dog        20     3
4     2 mouse       1     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does not do anything in this case, but would arrange by age if there were ties in the weight column within the animal category</span></span>
<span id="cb386-2"><a href="#cb386-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(animal, weight, age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
     id animal weight   age
  &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1     4 cat         8    20
2     1 cat        10    15
3     3 dog        20     3
4     2 mouse       1     3</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>stringr::str_to_title()</p>
</blockquote>
<p>Just a clarification:</p>
<p>Remember to read help documentation and look at examples if still not clear!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(<span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(<span class="st">"hello my name is jessica"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello My Name Is Jessica"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(<span class="st">"HELLO MY name is jessica"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello My Name Is Jessica"</code></pre>
</div>
</div>
<p>There are other similar “case conversion” functions as well:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="st">"HELLO MY name is jessica"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HELLO MY NAME IS JESSICA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(<span class="st">"HELLO MY name is jessica"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello my name is jessica"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb398"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_sentence</span>(<span class="st">"HELLO MY name is jessica"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello my name is jessica"</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>stringing together multiple commands in a pipe, which comes first and which functions are safe to put inside other functions- and if so- how do you know what order to put them in.</p>
</blockquote>
<p>You’ll want to put them in the order that you want the operations to be performed.</p>
<p>For instance, if you want to summarize a data set after filtering, then put <code>filter()</code> first then <code>summarize()</code>. When in doubt, don’t string them together just do them one at a time!</p>
<p>Regarding <code>which functions are safe to put inside other functions</code> I am not sure exactly what you mean, but perhaps it’s the <code>summarize(across())</code> type situation that is causing confusion. In this case, the result of <code>across()</code> becomes an argument input for <code>summarize()</code>. We also use functions as arguments inside <code>across()</code>.</p>
<p>This part will require just more experience seeing what functions go where and getting used to all the syntax. I’ll try to point out specific examples where it makes sense to put functions inside other functions, but in general the tidyverse “verbs” such as <code>mutate()</code>, <code>select()</code>, <code>filter()</code>, <code>summarize()</code>, <code>separate()</code>, <code>rename()</code> are done in some kind of order that makes sense for how you want to transform your data, and they are chained together by pipes or done one at a time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb400"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate first</span></span>
<span id="cb400-2"><a href="#cb400-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">bill_length_cm =</span> bill_length_mm<span class="sc">/</span><span class="dv">10</span>)</span>
<span id="cb400-3"><a href="#cb400-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-4"><a href="#cb400-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a filtered data sest of just female penguins</span></span>
<span id="cb400-5"><a href="#cb400-5" aria-hidden="true" tabindex="-1"></a>penguins_f <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">"female"</span>)</span>
<span id="cb400-6"><a href="#cb400-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-7"><a href="#cb400-7" aria-hidden="true" tabindex="-1"></a><span class="co"># we could have mutated *after* filtering in this case, it doesn't matter if we only care about the female penguins</span></span>
<span id="cb400-8"><a href="#cb400-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-9"><a href="#cb400-9" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize that female penguin data set, don't save as anything</span></span>
<span id="cb400-10"><a href="#cb400-10" aria-hidden="true" tabindex="-1"></a><span class="co"># just print it out</span></span>
<span id="cb400-11"><a href="#cb400-11" aria-hidden="true" tabindex="-1"></a>penguins_f <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">across</span>( <span class="co"># across goes inside summarize</span></span>
<span id="cb400-12"><a href="#cb400-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), <span class="co"># where() is a function inside across()</span></span>
<span id="cb400-13"><a href="#cb400-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">.fns =</span> mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `summarize()`.
ℹ In argument: `across(.cols = where(is.numeric), .fns = mean, na.rm = TRUE)`.
Caused by warning:
! The `...` argument of `across()` is deprecated as of dplyr 1.1.0.
Supply arguments directly to `.fns` through an anonymous function instead.

  # Previously
  across(a:b, mean, na.rm = TRUE)

  # Now
  across(a:b, \(x) mean(x, na.rm = TRUE))</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  bill_length_mm bill_depth_mm flipper_length_mm body_mass_g  year newvec
           &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1           42.1          16.4              197.       3862. 2008.   2.61
# ℹ 1 more variable: bill_length_cm &lt;dbl&gt;</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Importing files from other statistical programs, such as SAS and Stata joining tables joining two tables seems scary!</p>
</blockquote>
<p>We will cover these in class 6! We haven’t talked about joining yet, just “stacking” tables with <code>bind_rows()</code>. Hopefully talking about join will make the difference more clear.</p>
<blockquote class="blockquote">
<p>zoom issues, try restarting R?</p>
</blockquote>
<p>Good idea I’ll try that next time! Hope there isn’t a next time…</p>
<p>Whoever had the brilliant idea of “raising hand” during zoom class, definitely do that if you want to get my attention because I can see that but not the chat while teaching, and sometimes the audio in the room forces my computer to go on mute even when I unmute it.</p>
</section>
<section id="clearest-points-8" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-8">Clearest points</h3>
<blockquote class="blockquote">
<p>palettes mutate() case_when() here group_by() and summarize ggplots</p>
</blockquote>
<p>Great, we are getting there!</p>
<blockquote class="blockquote">
<p>The section on color palettes was clearest. It is nice to be given so many options and resources.</p>
</blockquote>
<p>Oh good, I was worried that I spent too much time on this, so glad you find it helpful.</p>
</section>
<section id="other" class="level3">
<h3 class="anchored" data-anchor-id="other">Other</h3>
<blockquote class="blockquote">
<p>When we encounter many categories (eg. 100+) in a variable, how do we plot the top 5% or 10% of the data using ggplot?</p>
</blockquote>
<p>Hmm this is a pretty open ended question and could mean a lot of different things, but initial thought is you mean something like: “we have a lot of categories, we want to only plot a summary (i.e.&nbsp;boxplot) of the 5% most common categories.” It’s a very specific kind of question but I’ll show it in class as an excuse to show more <code>forcats</code> functions with factors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb403"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb403-2"><a href="#cb403-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb403-3"><a href="#cb403-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">500</span>) <span class="co"># set my random seed so the sampling is always the same</span></span>
<span id="cb403-4"><a href="#cb403-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb403-5"><a href="#cb403-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create a data that has uneven number of obs for each country</span></span>
<span id="cb403-6"><a href="#cb403-6" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">prop=</span>.<span class="dv">2</span>) </span>
<span id="cb403-7"><a href="#cb403-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb403-8"><a href="#cb403-8" aria-hidden="true" tabindex="-1"></a><span class="co"># we can see some countries have more observations than others</span></span>
<span id="cb403-9"><a href="#cb403-9" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb403-10"><a href="#cb403-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb403-11"><a href="#cb403-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  country n     percent
             Burkina Faso 6 0.017647059
                  Senegal 6 0.017647059
            Guinea-Bissau 5 0.014705882
                     Mali 5 0.014705882
                Nicaragua 5 0.014705882
    Sao Tome and Principe 5 0.014705882
             Saudi Arabia 5 0.014705882
                   Serbia 5 0.014705882
              Switzerland 5 0.014705882
                  Bolivia 4 0.011764706
                 Botswana 4 0.011764706
                 Cambodia 4 0.011764706
              Congo, Rep. 4 0.011764706
                  Ecuador 4 0.011764706
        Equatorial Guinea 4 0.011764706
                   France 4 0.011764706
                     Iraq 4 0.011764706
              Korea, Rep. 4 0.011764706
                 Mongolia 4 0.011764706
               Montenegro 4 0.011764706
                  Namibia 4 0.011764706
                 Pakistan 4 0.011764706
                 Slovenia 4 0.011764706
             South Africa 4 0.011764706
                   Taiwan 4 0.011764706
      Trinidad and Tobago 4 0.011764706
                  Tunisia 4 0.011764706
                   Turkey 4 0.011764706
       West Bank and Gaza 4 0.011764706
               Bangladesh 3 0.008823529
 Central African Republic 3 0.008823529
                  Comoros 3 0.008823529
            Cote d'Ivoire 3 0.008823529
           Czech Republic 3 0.008823529
       Dominican Republic 3 0.008823529
              El Salvador 3 0.008823529
                 Ethiopia 3 0.008823529
                  Germany 3 0.008823529
                  Iceland 3 0.008823529
                    India 3 0.008823529
                Indonesia 3 0.008823529
                    Italy 3 0.008823529
                    Japan 3 0.008823529
                    Kenya 3 0.008823529
                   Kuwait 3 0.008823529
                  Lebanon 3 0.008823529
                  Lesotho 3 0.008823529
               Madagascar 3 0.008823529
                   Malawi 3 0.008823529
               Mauritania 3 0.008823529
               Mozambique 3 0.008823529
                  Myanmar 3 0.008823529
                    Nepal 3 0.008823529
                    Niger 3 0.008823529
                     Oman 3 0.008823529
                 Paraguay 3 0.008823529
                   Rwanda 3 0.008823529
             Sierra Leone 3 0.008823529
                  Somalia 3 0.008823529
                Sri Lanka 3 0.008823529
                 Thailand 3 0.008823529
                     Togo 3 0.008823529
                   Uganda 3 0.008823529
                  Vietnam 3 0.008823529
                 Zimbabwe 3 0.008823529
                   Angola 2 0.005882353
                Argentina 2 0.005882353
                  Austria 2 0.005882353
                  Bahrain 2 0.005882353
                 Bulgaria 2 0.005882353
                  Burundi 2 0.005882353
                 Cameroon 2 0.005882353
                    Chile 2 0.005882353
                    China 2 0.005882353
                 Colombia 2 0.005882353
         Congo, Dem. Rep. 2 0.005882353
                  Denmark 2 0.005882353
                 Djibouti 2 0.005882353
                    Egypt 2 0.005882353
                  Finland 2 0.005882353
                    Ghana 2 0.005882353
                   Guinea 2 0.005882353
                    Haiti 2 0.005882353
                  Hungary 2 0.005882353
                  Jamaica 2 0.005882353
                   Jordan 2 0.005882353
         Korea, Dem. Rep. 2 0.005882353
                  Liberia 2 0.005882353
                    Libya 2 0.005882353
                   Mexico 2 0.005882353
                   Norway 2 0.005882353
                     Peru 2 0.005882353
              Philippines 2 0.005882353
              Puerto Rico 2 0.005882353
                  Reunion 2 0.005882353
                Singapore 2 0.005882353
          Slovak Republic 2 0.005882353
                    Spain 2 0.005882353
                    Sudan 2 0.005882353
                   Sweden 2 0.005882353
                    Syria 2 0.005882353
                 Tanzania 2 0.005882353
                  Uruguay 2 0.005882353
                Venezuela 2 0.005882353
              Afghanistan 1 0.002941176
                  Belgium 1 0.002941176
                    Benin 1 0.002941176
   Bosnia and Herzegovina 1 0.002941176
                   Canada 1 0.002941176
                     Chad 1 0.002941176
               Costa Rica 1 0.002941176
                  Croatia 1 0.002941176
                     Cuba 1 0.002941176
                    Gabon 1 0.002941176
                   Gambia 1 0.002941176
                   Greece 1 0.002941176
                Guatemala 1 0.002941176
                 Honduras 1 0.002941176
                     Iran 1 0.002941176
                  Ireland 1 0.002941176
                   Israel 1 0.002941176
                Mauritius 1 0.002941176
                  Morocco 1 0.002941176
              Netherlands 1 0.002941176
              New Zealand 1 0.002941176
                   Poland 1 0.002941176
                 Portugal 1 0.002941176
                  Romania 1 0.002941176
                Swaziland 1 0.002941176
           United Kingdom 1 0.002941176
              Yemen, Rep. 1 0.002941176
                  Albania 0 0.000000000
                  Algeria 0 0.000000000
                Australia 0 0.000000000
                   Brazil 0 0.000000000
                  Eritrea 0 0.000000000
         Hong Kong, China 0 0.000000000
                 Malaysia 0 0.000000000
                  Nigeria 0 0.000000000
                   Panama 0 0.000000000
            United States 0 0.000000000
                   Zambia 0 0.000000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note country is a factor</span></span>
<span id="cb405-2"><a href="#cb405-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 340
Columns: 6
$ country   &lt;fct&gt; "Slovenia", "Denmark", "Djibouti", "Paraguay", "Japan", "Pue…
$ continent &lt;fct&gt; Europe, Europe, Africa, Americas, Asia, Americas, Asia, Euro…
$ year      &lt;int&gt; 1962, 1962, 2002, 1972, 1982, 2007, 1962, 1977, 1977, 1977, …
$ lifeExp   &lt;dbl&gt; 69.150, 72.350, 53.373, 65.815, 77.110, 78.746, 39.393, 59.5…
$ pop       &lt;int&gt; 1582962, 4646899, 447416, 2614104, 118454974, 3942491, 10332…
$ gdpPercap &lt;dbl&gt; 7402.3034, 13583.3135, 1908.2609, 2523.3380, 19384.1057, 193…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If we only want the categories with at least 5 levels, for example, we could lump everything else into an "other" category:</span></span>
<span id="cb407-2"><a href="#cb407-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb407-3"><a href="#cb407-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> mydata <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">country_lump =</span> <span class="fu">fct_lump_min</span>(country, <span class="at">min=</span><span class="dv">5</span>))</span>
<span id="cb407-4"><a href="#cb407-4" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(country_lump)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          country_lump   n    percent
          Burkina Faso   6 0.01764706
         Guinea-Bissau   5 0.01470588
                  Mali   5 0.01470588
             Nicaragua   5 0.01470588
 Sao Tome and Principe   5 0.01470588
          Saudi Arabia   5 0.01470588
               Senegal   6 0.01764706
                Serbia   5 0.01470588
           Switzerland   5 0.01470588
                 Other 293 0.86176471</code></pre>
</div>
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot all countries</span></span>
<span id="cb409-2"><a href="#cb409-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mydata, <span class="fu">aes</span>(<span class="at">x=</span>country, <span class="at">y=</span>lifeExp, <span class="at">color =</span> year)) <span class="sc">+</span></span>
<span id="cb409-3"><a href="#cb409-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb409-4"><a href="#cb409-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-117-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot just the most common ones</span></span>
<span id="cb410-2"><a href="#cb410-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mydata, <span class="fu">aes</span>(<span class="at">x=</span>country_lump, <span class="at">y=</span>lifeExp, <span class="at">color =</span> year)) <span class="sc">+</span></span>
<span id="cb410-3"><a href="#cb410-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb410-4"><a href="#cb410-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-117-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb411"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the other category</span></span>
<span id="cb411-2"><a href="#cb411-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mydata <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country_lump<span class="sc">!=</span><span class="st">"Other"</span>), </span>
<span id="cb411-3"><a href="#cb411-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>country_lump, <span class="at">y=</span>lifeExp, <span class="at">color =</span> year)) <span class="sc">+</span></span>
<span id="cb411-4"><a href="#cb411-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb411-5"><a href="#cb411-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-117-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot in order of number of observations</span></span>
<span id="cb412-2"><a href="#cb412-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mydata<span class="sc">$</span>country_lump)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Burkina Faso"          "Guinea-Bissau"         "Mali"                 
 [4] "Nicaragua"             "Sao Tome and Principe" "Saudi Arabia"         
 [7] "Senegal"               "Serbia"                "Switzerland"          
[10] "Other"                </code></pre>
</div>
<div class="sourceCode cell-code" id="cb414"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this relevels the factor in order of frequency:</span></span>
<span id="cb414-2"><a href="#cb414-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> mydata <span class="sc">%&gt;%</span> </span>
<span id="cb414-3"><a href="#cb414-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country_lump =</span> <span class="fu">fct_infreq</span>(country_lump))</span>
<span id="cb414-4"><a href="#cb414-4" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mydata<span class="sc">$</span>country_lump)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Other"                 "Burkina Faso"          "Senegal"              
 [4] "Guinea-Bissau"         "Mali"                  "Nicaragua"            
 [7] "Sao Tome and Principe" "Saudi Arabia"          "Serbia"               
[10] "Switzerland"          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="co"># now plotting order has changed</span></span>
<span id="cb416-2"><a href="#cb416-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mydata, <span class="fu">aes</span>(<span class="at">x=</span>country_lump, <span class="at">y=</span>lifeExp, <span class="at">color =</span> year)) <span class="sc">+</span></span>
<span id="cb416-3"><a href="#cb416-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb416-4"><a href="#cb416-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_feedback_previous_years_files/figure-html/unnamed-chunk-117-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="week-6" class="level2">
<h2 class="anchored" data-anchor-id="week-6">Week 6</h2>
<section id="muddiest-points-8" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-8">Muddiest Points</h3>
<p>Somewhat equal numbers said that pivot/joining were clear or were muddy! I think that sounds about right, though, these concepts are tricky and will take a lot of practice. Today’s class will use these methods again and I hope that will help solidify what you’ve learned.</p>
<p>I really do recommend watching the short video that I recommended last class if you’re still having trouble with grasping pivoting.</p>
<p><a href="https://youtu.be/4ZIFb1BoIB4">Dr.&nbsp;Kelly Bodwin’s Reshaping Data Video</a></p>
<p>For a short version, watch the <a href="https://youtu.be/4ZIFb1BoIB4?t=365">pivot_longer excerpt</a> about “working backwards” from a plot. Then watch the <a href="https://youtu.be/4ZIFb1BoIB4?t=620">pivot_wider excerpt</a></p>
<p><a href="https://stat545.com/join-cheatsheet.html">Also read this join cheatsheet</a> for some good explanations/examples about which join to use when!</p>
<p><a href="https://nyu-cdsc.github.io/learningr/assets/data-transformation.pdf">The rstudio cheatsheet is also good.</a></p>
<p>Definitely do the readings in the R for Data Science in the appropriate chapters as well! <a href="https://r4ds.had.co.nz/relational-data.html">joining</a>, <a href="https://r4ds.had.co.nz/tidy-data.html?#pivoting">pivoting</a></p>
<p>For the different join types, here are some visuals I find helpful.</p>
<p>When we use <code>bind_rows()</code> we stack cases on top of each other like so:</p>
<p><img src="./img/bind_rows_add.png" alt="" width="70%" height="40%"></p>
<p>For joins, we put columns next to each other based on matching keys. The “intersection” of keys is shown in these diagrams for each type of join, with the blue denoting which keys/rows we keep from which table:</p>
<p><img src="./img/dplyr_join_venn.png" alt="" width="70%" height="70%"></p>
<p>A more data oriented visual is shown below. The lines denote the keys that match:</p>
<p><img src="./img/joins_colors.png" alt=""></p>
<p>This is from the part5 Rmd:</p>
<section id="when-do-we-use-which-join" class="level4">
<h4 class="anchored" data-anchor-id="when-do-we-use-which-join">When do we use which join?</h4>
<p>See this <a href="https://dplyr.tidyverse.org/articles/two-table.html">two-table verbs vignette</a> and this <a href="https://stat545.com/join-cheatsheet.html">cheatsheet</a> for some extra explanations.</p>
<p>These joins are created to match SQL joins for databases.</p>
<ul>
<li><code>inner_join</code> = You only want data that is in both tables</li>
<li><code>left_join</code> = You only want data that is in one table.
<ul>
<li>Often the right table is a subset of the left table, so it’s easy to use this to keep everything in the bigger table, and join on the smaller table</li>
<li>If the left table contains a cohort of interest, i.e.&nbsp;everyone that has been given a specific treatment, and you want to get their lab values from another table, use <code>left_join()</code> to add those lab values in the cohort defined by the left table</li>
</ul></li>
<li><code>right_join</code> = maybe never
<ul>
<li><code>right_join</code> does the same thing as <code>left_join</code> but backwards, I find left join easier to think about (personal preference)</li>
</ul></li>
<li><code>full_join</code> = does not remove any rows, you might want to use this as your default and filter later</li>
<li><code>anti_join</code> and <code>semi_join</code> = filtering joins, probably use rarely, use right table as an exclusion criteria and find unmatched keys between two tables (<code>anti_join</code>), or filter left table based on keys in right table (<code>semi_join</code>), and keep only columns from left table</li>
</ul>
</section>
<section id="separate-example" class="level4">
<h4 class="anchored" data-anchor-id="separate-example">separate example</h4>
<blockquote class="blockquote">
<p>separate(), needed a few more minutes to get it figured out</p>
</blockquote>
<p>Let’s do another short example!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb417"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb417-2"><a href="#cb417-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb417-3"><a href="#cb417-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb417-4"><a href="#cb417-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"Doe, Jane"</span>, <span class="st">"Smith, M"</span>, <span class="st">"Lee, Dave"</span>),</span>
<span id="cb417-5"><a href="#cb417-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">rx =</span> <span class="fu">c</span>(<span class="st">"Advil; 4.5 mg"</span>, <span class="st">"Tylenol; 300mg"</span>, <span class="st">"Advil; 2.5 mg"</span>)</span>
<span id="cb417-6"><a href="#cb417-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb417-7"><a href="#cb417-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb417-8"><a href="#cb417-8" aria-hidden="true" tabindex="-1"></a><span class="co"># obviously the dosage makes no sense, but, for sake of example</span></span>
<span id="cb417-9"><a href="#cb417-9" aria-hidden="true" tabindex="-1"></a>mydata</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name      rx            
  &lt;chr&gt;     &lt;chr&gt;         
1 Doe, Jane Advil; 4.5 mg 
2 Smith, M  Tylenol; 300mg
3 Lee, Dave Advil; 2.5 mg </code></pre>
</div>
<div class="sourceCode cell-code" id="cb419"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints a little prettier in html</span></span>
<span id="cb419-2"><a href="#cb419-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">rx</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Doe, Jane</td>
<td style="text-align: left;">Advil; 4.5 mg</td>
</tr>
<tr class="even">
<td style="text-align: left;">Smith, M</td>
<td style="text-align: left;">Tylenol; 300mg</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lee, Dave</td>
<td style="text-align: left;">Advil; 2.5 mg</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb420"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="co"># by default, separates using most special/non-alphanumeric characters</span></span>
<span id="cb420-2"><a href="#cb420-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb420-3"><a href="#cb420-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"last_name"</span>, <span class="st">"first_name"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  last_name first_name rx            
  &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;         
1 Doe       Jane       Advil; 4.5 mg 
2 Smith     M          Tylenol; 300mg
3 Lee       Dave       Advil; 2.5 mg </code></pre>
</div>
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># since there are special characters in rx, will need to be more specific</span></span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true" tabindex="-1"></a><span class="co"># note it tried to split on the . since we only have 2 columns named, it removed the rest</span></span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb422-4"><a href="#cb422-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rx, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"rx_name"</span>, <span class="st">"rx_dose"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 2 pieces. Additional pieces discarded in 2 rows [1, 3].</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name      rx_name rx_dose
  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  
1 Doe, Jane Advil   4      
2 Smith, M  Tylenol 300mg  
3 Lee, Dave Advil   2      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb425"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if we add in some more columns, we can see it's splitting based on ; . and space!</span></span>
<span id="cb425-2"><a href="#cb425-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb425-3"><a href="#cb425-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rx, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"rx_name"</span>, <span class="st">"rx_dose"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 5 pieces. Missing pieces filled with `NA` in 3 rows [1, 2,
3].</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  name      rx_name rx_dose a     b     c    
  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 Doe, Jane Advil   4       5     mg    &lt;NA&gt; 
2 Smith, M  Tylenol 300mg   &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
3 Lee, Dave Advil   2       5     mg    &lt;NA&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="co"># still have a space</span></span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rx, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"rx_name"</span>, <span class="st">"rx_dose"</span>), <span class="at">sep=</span><span class="st">";"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name      rx_name rx_dose  
  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;    
1 Doe, Jane Advil   " 4.5 mg"
2 Smith, M  Tylenol " 300mg" 
3 Lee, Dave Advil   " 2.5 mg"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb430"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removed the space</span></span>
<span id="cb430-2"><a href="#cb430-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb430-3"><a href="#cb430-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rx, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"rx_name"</span>, <span class="st">"rx_dose"</span>), <span class="at">sep=</span><span class="st">"; "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name      rx_name rx_dose
  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  
1 Doe, Jane Advil   4.5 mg 
2 Smith, M  Tylenol 300mg  
3 Lee, Dave Advil   2.5 mg </code></pre>
</div>
<div class="sourceCode cell-code" id="cb432"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb432-1"><a href="#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removed the space, let's also remove the mg</span></span>
<span id="cb432-2"><a href="#cb432-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb432-3"><a href="#cb432-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rx, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"rx_name"</span>, <span class="st">"rx_dose_mg"</span>), <span class="at">sep=</span><span class="st">"; "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb432-4"><a href="#cb432-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rx_dose_mg =</span> <span class="fu">str_remove_all</span>(rx_dose_mg, <span class="st">"mg"</span>),</span>
<span id="cb432-5"><a href="#cb432-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">rx_dose_mg =</span> <span class="fu">as.numeric</span>(rx_dose_mg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name      rx_name rx_dose_mg
  &lt;chr&gt;     &lt;chr&gt;        &lt;dbl&gt;
1 Doe, Jane Advil          4.5
2 Smith, M  Tylenol      300  
3 Lee, Dave Advil          2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb434"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb434-1"><a href="#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all together, and also leave the name column in</span></span>
<span id="cb434-2"><a href="#cb434-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb434-3"><a href="#cb434-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"last_name"</span>, <span class="st">"first_name"</span>), <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb434-4"><a href="#cb434-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rx, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"rx_name"</span>, <span class="st">"rx_dose_mg"</span>), <span class="at">sep=</span><span class="st">"; "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb434-5"><a href="#cb434-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rx_dose_mg =</span> <span class="fu">str_remove_all</span>(rx_dose_mg, <span class="st">"mg"</span>),</span>
<span id="cb434-6"><a href="#cb434-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">rx_dose_mg =</span> <span class="fu">as.numeric</span>(rx_dose_mg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  name      last_name first_name rx_name rx_dose_mg
  &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;        &lt;dbl&gt;
1 Doe, Jane Doe       Jane       Advil          4.5
2 Smith, M  Smith     M          Tylenol      300  
3 Lee, Dave Lee       Dave       Advil          2.5</code></pre>
</div>
</div>
</section>
</section>
<section id="other-piping-troubles" class="level3">
<h3 class="anchored" data-anchor-id="other-piping-troubles">Other: piping troubles</h3>
<blockquote class="blockquote">
<p>I have issues with my pipes where I think I’m putting things in the wrong order and nothing happens- I don’t get errors I can google, it just doesn’t work. Most often it’s when I end a pipe with %&gt;% tabyl(variable), maybe that is a no-no? But I’ve found I end up having to break pipes into multiple pieces because I can’t string them together the right way.</p>
</blockquote>
<blockquote class="blockquote">
<p>I have a hard time understanding when to pipe things together or knowing when to nest a function as well. I’m glad you’ve reassured us in class that it’s ok that we put our functions into pieces. I think that eases the stress with learning as I feel like trying to make everything happen in one command can be very overwhelming.</p>
</blockquote>
<p>Yes, yes! Please separate out your pipes/commands if it makes things more clear or makes it work better for you!</p>
<p>I’m not sure what’s happening with the no-errors-broken situation. I will say that I often separate the <code>taybl(variable)</code> code when I’m doing analysis work, just because I am saving intermediate data sets after data cleaning or sub-setting and don’t want to save that tabyl. Something like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb436"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb436-2"><a href="#cb436-2" aria-hidden="true" tabindex="-1"></a>mtcars6 <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> <span class="fu">filter</span>(cyl<span class="sc">==</span><span class="dv">6</span>)</span>
<span id="cb436-3"><a href="#cb436-3" aria-hidden="true" tabindex="-1"></a><span class="co"># check that it worked</span></span>
<span id="cb436-4"><a href="#cb436-4" aria-hidden="true" tabindex="-1"></a>mtcars6 <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> cyl n percent
   6 7       1</code></pre>
</div>
</div>
<p>As a beginner I definitely think doing each step individually and seeing the result and (saving it/assigning it appropriately!) is the way to learn what each function does. I tend to string things together because I am used to doing that, but I’ll try not to do that so much if it’s adding confusion.</p>
</section>
</section>
<section id="week-7" class="level2">
<h2 class="anchored" data-anchor-id="week-7">Week 7</h2>
<section id="muddiest-parts" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-parts">Muddiest Parts</h3>
<p>Still some pain points related to <code>pivot_</code>-ing. I get it, it took me a long time to get comfortable with this (and I’ve gone through multiple function and argument transformations from <code>melt()</code> to <code>gather()</code> to <code>pivot_longer()</code> etc, all those transitions were hard!). We might not see many more examples with this because we have so much more to cover, but keep practicing, and ask for help when you need it! Relatedly:</p>
<blockquote class="blockquote">
<p>pivot_longer is so versatile for data manipulation but sometimes it’s contains many arguments</p>
</blockquote>
<blockquote class="blockquote">
<p>When ever I use pivot_longer and pivot_wider I get the columns that are being switched wrong.Is there a way you think about it that helps you sort out which is which? The Stata manual uses this ‘i’ and ‘j’ notation that’s helping when I’m working in Stata, but I haven’t found an easy way to work with those functions in R.</p>
</blockquote>
<p>The argument names have changed a lot since I started pivoting with the tidyverse, but now they are using <code>names_to=</code> because the authors think this makes more sense, and I tend to agree. This argument name helps me figure out what to do more than old versions. I think of this argument as “column names turn into one column called = X” or send the “names” of these columns “to” this new column. Therefore, I need to specify which <code>cols=</code> are the column names going into <code>names_to=</code></p>
<p>Then, when we go to <code>pivot_wider()</code> we get <code>names_from=</code> which is asking, where are the column names coming from? Also, <code>values_from=</code> which is asking, where are the actual values coming from? Pivot wider to me is easier because we don’t need to specify any other information than those two pieces (you can optionally specify <code>id_cols=</code> but the default is just to use all the other columns that you’re not pivoting). Pivot wider is tricky, however, in that you do need just one value for each combination of id columns.</p>
<p>If you’re still having trouble, you’re not alone, <a href="https://www.infoworld.com/article/3637083/never-look-up-tidyrs-pivotwider-or-pivotlonger-again.html">look at this article on how to create a code snippet that pops up to tell you exactly what to do, every time:</a> (and there’s more about what “snippets” are in that article).</p>
<pre><code>snippet plonger
    pivot_longer(${1:mydf},
                 cols = ${2:columns to pivot long},
                 names_to = "${3:desired name for category column}",
                 values_to = "${4:desired name for value column}"
    )</code></pre>
<blockquote class="blockquote">
<p>I struggled with the pivoting of tables on assignment #5, and still have some trouble wrapping my head around it– especially when we pivoted the long table back to wide but with different column names.</p>
</blockquote>
<p>One difficult thing to grasp about pivoting is the idea of pivoting long, and then even longer (doubly long?), and then back again to wide but in a different way, with different information in the columns. This takes a <em>lot</em> of practice to get there without a lot of struggle. After you have done this many times you’ll be better able to see what you need out of the data frame and how to get it there. I wish we had more time to just pivot things in all sorts of ways, because it’s a powerful form of data manipulation!</p>
<blockquote class="blockquote">
<p>Faceting in ggplot I need to play with setting plot scales to actual values with “free_x/free_y”</p>
</blockquote>
<p>This is something I think you’ll need to “play around with” to just, try some things and see how it affects the plot. The homework faceting is similar to the example plot we did in class last week, but, there’s a lot more you can do with faceting and it’s a very powerful way to display data. The <code>ggplot2</code> book’s <a href="https://ggplot2-book.org/facet.html">Faceting chapter</a> is a nice review of this.</p>
<p>I’ve also been meaning to mention that the ggplot2 package website has useful FAQs on lots of tricky subjects. <a href="https://ggplot2.tidyverse.org/articles/faq-faceting.html">Here’s the faceting one.</a></p>
<blockquote class="blockquote">
<p>Reading the vignette for summarize and list. Can you explain how to read this vignette.</p>
</blockquote>
<p>Sorry I couldn’t figure out which vignette you were talking about here, could you send me the link? Or maybe you are looking for a link… Usually if I mention a vignette in class I have the link the Rmd/html file. Otherwise, the best way to find package vignettes is by going to the package website. Most of the tidyverse packages have a website, and the vignettes will often be in the “Articles” drop down. For instance, <a href="https://dplyr.tidyverse.org/articles/index.html">here’s dplyr’s website and list of articles/vignettes</a>, but I don’t see one on summarize/lists! You can also see vignettes in the CRAN package’s website usually, for instance here’s <a href="https://cran.r-project.org/web/packages/dplyr/index.html">dplyr</a></p>
<blockquote class="blockquote">
<p>Can we go over how to create a summary table with percentages using summary and across?</p>
</blockquote>
<p>This depends on exactly what you want to do. I might use one of the fancier functions like <code>gtsummary::tbl_summary()</code> or <code>table1::table1</code> for a true “summary table” of all my categorical variables, but we can see how this would work with <code>summarize()</code> “by hand”. We are going to see in part6 some examples with <code>tabyl</code>, as well.</p>
<p>Here’s an example just with summarize:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb439"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb439-4"><a href="#cb439-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-5"><a href="#cb439-5" aria-hidden="true" tabindex="-1"></a><span class="co"># First with tabyl, using adorn_ (which we will see in part6 today)</span></span>
<span id="cb439-6"><a href="#cb439-6" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb439-7"><a href="#cb439-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(species, sex) <span class="sc">%&gt;%</span></span>
<span id="cb439-8"><a href="#cb439-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">%&gt;%</span></span>
<span id="cb439-9"><a href="#cb439-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   species female  male  NA_
    Adelie  48.0% 48.0% 3.9%
 Chinstrap  50.0% 50.0% 0.0%
    Gentoo  46.8% 49.2% 4.0%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb441"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># try to get the same information with summarize:</span></span>
<span id="cb441-2"><a href="#cb441-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb441-3"><a href="#cb441-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb441-4"><a href="#cb441-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pct_male =</span> <span class="fu">sum</span>(sex<span class="sc">==</span><span class="st">"male"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">length</span>(sex),</span>
<span id="cb441-5"><a href="#cb441-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">pct_female =</span> <span class="fu">sum</span>(sex<span class="sc">==</span><span class="st">"female"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">length</span>(sex),</span>
<span id="cb441-6"><a href="#cb441-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">pct_NA =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(sex), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">length</span>(sex)) <span class="sc">%&gt;%</span></span>
<span id="cb441-7"><a href="#cb441-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span>.x<span class="sc">*</span><span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  species   pct_male pct_female pct_NA
  &lt;fct&gt;        &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
1 Adelie        48.0       48.0   3.95
2 Chinstrap     50         50     0   
3 Gentoo        49.2       46.8   4.03</code></pre>
</div>
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mean also works:</span></span>
<span id="cb443-2"><a href="#cb443-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb443-3"><a href="#cb443-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb443-4"><a href="#cb443-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pct_male =</span> <span class="fu">mean</span>(sex<span class="sc">==</span><span class="st">"male"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb443-5"><a href="#cb443-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">pct_female =</span> <span class="fu">mean</span>(sex<span class="sc">==</span><span class="st">"female"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb443-6"><a href="#cb443-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">pct_NA =</span> <span class="fu">mean</span>(<span class="fu">is.na</span>(sex), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb443-7"><a href="#cb443-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span>.x<span class="sc">*</span><span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  species   pct_male pct_female pct_NA
  &lt;fct&gt;        &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
1 Adelie        50         50     3.95
2 Chinstrap     50         50     0   
3 Gentoo        51.3       48.7   4.03</code></pre>
</div>
</div>
<p>But it’s hard to generalize that specific <code>summarize</code> to other columns with <code>across()</code>, because nothing else has the category “male”, “female”. You’d need your data to be in quite a particular format, so I think this not something you’ll commonly do. You could calculate proportion missing, though, which is a similar idea:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb445"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb445-2"><a href="#cb445-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="at">.fns=</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="fu">is.na</span>(.x))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 15
  species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;      &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
1 Adelie         0        0.00658       0.00658           0.00658     0.00658
2 Chinstrap      0        0             0                 0           0      
3 Gentoo         0        0.00806       0.00806           0.00806     0.00806
# ℹ 9 more variables: sex &lt;dbl&gt;, year &lt;dbl&gt;, long_bill1 &lt;dbl&gt;,
#   long_bill2 &lt;dbl&gt;, long_bill3 &lt;dbl&gt;, long_bill4 &lt;dbl&gt;, newvec &lt;dbl&gt;,
#   large_mass &lt;dbl&gt;, bill_length_cm &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="clearest-points-9" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-9">Clearest Points</h3>
<p>Lots of joining and binding, great!</p>
<blockquote class="blockquote">
<p>Outlining the steps you took and what you are looking for in the data was really helpful.</p>
</blockquote>
<blockquote class="blockquote">
<p>I really liked the flow of explanation on data management yesterday, thank you!</p>
</blockquote>
<p>That’s great to hear, I almost completely got rid of part6 because I wasn’t sure if it would be that helpful. Hopefully it provided some useful practice with messier data!</p>
</section>
<section id="other-1" class="level3">
<h3 class="anchored" data-anchor-id="other-1">Other</h3>
<blockquote class="blockquote">
<p>We followed an example where we had a graph to strive for, but is there an example or just advice you can provide when we don’t have that? How do you know to leave the demographic information aside and only join the other data first?</p>
</blockquote>
<p>I don’t think there’s good one size fits all advice here. For that particular question, I could have joined the demographic data with each piece of the other data, that is also an option. That also would have avoided the need for <code>bind_rows()</code>, so that’s a good point. I do tend to create separate data sets by “type” so for instance in that example I wanted all of the biomarker/outcome data together, just so I knew where it was. That’s my main reason for binding those data together first.</p>
<blockquote class="blockquote">
<p>Working with messy data seems very scary!!!</p>
</blockquote>
<blockquote class="blockquote">
<p>It’s so useful to learn how to work with super messy data because unfortunately that’s often how people have their data set up!</p>
</blockquote>
<p>Messy data <em>is</em> scary, I agree!</p>
<blockquote class="blockquote">
<p>Why do you use here::here sometimes and other times it’s just here without the here:: preceding it?</p>
</blockquote>
<p>Usually <code>pckgname::functioname()</code> is not necessary but used for clarification where that function is coming from. I sometimes do that in case I haven’t loaded the package first. Since I often use the <code>here</code> package at the beginning of my script when loading in data for an analysis, I’m not used to loading like other packages, but instead just call that function by using <code>here::here()</code>, so it’s somewhat due to habit!</p>
</section>
</section>
<section id="week-8" class="level2">
<h2 class="anchored" data-anchor-id="week-8">Week 8</h2>
<section id="muddiest-points-9" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-9">Muddiest Points</h3>
<p>Definitely functions, several comments like this:</p>
<blockquote class="blockquote">
<p>creating our own functions still seems pretty daunting. the error check in particular I am still very confused about how to write a function. I probably should practice more. Making custom function seems to be so useful, but I need to be more familiar with this.</p>
</blockquote>
<p>Yes this will definitely take practice! If you’re doing the assigned readings, you’ll have read the R for Data Science chapter on <a href="https://r4ds.had.co.nz/functions.html">functions</a> which I find to be a good intro to this concept, but also the suggested reading on this topic is very good too, and I recommend it if you are still confused: <a href="https://hbctraining.github.io/Intro-to-R-flipped/lessons/03_introR-functions-and-arguments.html">Harvard Chan Bioinformatics Core’s lesson on “Functions in R”</a>. The Software Carpentry’s lesson on <a href="https://swcarpentry.github.io/r-novice-inflammation/02-func-R/">functions in R</a> is also good, with some info on error handling.</p>
<p>Hopefully doing the homework provided some good practice with functions. My tip to you is to really think about what is your input (argument) and what is your output (return).</p>
<p>I also would not worry about error handling (using <code>stop()</code>, and <code>if()</code> etc) until you are really a pro at making the functions work without all that extra stuff.</p>
<blockquote class="blockquote">
<p>Things with periods (.namerepair, .x, .fns) and just the general flow of what you can and can’t string together in a function</p>
</blockquote>
<p>Note that things with periods are just an alternate way of naming arguments. I don’t do that for my custom functions because I’m not making complicated functions generally, but a lot of tidyverse functions do. There is a reason for this, which is explained in the Tidyverse design guide <a href="https://design.tidyverse.org/dots-prefix.html">Dot prefix</a> chapter.</p>
<p>This has to do with the <code>...</code> argument which I briefly mentioned in one class. When you see this as an argument to a function it means that arguments supplied there are passed on to <em>other</em> functions. For instance, look at the simple base R function <code>plot</code> documentation (<code>?plot</code>). The explanation for the <code>...</code> is this:</p>
<blockquote class="blockquote">
<p>… Arguments to be passed to methods, such as graphical parameters (see par). Many methods will accept the following arguments:</p>
</blockquote>
<p>So any arguments specified after <code>x</code> and <code>y</code> inside <code>plot()</code> such as <code>title = "My Plot"</code> will be passed to be arguments of the function <code>par()</code>.</p>
<p>The dot prefix chapter therefore says:</p>
<blockquote class="blockquote">
<p>When using … to create a data structure, or when passing … to a user-supplied function, add a . prefix to all named arguments. This reduces (but does not eliminate) the chances of matching an argument at the wrong level. Additionally, you should always provide some mechanism that allows you to escape and use that name if needed.</p>
</blockquote>
<p>If you look therefore at the help for <code>?purrr::map</code> you can see that the argument names start with a dot (<code>.x</code> and <code>.f</code> and <code>.progress</code>) and then everything else is passed to the function specified in <code>.f</code>.</p>
<p>Obviously this is next level stuff, things to think about when designing your own packages, not just simple functions only you will use/see. So don’t worry about it other than to know that some arguments start with a dot and some don’t, they are used the same way!</p>
</section>
<section id="clearest-points-10" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-10">Clearest points</h3>
<blockquote class="blockquote">
<p>List’ was unfamiliar for me, but the concept was clear.</p>
</blockquote>
<p>Cool, more with lists today!</p>
<blockquote class="blockquote">
<p>It was great to learn functions in R Using gt() to make the table was really nice and clear to me.</p>
</blockquote>
<p>Great!</p>
</section>
<section id="other-2" class="level3">
<h3 class="anchored" data-anchor-id="other-2">Other</h3>
<blockquote class="blockquote">
<p>gt() always seems to make my RStudio slow and glitchy. When I try to scroll past a gt() table, R Studio will freeze for a moment. Is that normal? Is there anything I can do?</p>
</blockquote>
<p>I have this same problem with some <code>gtsummary()</code> functions that use <code>gt()</code>, I think it depends on how much memory your computer has free, at least that is my guess. I think these do take a little bit to render and your computer may freeze because it’s doing a lot of “thinking”. If you google this issue and look on the <code>gt</code> package <a href="https://github.com/rstudio/gt/issues/967">issues</a> page on github you can see it isn’t a new or rare problem. If it really is troublesome, I’d make sure you closed all your other windows/software on your computer, or maybe just switch to <code>kable</code> and <code>kableExtra</code> packages.</p>
</section>
</section>
<section id="week-9" class="level2">
<h2 class="anchored" data-anchor-id="week-9">Week 9</h2>
<section id="muddiest-points-10" class="level3">
<h3 class="anchored" data-anchor-id="muddiest-points-10">Muddiest Points</h3>
<p>A lot of things were difficult including “this whole class” as one person said, and yeah, I get it, it’s hard stuff! The reason I teach these harder topics like for loops, functions, map, etc, as opposed to just going over more of the same kind of data cleaning tasks with various examples, is because it’s a lot harder to be motivated to learn the hard stuff if you’ve never been exposed to it. It will probably seem too daunting (I know this because it took me a long time to force myself to learn <code>ggplot</code>, or <code>purrr::map</code>, or even <code>across</code> and the new <code>pivot_longer</code> because I already had other ways of doing that).</p>
<p>You have the tools by now to learn how to do other data cleaning tasks related to what we’ve learned (i.e.&nbsp;more factor and string manipulation, even working with dates will not be that hard to figure out).</p>
<p>Also, part of the reason R is so powerful and useful is that it’s a “real” programming language (more similar to C, python, java, etc than SPSS or even SAS or STATA). This part of it will take a lot of practice to feel comfortable if you haven’t had any programming experience. If you <em>have</em> had programming experience, seeing how it’s done in R will get you started in the right direction to using the R-specific programming tools like <code>purrr::map</code> that are truly so useful when automating data tasks.</p>
<blockquote class="blockquote">
<p>for loop was a bit confusing when making empty vector</p>
</blockquote>
<p>It really is, and is why I recommend not using for loops but embracing <code>map()</code>! We could get even more technical and talk about how <a href="https://www.r-bloggers.com/2018/08/growing-objects-and-loop-memory-pre-allocation/">it’s actually better (faster/efficient) to specify the length or dimension of the empty vector (or data frame, or list, or whatever, this is called pre-allocation) because of how memory is allocated in R</a>, but, no, I refuse to go down that rabbit hole and just say, use <code>map()</code>!</p>
<p>Side note: If you’re working with data with millions of records, you’ll have plenty of speed issues to worry about, and you need an even more advanced R programming class focused on big data.</p>
<blockquote class="blockquote">
<p>I think the whole creation of the function is still quite a bit hazy for me. I believe it’s something that just takes some more practice. Hoping we can fit some more practice challenges to help really build this understanding.</p>
</blockquote>
<p>We will start class with another function example, but please ask questions about anything confusing about it during class, too!</p>
<blockquote class="blockquote">
<p>I am still struggling with functions! In the reading on functions, I got confused about the difference between the &amp;&amp; || operators and the &amp; | operators.. The reading said “beware of floating point numbers” and I’m not sure what that is.</p>
</blockquote>
<p>As we saw in class, the &amp; “and” operator and | “or” operator are logic operators used to string one condition to another, such as:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb447"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a>thing <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb447-2"><a href="#cb447-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(thing) <span class="sc">|</span> thing <span class="sc">==</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb449"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(thing) <span class="sc">&amp;</span> thing <span class="sc">==</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>But remember we talked about how most functions in R are vectorized, which means they work seamlessly over a vector. This is true for | and &amp; as well. However, if you <em>didn’t</em> want that vectorized behavior and only wanted to check the first elements of a vector you’d use the double &amp;&amp; and ||. This becomes useful for if statements, but, you likely don’t need to worry about it, and you probably want the single &amp; |.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb451"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true" tabindex="-1"></a>thing <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb451-2"><a href="#cb451-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(thing) <span class="sc">|</span> thing <span class="sc">==</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb453"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(thing) <span class="sc">&amp;</span> thing <span class="sc">==</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb455"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="co"># no longer works</span></span>
<span id="cb455-2"><a href="#cb455-2" aria-hidden="true" tabindex="-1"></a><span class="co"># is.na(thing) || (thing == 3)</span></span>
<span id="cb455-3"><a href="#cb455-3" aria-hidden="true" tabindex="-1"></a><span class="co"># is.na(thing) &amp;&amp; (thing == 3)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another very specific situation mentioned in that reading is that floating point numbers (numeric values with lots of numbers after the decimal point) sometimes due to computational rounding/storage will not be <em>exactly</em> equal to each other so you just need to be wary of using <code>==</code> there. The example from the reading sums it up well:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a>thing <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span> <span class="co"># should be 2, right?</span></span>
<span id="cb456-2"><a href="#cb456-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">==</span>thing <span class="co"># huh</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="dv">2</span>,thing) <span class="co"># weird</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb460"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">-</span> thing <span class="co"># extremely small value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -4.440892e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb462"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I used to check for "equality" this way...before I knew about dplyr::near()</span></span>
<span id="cb462-2"><a href="#cb462-2" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span><span class="sc">-</span>thing) <span class="sc">&lt;</span> <span class="fl">1e-16</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb464"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">near</span>(<span class="dv">2</span>,thing)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Still struggling with the difference between [[]] and [] and unclear on whether that distinction is actually important functionally.</p>
</blockquote>
<p>It is very important functionally, if you think back to your homework question where you got different data types depending on which you use. Sometimes you want a list, sometimes you don’t want a list. Usually you only want a list ( i.e.&nbsp;<code>list[1:2]</code>) if you are asking for multiple elements of a list, otherwise you’re wanting to pull out what’s inside that “slot” and use <code>list[[1]]</code>.</p>
<p>Note that a lot of newer packages make dealing with complex lists less common than it used to be. The example I gave was the <code>broom</code> package <code>tidy()</code> function. In the past, we all learned how to pull out parts of regression output by accessing parts of the list using <code>[[]]</code> and <code>$</code>, just like I showed in class. Probably a lot of your biostats classes still do it this way because that is how your professor learned it. But, now we just need to use <code>broom::tidy()</code> to get a data frame of coefficients, confidence intervals, and p-values.</p>
<blockquote class="blockquote">
<p>If pluck and pull do the same thing, is there any advantage to using one over the other?</p>
</blockquote>
<p>As I mentioned last class, pluck and pull are similar in that they “pull out” elements from lists but they are used differently so there can not be any “advantage”. <code>pluck</code> is for lists and <code>pull</code> is for data frames (which are also lists, but you can’t use <code>pull</code> on a non-df list! you need to use <code>pluck</code> in that case).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb466"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb466-2"><a href="#cb466-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb466-3"><a href="#cb466-3" aria-hidden="true" tabindex="-1"></a><span class="co"># try this on your own</span></span>
<span id="cb466-4"><a href="#cb466-4" aria-hidden="true" tabindex="-1"></a><span class="co"># a list that is not a data frame</span></span>
<span id="cb466-5"><a href="#cb466-5" aria-hidden="true" tabindex="-1"></a><span class="co"># WHY is it not a data frame?</span></span>
<span id="cb466-6"><a href="#cb466-6" aria-hidden="true" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"a"</span><span class="ot">=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">2</span>) </span>
<span id="cb466-7"><a href="#cb466-7" aria-hidden="true" tabindex="-1"></a><span class="co"># mylist %&gt;% pull("a")</span></span>
<span id="cb466-8"><a href="#cb466-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Error in UseMethod("pull") : </span></span>
<span id="cb466-9"><a href="#cb466-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  no applicable method for 'pull' applied to an object of class "list"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Side note, see the difference here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb467"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(mylist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  a b
1 1 2
2 2 2
3 3 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb469"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"a"</span><span class="ot">=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"b"</span><span class="ot">=</span><span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb469-2"><a href="#cb469-2" aria-hidden="true" tabindex="-1"></a>mylist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 1 2 3

$b
[1] 2 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb471"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb471-1"><a href="#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(mylist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  a b
1 1 2
2 2 3
3 3 4</code></pre>
</div>
</div>
<p>If we do have a data frame/tibble and want to “pull out” a column as a vector (<em>not</em> as a data frame), we are also pulling out an element from a list because a data frame is also a list!</p>
<p>Here is how we would use pull and pluck to do the “same thing” on a data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb473"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb473-1"><a href="#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remember a tibble is a special kind of data frame, which is a special kind of list</span></span>
<span id="cb473-2"><a href="#cb473-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [344 × 15] (S3: tbl_df/tbl/data.frame)
 $ species          : Factor w/ 3 levels "Adelie","Chinstrap",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ island           : Factor w/ 3 levels "Biscoe","Dream",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ bill_length_mm   : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...
 $ bill_depth_mm    : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...
 $ flipper_length_mm: int [1:344] 181 186 195 NA 193 190 181 195 193 190 ...
 $ body_mass_g      : int [1:344] 3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...
 $ sex              : Factor w/ 2 levels "female","male": 2 1 1 NA 1 2 1 2 NA NA ...
 $ year             : int [1:344] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...
 $ long_bill1       : chr [1:344] "not long" "not long" "not long" NA ...
 $ long_bill2       : chr [1:344] "not long" "not long" "not long" NA ...
 $ long_bill3       : chr [1:344] "short" "short" "medium" "medium" ...
 $ long_bill4       : chr [1:344] "short" "short" "medium" NA ...
 $ newvec           : num [1:344] 2.09 2.27 2.24 NA 1.9 ...
 $ large_mass       : chr [1:344] "no" "no" "no" NA ...
 $ bill_length_cm   : num [1:344] 3.91 3.95 4.03 NA 3.67 3.93 3.89 3.92 3.41 4.2 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb475"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb475-1"><a href="#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb477"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb477-1"><a href="#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb479"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb479-1"><a href="#cb479-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> penguins <span class="sc">%&gt;%</span> <span class="fu">pull</span>(species)</span>
<span id="cb479-2"><a href="#cb479-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 3 levels "Adelie","Chinstrap",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb481"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb481-1"><a href="#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does not work because you need quotes for a list element names</span></span>
<span id="cb481-2"><a href="#cb481-2" aria-hidden="true" tabindex="-1"></a><span class="co"># s2 = penguins %&gt;% pluck(species)</span></span>
<span id="cb481-3"><a href="#cb481-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Error in list2(...) : object 'species' not found</span></span>
<span id="cb481-4"><a href="#cb481-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-5"><a href="#cb481-5" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">=</span> penguins <span class="sc">%&gt;%</span> <span class="fu">pluck</span>(<span class="st">"species"</span>)</span>
<span id="cb481-6"><a href="#cb481-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 3 levels "Adelie","Chinstrap",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb483"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb483-1"><a href="#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="co"># are they the same?</span></span>
<span id="cb483-2"><a href="#cb483-2" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(s, s2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>I am not in the habit of using <code>pluck</code> yet, because I am used to <code>[[]]</code> and use it when I need it. I do use <code>pull</code> all the time to get a vector, though, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb485"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb485-1"><a href="#cb485-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb485-2"><a href="#cb485-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb485-3"><a href="#cb485-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb485-4"><a href="#cb485-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 38.79139 48.83382 47.50488</code></pre>
</div>
</div>
<p>Or let’s say I want a list of patient (penguin) ids of a subset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb487"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb487-1"><a href="#cb487-1" aria-hidden="true" tabindex="-1"></a>mypenguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span></span>
<span id="cb487-2"><a href="#cb487-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>(), <span class="at">.before =</span> <span class="st">"species"</span>)</span>
<span id="cb487-3"><a href="#cb487-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb487-4"><a href="#cb487-4" aria-hidden="true" tabindex="-1"></a>mypenguins <span class="sc">%&gt;%</span> </span>
<span id="cb487-5"><a href="#cb487-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(bill_length_mm <span class="sc">&lt;</span> <span class="dv">35</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 16
     id species island    bill_length_mm bill_depth_mm flipper_length_mm
  &lt;int&gt; &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;
1     9 Adelie  Torgersen           34.1          18.1               193
2    15 Adelie  Torgersen           34.6          21.1               198
3    19 Adelie  Torgersen           34.4          18.4               184
4    55 Adelie  Biscoe              34.5          18.1               187
5    71 Adelie  Torgersen           33.5          19                 190
6    81 Adelie  Torgersen           34.6          17.2               189
7    93 Adelie  Dream               34            17.1               185
8    99 Adelie  Dream               33.1          16.1               178
9   143 Adelie  Dream               32.1          15.5               188
# ℹ 10 more variables: body_mass_g &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;,
#   long_bill1 &lt;chr&gt;, long_bill2 &lt;chr&gt;, long_bill3 &lt;chr&gt;, long_bill4 &lt;chr&gt;,
#   newvec &lt;dbl&gt;, large_mass &lt;chr&gt;, bill_length_cm &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb489"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb489-1"><a href="#cb489-1" aria-hidden="true" tabindex="-1"></a>ids_short_bill <span class="ot">&lt;-</span> mypenguins <span class="sc">%&gt;%</span> </span>
<span id="cb489-2"><a href="#cb489-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(bill_length_mm <span class="sc">&lt;</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb489-3"><a href="#cb489-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now I have a vector of IDs that satisfy my bill length requirements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb490"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true" tabindex="-1"></a>ids_short_bill</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   9  15  19  55  71  81  93  99 143</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>I just want to check my understanding is correct. The map() is for list and it can be used as itself, but the across() function is only for data frame or tibble and can be used inside the mutate() function. Is that correct? Then, can we use any function inside those map(), and mutate() ?</p>
</blockquote>
<p>I really like this distinction and clarification! Yes to this part</p>
<ul>
<li><code>map()</code> can be used by itself like, <code>list %&gt;% map(.f = length)</code>, applied to a list or vector</li>
<li><code>across()</code> can only be used as a <em>helper function inside</em> <code>mutate</code> or <code>summarize</code> applied to a data frame/tibble</li>
</ul>
<p>Also:</p>
<ul>
<li>inside <code>across()</code> we need to use <em>very specific</em> syntax which is called <a href="https://tidyselect.r-lib.org/reference/language.html"><code>tidyselect</code></a>.</li>
<li>Think of <code>across()</code> and <code>select()</code> as friends, because they use the same language to select columns.</li>
</ul>
<p>But <code>across()</code> is used more like <code>map()</code> in that it takes a “what” argument (<code>.cols =</code> tidy select columns for across, <code>.x =</code> a list or vector for map) and “function” argument (<code>.fns=</code> for across because multiple functions can be supplied, <code>.f=</code> for map because only <em>one</em> function can be applied)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb492"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb492-1"><a href="#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb492-2"><a href="#cb492-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-3"><a href="#cb492-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 7
   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g  year newvec
            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
 1           39.1          18.7               181        3750  2007   2.09
 2           39.5          17.4               186        3800  2007   2.27
 3           40.3          18                 195        3250  2007   2.24
 4           NA            NA                  NA          NA  2007  NA   
 5           36.7          19.3               193        3450  2007   1.90
 6           39.3          20.6               190        3650  2007   1.91
 7           38.9          17.8               181        3625  2007   2.19
 8           39.2          19.6               195        4675  2007   2   
 9           34.1          18.1               193        3475  2007   1.88
10           42            20.2               190        4250  2007   2.08
# ℹ 334 more rows
# ℹ 1 more variable: bill_length_cm &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb494"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb494-1"><a href="#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="co"># penguins %&gt;% across(where(is.numeric))</span></span>
<span id="cb494-2"><a href="#cb494-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Error in `across()`:</span></span>
<span id="cb494-3"><a href="#cb494-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ! Must only be used inside data-masking verbs like `mutate()`,</span></span>
<span id="cb494-4"><a href="#cb494-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   `filter()`, and `group_by()`.</span></span>
<span id="cb494-5"><a href="#cb494-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-6"><a href="#cb494-6" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate requires a function that returns a vector the same length as the original vector</span></span>
<span id="cb494-7"><a href="#cb494-7" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), <span class="at">.f =</span> as.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 15
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;     &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;             &lt;chr&gt;      
 1 Adelie  Torgersen 39.1           18.7          181               3750       
 2 Adelie  Torgersen 39.5           17.4          186               3800       
 3 Adelie  Torgersen 40.3           18            195               3250       
 4 Adelie  Torgersen &lt;NA&gt;           &lt;NA&gt;          &lt;NA&gt;              &lt;NA&gt;       
 5 Adelie  Torgersen 36.7           19.3          193               3450       
 6 Adelie  Torgersen 39.3           20.6          190               3650       
 7 Adelie  Torgersen 38.9           17.8          181               3625       
 8 Adelie  Torgersen 39.2           19.6          195               4675       
 9 Adelie  Torgersen 34.1           18.1          193               3475       
10 Adelie  Torgersen 42             20.2          190               4250       
# ℹ 334 more rows
# ℹ 9 more variables: sex &lt;fct&gt;, year &lt;chr&gt;, long_bill1 &lt;chr&gt;,
#   long_bill2 &lt;chr&gt;, long_bill3 &lt;chr&gt;, long_bill4 &lt;chr&gt;, newvec &lt;chr&gt;,
#   large_mass &lt;chr&gt;, bill_length_cm &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb496"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb496-1"><a href="#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this works but it shouldn't and is "deprecated" in dplyr 1.1.0</span></span>
<span id="cb496-2"><a href="#cb496-2" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize SHOULD return a vector of length 1</span></span>
<span id="cb496-3"><a href="#cb496-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), <span class="at">.f =</span> as.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 7
   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g year  newvec      
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;             &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       
 1 39.1           18.7          181               3750        2007  2.090909090…
 2 39.5           17.4          186               3800        2007  2.270114942…
 3 40.3           18            195               3250        2007  2.238888888…
 4 &lt;NA&gt;           &lt;NA&gt;          &lt;NA&gt;              &lt;NA&gt;        2007  &lt;NA&gt;        
 5 36.7           19.3          193               3450        2007  1.901554404…
 6 39.3           20.6          190               3650        2007  1.907766990…
 7 38.9           17.8          181               3625        2007  2.185393258…
 8 39.2           19.6          195               4675        2007  2           
 9 34.1           18.1          193               3475        2007  1.883977900…
10 42             20.2          190               4250        2007  2.079207920…
# ℹ 334 more rows
# ℹ 1 more variable: bill_length_cm &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb499"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb499-1"><a href="#cb499-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), <span class="at">.f =</span> length))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  bill_length_mm bill_depth_mm flipper_length_mm body_mass_g  year newvec
           &lt;int&gt;         &lt;int&gt;             &lt;int&gt;       &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1            344           344               344         344   344    344
# ℹ 1 more variable: bill_length_cm &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb501"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb501-1"><a href="#cb501-1" aria-hidden="true" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"a"</span><span class="ot">=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="at">c =</span> penguins) </span>
<span id="cb501-2"><a href="#cb501-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb501-3"><a href="#cb501-3" aria-hidden="true" tabindex="-1"></a><span class="co"># .x can be piped into map or used as an explicit argument</span></span>
<span id="cb501-4"><a href="#cb501-4" aria-hidden="true" tabindex="-1"></a>mylist <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="at">.f =</span> length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 3

$b
[1] 1

$c
[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb503"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb503-1"><a href="#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="at">.x =</span> mylist, <span class="at">.f =</span> length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 3

$b
[1] 1

$c
[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb505"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb505-1"><a href="#cb505-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this also works because penguins is a data frame which means it is also a list (columns are elements)</span></span>
<span id="cb505-2"><a href="#cb505-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="at">.f =</span> length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$species
[1] 344

$island
[1] 344

$bill_length_mm
[1] 344

$bill_depth_mm
[1] 344

$flipper_length_mm
[1] 344

$body_mass_g
[1] 344

$sex
[1] 344

$year
[1] 344

$long_bill1
[1] 344

$long_bill2
[1] 344

$long_bill3
[1] 344

$long_bill4
[1] 344

$newvec
[1] 344

$large_mass
[1] 344

$bill_length_cm
[1] 344</code></pre>
</div>
<div class="sourceCode cell-code" id="cb507"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb507-1"><a href="#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="at">.x =</span> penguins, <span class="at">.f =</span> length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$species
[1] 344

$island
[1] 344

$bill_length_mm
[1] 344

$bill_depth_mm
[1] 344

$flipper_length_mm
[1] 344

$body_mass_g
[1] 344

$sex
[1] 344

$year
[1] 344

$long_bill1
[1] 344

$long_bill2
[1] 344

$long_bill3
[1] 344

$long_bill4
[1] 344

$newvec
[1] 344

$large_mass
[1] 344

$bill_length_cm
[1] 344</code></pre>
</div>
</div>
<p>However, as we will see in class today, we also can use <code>map()</code> inside <code>mutate()</code> when we are using nested data frames, or when we need to “vectorize” a non-vectorized function. In this case, <code>map()</code> is being applied to a list of data that is inside a column of a data frame….it’s complicated, and we’ll see more today.</p>
</section>
<section id="clearest-points-11" class="level3">
<h3 class="anchored" data-anchor-id="clearest-points-11">Clearest points</h3>
<p>For every topic in the muddy list it was also in the clear list, so at least it’s not all lost. I think more practice will help.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>